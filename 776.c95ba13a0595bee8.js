"use strict";(self.webpackChunkmeddler_genz_ui=self.webpackChunkmeddler_genz_ui||[]).push([[776],{5060:(Z,P,_)=>{_.d(P,{A:()=>C});var c=_(4496);let C=(()=>{class L{constructor(){this.loading=!0}ngOnInit(){this.icon||(this.loading=!1)}static{this.\u0275fac=function(y){return new(y||L)}}static{this.\u0275cmp=c.In1({type:L,selectors:[["app-my-icon"]],inputs:{icon:"icon"},decls:2,vars:1,consts:[[1,"engagement-icon"],[1,"engagement-icon",3,"src"]],template:function(y,I){1&y&&(c.I0R(0,"div",0),c.wR5(1,"img",1),c.C$Y()),2&y&&(c.yG2(),c.E7m("src",I.icon,c.K6U))},styles:[".engagement-icon[_ngcontent-%COMP%]{width:30px;margin-right:20px;height:30px}"]})}}return L})()},6744:(Z,P,_)=>{_.d(P,{_:()=>nt});var c=_(4496),C=_(2700),L=_(5657),R=_(4680),w=_(6684),y=_(9212),I=_(5888),t=_(1368),h=_(64),J=_(2276);function tt(E,F){1&E&&c.wR5(0,"app-popover-menu",2)}function et(E,F){if(1&E){const m=c.KQA();c.SAx(0),c.I0R(1,"div",3)(2,"button",4),c.qCj("click",function(){const Y=c.usT(m).ngIf,D=c.GaO();return c.CGJ(D.prevPage(Y))}),c.wR5(3,"nb-icon",5),c.C$Y(),c.I0R(4,"button",6)(5,"div",7),c.OEk(6," Page: "),c.C$Y(),c.I0R(7,"div",8),c.OEk(8),c.C$Y(),c.wR5(9,"nb-icon",9),c.C$Y(),c.I0R(10,"button",4),c.qCj("click",function(){const Y=c.usT(m).ngIf,D=c.GaO();return c.CGJ(D.nextPage(Y))}),c.wR5(11,"nb-icon",10),c.C$Y()(),c.k70()}if(2&E){const m=F.ngIf;let b;c.yG2(),c.E7m("nbSpinner",null==m?null:m.pseudoLoading),c.yG2(7),c.oRS(" ",null!==(b=null==m?null:m.pseudoPage)&&void 0!==b?b:null==m?null:m.currentPage," ")}}let nt=(()=>{class E{constructor(m){this.header=m,this.themeClass="",this.menuItems=(0,C.of)([]),this.onchange=new c._w7,this.page_number=1,this.loading=!1,this.page_current=0,this.pseudoPage=0,this.onPageChange=new L.E}ngOnInit(){this.onPageChange.pipe((0,R.o)(300),(0,w.I)(v=>v.pseudoPage!=v.currentPage)).subscribe(v=>{console.log("pagination_data","debounce",v),v.pseudoLoading=!0,this.header.triggerPageChange(this.tag,v?.pseudoPage)}),this.pagination_data$=this.header.getPaginator(this.tag).pipe((0,y.y)(v=>{console.log("pagination_data",v)}));let b=[];for(let v=0;v<10;v++)b.push({id:v+1,icon:"",alias:"",title:""+v+1});this.menuItems=(0,C.of)(b)}ngOnChanges(m){if(m.paginator_data){let b=m.paginator_data.currentValue;if(!b)return;console.log("paginator_data",b),this.page_number=b.currentPage,this.page_count=b.totalPages,this.page_size=b.pageSize,this.page_current=b.currentPage}}goto(m){this.header.triggerPageChange(this.tag,m)}nextPage(m){if(m?.pseudo){if(m?.pseudoPage>=m?.totalPages)return}else if(m?.currentPage>=m?.totalPages)return;1!=m.pseudo&&(m.pseudoPage=m.currentPage,m.pseudo=!0),m.pseudoPage=m.pseudoPage+1,this.onPageChange.next(m)}prevPage(m){if(m?.pseudo){if(m?.pseudoPage<=1)return}else if(m?.currentPage<=1)return;1!=m.pseudo&&(m.pseudoPage=m.currentPage,m.pseudo=!0),m.pseudoPage=m.pseudoPage-1,this.onPageChange.next(m)}next(){this.onchange.emit(this.page_current+1)}prev(){this.onchange.emit(this.page_current-1)}static{this.\u0275fac=function(b){return new(b||E)(c.GI1(I.ae))}}static{this.\u0275cmp=c.In1({type:E,selectors:[["app-paginator"]],inputs:{tag:"tag",themeClass:[c.Wk5.None,"theme-class","themeClass"],paginator_data:[c.Wk5.None,"paginator","paginator_data"],page_number:"page_number",page_count:"page_count",page_size:"page_size",loading:"loading",page_current:"page_current"},outputs:{onchange:"onchange"},features:[c.SYr],decls:4,vars:3,consts:[["pageMenuTemplate",""],[4,"ngIf"],["title","Select Page"],["fxLayoutAlign","center center",3,"nbSpinner"],["size","small","nbButton","","ghost","","status","basic",1,"active",3,"click"],["icon","chevron-left-outline"],["size","small","nbButton","","outline","","status","basic",1,"active"],[1,"placeholder"],[1,"value"],["icon","chevron-down-outline"],["icon","chevron-right-outline"]],template:function(b,v){1&b&&(c.yuY(0,tt,1,0,"ng-template",null,0,c.gJz)(2,et,12,2,"ng-container",1),c.wVc(3,"async")),2&b&&(c.yG2(2),c.E7m("ngIf",c.kDX(3,1,v.pagination_data$)))},dependencies:[t.u_,h.UrE,h.sXj,J.qG,h.yqL,t.a],styles:[".placeholder[_ngcontent-%COMP%]{font-weight:300!important;margin-right:.4rem}.value[_ngcontent-%COMP%]{font-weight:500!important;margin-right:.4rem}button[_ngcontent-%COMP%]{background:none!important}"]})}}return E})()},8595:(Z,P,_)=>{_.d(P,{y:()=>w});var c=_(4496),C=_(9684),L=_(4036),R=_(2624);let w=(()=>{class y{constructor(t,h,J){this.elementRef=t,this.renderer=h,this.apiService=J,this.onclose=new c._w7,this.targetElem=".cdk-overlay-container",this.scrollBlockerClass="cdk-global-scrollblock",this.blurEffectClass="overlay-blur"}addScrollBlock(){this.cdkOverlayElementRef&&this.renderer.addClass(this.htmlElementRef,this.scrollBlockerClass)}removeScrollBlock(){this.cdkOverlayElementRef&&this.renderer.removeClass(this.htmlElementRef,this.scrollBlockerClass)}addBackgroundBlur(){this.cdkOverlayElementRef&&this.renderer.addClass(this.cdkOverlayElementRef,this.blurEffectClass)}removeBackgroundBlur(){this.cdkOverlayElementRef&&this.renderer.removeClass(this.cdkOverlayElementRef,this.blurEffectClass)}ngOnInit(){this.htmlElementRef=document.body,this.cdkOverlayElementRef=this.elementRef.nativeElement.closest(this.targetElem),console.log("cdkOverlayElementRef:",this.htmlElementRef),this.addBackgroundBlur(),this.addScrollBlock()}ngOnDestroy(){this.onclose.next(this.id);let t=this.elementRef.nativeElement.closest(this.targetElem);console.log("Parent_element:",t,this.id),this.removeBackgroundBlur(),this.removeScrollBlock()}static{this.\u0275fac=function(h){return new(h||y)(c.GI1(c.GMv),c.GI1(c.q87),c.GI1(R.Ww))}}static{this.\u0275cmp=c.In1({type:y,selectors:[["app-popover-scroll-blocker-abstract"]],hostVars:7,hostBindings:function(h,J){2&h&&(c.Swe("@popoverTransition","left"),c.m4B("display","block")("max-height","400px")("overflow-y","auto"))},inputs:{id:"id"},outputs:{onclose:"onclose"},decls:2,vars:0,template:function(h,J){1&h&&(c.I0R(0,"p"),c.OEk(1,"popover-scroll-blocker-abstract works!"),c.C$Y())},data:{animation:[(0,C.gV)("popoverTransition",L.e)]}})}}return y})()},776:(Z,P,_)=>{_.r(P),_.d(P,{ExtensionsModule:()=>Ga});var c=_(1368),C=_(6588),L=_(5657),R=_(5568),w=_(4704),y=_(9212),I=_(7368),t=_(4496),h=_(2624);let J=(()=>{class n{isActiveTab(e){return this.activatedRoute.snapshot.firstChild?.routeConfig?.path===e}constructor(e,o,i){this.apiService=e,this.activatedRoute=o,this.router=i,this.current_tab$=new L.E,this.current_tab=this.current_tab$.asObservable().pipe((0,R.W)(r=>this.activatedRoute.firstChild.url.pipe((0,w.k)(s=>s[0].path),(0,y.y)(s=>{console.log("debugdebugdebug",s)})).pipe((0,I.G)(s=>s)))),this.meta_data=this.apiService.getMetaData()}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(C.gV),t.GI1(C.E5))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-integration-layout"]],decls:1,vars:0,template:function(o,i){1&o&&t.wR5(0,"router-outlet")},dependencies:[C.cP],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n']})}}return n})();var tt=_(1496),et=_(8796),nt=_(7228),E=_(9144),F=_(2700);let m=(()=>{class n{constructor(e,o,i){this.apiService=e,this.activatedRoute=o,this.router=i}ngOnInit(){this.resultData=this.activatedRoute.paramMap.pipe((0,w.k)(e=>{let o=e.get("scm");if(!o)throw new Error("Invalid scm");return o}),(0,I.G)(e=>this.activatedRoute.queryParamMap.pipe((0,w.k)(o=>{let i=o.get("code");if(!i)throw new Error("Invalid code");return{scm:e,code:i}}))),(0,I.G)(e=>this.apiService.scmIntegrationProgress(e.scm,e.code).pipe((0,I.G)(o=>{if(!1===o.status)throw new Error("Couldn't perform auth!");const i=this.apiService.getScmJobStatus(e.scm,o.scm_job_id),r=(0,tt.I)(5e3).pipe((0,I.G)(()=>this.apiService.getScmJobStatus(e.scm,o.scm_job_id)),(0,et.w)(s=>"failed"!==s.status&&"completed"!==s.status,!0));return(0,nt.W)(i,r)}))),(0,E.a)(e=>(console.error("Error occurred:",e),(0,F.of)(null))))}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(C.gV),t.GI1(C.E5))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-integration-scm-status"]],decls:5,vars:5,template:function(o,i){1&o&&(t.I0R(0,"p"),t.OEk(1,"integration-scm-status works!"),t.C$Y(),t.OEk(2),t.wVc(3,"json"),t.wVc(4,"async")),2&o&&(t.yG2(2),t.oRS(" ",t.kDX(3,1,t.kDX(4,3,i.resultData)),""))},dependencies:[c.a,c.ED]})}}return n})();var b=_(6700),v=_(6928),Y=_(4680),D=_(4e3),G=_(6808),l=_(64),Lt=_(9684),Et=_(4036),f=_(5888),O=_(4541);const $t=["toolSelectorTemplate"];function Tt(n,a){if(1&n&&t.wR5(0,"app-repository-branch-selector",7),2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("repository_id",null==e||null==e._id?null:e._id.$oid)}}function Mt(n,a){if(1&n&&t.wR5(0,"app-scm-integration-tool-selector-for-execution",8),2&n){const e=a.$implicit;t.E7m("selected_assets",null==e?null:e.selected_assets)("window_id",null==e?null:e.window_id)("repository_id",null==e||null==e._id?null:e._id.$oid)("query_filters",null==e?null:e.query_filters)("exclude",null==e?null:e.exclude)}}function At(n,a){if(1&n&&t.wR5(0,"app-agent-task-list",9),2&n){const e=a.$implicit;t.E7m("selected_assets",null==e?null:e.selected_assets)("window_id",null==e?null:e.window_id)("repository_id",null==e||null==e._id?null:e._id.$oid)("query_filters",null==e?null:e.query_filters)("exclude",null==e?null:e.exclude)}}function Pt(n,a){if(1&n&&t.wR5(0,"app-repository-branch-selector-chooser",10),2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("agent_id",null==e?null:e._id)}}function Ft(n,a){if(1&n){const e=t.KQA();t.I0R(0,"app-scm-integrationfilter-menu",11),t.qCj("onapply",function(i){t.usT(e);const r=t.GaO();return t.CGJ(r.onFilterSelected(i))}),t.C$Y()}if(2&n){const e=t.GaO();t.E7m("state",e.state$)("selected",e.selected_scm_ids$)("menuItems",e.menuItems)("ref",e.popoverComponentRef)("id",e.applicationId)}}function Yt(n,a){1&n&&t.wR5(0,"app-loading-card")}function Dt(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",25),t.qCj("click",function(i){t.usT(e);const r=t.GaO().$implicit,s=t.GaO(3);return i.stopPropagation(),i.preventDefault(),t.CGJ(s.downloadFile(null==s.engagement?null:s.engagement.id,null==r||null==r._id?null:r._id.$oid))}),t.I0R(1,"div",26)(2,"div"),t.OEk(3),t.C$Y(),t.I0R(4,"div")(5,"button",27),t.wR5(6,"nb-icon",28),t.C$Y()()()()}if(2&n){const e=a.$implicit;t.yG2(3),t.oRS(" ",null==e?null:e.filename," ")}}function qt(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-list-item",15),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(3);return t.CGJ(s.onItemClick(r))}),t.I0R(1,"div",16)(2,"div"),t.wR5(3,"img",17),t.C$Y(),t.I0R(4,"div",18)(5,"div",19),t.OEk(6),t.C$Y(),t.I0R(7,"div",20),t.OEk(8),t.C$Y(),t.yuY(9,Dt,7,1,"div",21),t.C$Y()(),t.wR5(10,"div",22),t.I0R(11,"button",23),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(3),u=t.Gew(1);return t.CGJ(s.openDrawer(u,r))}),t.wR5(12,"nb-icon",24),t.C$Y()()}if(2&n){const e=a.$implicit,o=t.GaO().ngIf;t.eAK("selected",null!=o&&o.bulk_selected_mode_all?!(null!=o&&o.marked_ids.has(null==e||null==e._id?null:e._id.$oid)):null==o?null:o.marked_ids.has(null==e||null==e._id?null:e._id.$oid)),t.yG2(3),t.E7m("src",null==e?null:e.icon,t.K6U),t.yG2(3),t.oRS(" ",null==e?null:e.title," "),t.yG2(2),t.oRS(" ",null==e||null==e.scm_integration?null:e.scm_integration.alias," "),t.yG2(),t.E7m("ngForOf",null==e?null:e.files)}}function Jt(n,a){if(1&n&&(t.SAx(0),t.I0R(1,"nb-card")(2,"nb-card-body")(3,"nb-list",13),t.yuY(4,qt,13,6,"nb-list-item",14),t.C$Y()()(),t.k70()),2&n){const e=t.GaO().ngIf;t.yG2(4),t.E7m("ngForOf",e)}}function zt(n,a){if(1&n&&(t.SAx(0),t.yuY(1,Jt,5,1,"ng-container",12),t.wVc(2,"async"),t.k70()),2&n){const e=t.GaO();t.yG2(),t.E7m("ngIf",t.kDX(2,1,e.state))}}let z=(()=>{class n{onItemClick(e){this.state$.onClick(e)}switchSelectionMode(){this.state$.switchSelectionMode()}select(e){this.selection_event.next(e)}get loading(){return this.headerService.loading}onPageChange(e){this.goto(e)}goto(e){this.headerService.loading=!0,this.loadMore$.next({...this.loadMore$.value,page_number:e})}searchRepo(e){this.headerService.loading=!0,console.log("reset-state",e),this.loadMore$.next({search_string:e,page_number:1})}get searchInput(){return this.headerService.searchFieldControl}onFilterSelected(e){this.searchRepo(this.headerService.searchFieldControl.value)}get filtersAppliedCount(){return this.state$.filter_selected_scm_ids.size}constructor(e,o,i){this.apiService=e,this.drawerMngr=o,this.headerService=i,this.menuItems=this.apiService.getScmAppPassword("all",{verified:!0,auth_type:"password"}),this.themeClass="",this.selection_event=new t._w7,this.loadMore$=new b.g({page_number:1,search_string:""}),this.repositories=this.loadMore$.pipe((0,I.G)(r=>(this.headerService.loading=!0,r.page_number<1&&(r.page_number=1),this.apiService.getScmRepos({page:r.page_number,query:r.search_string},{filters:{scm_credential_ids:Array.from(this.state$.filter_selected_scm_ids)}}).pipe((0,w.k)(s=>(this.pagination_data=s.pagination,this.headerService.updatePaginatorStream(this.tag,s?.pagination),s?.data)),(0,y.y)(s=>{this.headerService.loading=!1}))))),this.searching=!1,this.threshHoldDelay=600,this.Array=Array,this.tag=f.wR.SCM_LIST,this.btnSubscription$=v.wH.EMPTY}ngOnDestroy(){this.btnSubscription$?.unsubscribe()}get searchFieldControl(){return this.headerService.searchFieldControl}ngOnInit(){this.btnSubscription$=this.headerService.OnClickEvent.subscribe(e=>{let o=e?.data?.state;console.log("statestatestate",o),this.state||(this.state$=o,this.state=o?.onValudChanges),console.log("apply-filter",e,o),e.event==f.QH.NOOP||(e.event==f.QH.SEARCH_FILTER?(console.log("apply-filter",e),this.onFilterSelected(e?.data)):e.event==f.QH.MULTI_SELECTION_MODE?(console.log("apply-filter",e),this.state$.switchSelectionMode(!0)):e.event==f.QH.CLEAR_SELECTION?(console.log("apply-filter",e),this.state$.deselectAll()):e.event==f.QH.SELECT_ALL?(console.log("apply-filter",e),this.state$.selectAll()):e.event==f.QH.TRIGGER_EXECUTION&&(console.log("apply-filter",e),this.runTool()))}),this.headerService.onPageChange(this.tag).subscribe(e=>{console.log("SCM_LIST","page_change",e),this.onPageChange(e)}),this.searchInput.valueChanges.pipe((0,Y.o)(this.threshHoldDelay),(0,D.a)(),(0,R.W)(this.searchInput.value),(0,y.y)(e=>{this.searching=!0})).subscribe(e=>{this.searchRepo(e)})}runTool(){this.openDrawer(this.toolSelectorTemplate,{selected_assets:Array.from(this.state$.markedIds),exclude:this.state$.bulk_selected_mode_all,query_filters:{filters:{scm_credential_ids:Array.from(this.state$.filter_selected_scm_ids)},query:this.searchInput.value}})}getRepoDetails(e){this.apiService.getRepoBranchesDetails(e).subscribe(console.log)}testWatchdog(e){this.apiService.testWatchdog(e).subscribe()}testSecoflex(e){console.log("testSecoflex",e)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(O.g),t.GI1(f.ae))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-integration-list"]],viewQuery:function(o,i){if(1&o&&(t.CC$(l.w57,5),t.CC$($t,5)),2&o){let r;t.wto(r=t.Gqi())&&(i.popoverComponentRef=r.first),t.wto(r=t.Gqi())&&(i.toolSelectorTemplate=r.first)}},inputs:{themeClass:[t.Wk5.None,"theme-class","themeClass"]},outputs:{selection_event:"selection_event"},decls:14,vars:4,consts:[["branchSelectorTemplate",""],["toolSelectorTemplate",""],["agentTaskListTemplate",""],["branchSelectorListTemplate",""],["integrationfilterMenuTemplate",""],["loadingCard",""],[4,"ngIf","ngIfElse"],[3,"window_id","repository_id"],["agent_filters","git_path","asset_type","code_repository",3,"selected_assets","window_id","repository_id","query_filters","exclude"],[3,"selected_assets","window_id","repository_id","query_filters","exclude"],[3,"window_id","agent_id"],[3,"state","selected","menuItems","ref","id","onapply"],[4,"ngIf"],["fxLayout","row wrap","fxLayout.lt-md","column","fxLayout.lt-sm","column"],["fxLayout","row","class","item","fxFlex","100%",3,"selected","click",4,"ngFor","ngForOf"],["fxLayout","row","fxFlex","100%",1,"item",3,"click"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],[2,"height","1.2rem",3,"src"],["fxLayout","column"],[1,"text-interactive","text-hint"],[1,"text-interactive","text-hint","caption-2"],["nbButton","","fxLayoutAlign","start start","class","text-hint",3,"click",4,"ngFor","ngForOf"],["fxLayoutAlign","start end","fxLayoutGap","0.6rem","fxLayout","column"],["shape","round","size","small","status","danger","nbButton","","ghost","",1,"left",3,"click"],["status","danger","filled","","icon","diagonal-arrow-right-up-outline"],["nbButton","","fxLayoutAlign","start start",1,"text-hint",3,"click"],["fxLayoutGap","0.4rem","fxLayout","row","fxLayoutAlign","center center"],["shape","round","size","tiny","status","basic","nbButton","","ghost",""],["status","basic","filled","","icon","arrowhead-down-outline"]],template:function(o,i){if(1&o&&(t.yuY(0,Tt,1,2,"ng-template",null,0,t.gJz)(2,Mt,1,5,"ng-template",null,1,t.gJz)(4,At,1,5,"ng-template",null,2,t.gJz)(6,Pt,1,2,"ng-template",null,3,t.gJz)(8,Ft,1,5,"ng-template",null,4,t.gJz)(10,Yt,1,0,"ng-template",null,5,t.gJz)(12,zt,3,3,"ng-container",6),t.wVc(13,"async")),2&o){const r=t.Gew(11);t.yG2(12),t.E7m("ngIf",t.kDX(13,2,i.repositories))("ngIfElse",r)}},styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.item[_ngcontent-%COMP%]{background:var(--background-basic-color-2)!important;padding:1rem 1rem .5rem;margin-bottom:.5rem;border-style:solid;border-left-color:var(--color-primary-500);border-width:0px}.item.selected[_ngcontent-%COMP%]{border-left-width:8px}nb-card[_ngcontent-%COMP%]{padding:0;margin:0;border:0}nb-card-header[_ngcontent-%COMP%]{background:var(--background-basic-color-3)!important;margin:0;padding:4px}nb-card-body[_ngcontent-%COMP%]{padding:.7rem;margin:0;border:0}button[_ngcontent-%COMP%]{text-transform:none!important}'],data:{animation:[(0,Lt.gV)("drawerTransition",Et.e)]}})}}return n})();var Bt=_(3992),jt=_(6684),d=_(2276),g=_(6504),Wt=_(7680);const Kt=["inpForm"];function Qt(n,a){if(1&n){const e=t.KQA();t.I0R(0,"input",5,6),t.qCj("keyup.escape",function(){t.usT(e);const i=t.GaO();return t.CGJ(i._deactivate())})("focusout",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.deactivate())})("keyup.enter",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.save())}),t.C$Y()}if(2&n){const e=t.GaO();t.eAK("isActivated",e.isActivated)("hovered",e.isHovered),t.E7m("formControl",e.value$)("readonly",!e.isActivated)("placeholder",e.placeholder)}}function Ht(n,a){if(1&n){const e=t.KQA();t.I0R(0,"input",7,6),t.qCj("keyup.escape",function(){t.usT(e);const i=t.GaO();return t.CGJ(i._deactivate())})("focusout",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.deactivate())})("keyup.enter",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.save())}),t.C$Y()}if(2&n){const e=t.GaO();t.eAK("isActivated",e.isActivated)("hovered",e.isHovered),t.E7m("formControl",e.value$)("readonly",!e.isActivated)("placeholder",e.placeholder)}}function Ut(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-icon",8),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.activate())}),t.C$Y()}}function Xt(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-icon",9),t.qCj("click",function(i){return t.usT(e),t.GaO().save(),i.preventDefault(),t.CGJ(i.stopPropagation())}),t.C$Y()}}let ot=(()=>{class n{ngOnChanges(e){console.log("changes",e),e.value&&this.value$.setValue(e.value.currentValue)}constructor(e){this.cdr=e,this.showIcon=!0,this.placeholder="",this.initFocus=!1,this.minEventDelayCatcher=300,this.isActivated=!1,this.isHovered=!1,this.isFocused=!1,this.loading=!1,this.enableDeactivation=!1,this.value$=new g.Ku,this.invalidate=new L.E}set activated$(e){e&&(this.enableDeactivation=!0,this.isActivated=!0)}ngOnInit(){this.updateFun=this.saveSubject$?this.saveSubject$:()=>(0,F.of)(!0),console.log("saveSubject",this.saveSubject$,this.updateFun)}save(){this.loading=!0,(0,F.of)(!0).pipe((0,I.G)(e=>this.updateFun(this.value$.value)),(0,Wt.o)(this.minEventDelayCatcher+1)).subscribe(e=>{this.loading=!1,this._deactivate(),this.value$.setValue(this.value),this.invalidate.next(e)})}activate(){this.inpForm.nativeElement.focus(),this.isActivated=!0}_deactivate(){this.enableDeactivation||(this.inpForm.nativeElement.blur(),this.isActivated=!1,this.value$.setValue(this.value))}deactivate(){this.enableDeactivation||this.isActivated&&setTimeout(()=>{this.loading||this._deactivate()},this.minEventDelayCatcher)}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(t.kD9))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-auto-save-formfield"]],viewQuery:function(o,i){if(1&o&&t.CC$(Kt,5),2&o){let r;t.wto(r=t.Gqi())&&(i.inpForm=r.first)}},inputs:{showIcon:"showIcon",placeholder:"placeholder",initFocus:"initFocus",activated$:[t.Wk5.None,"activated","activated$"],value:"value",saveSubject$:[t.Wk5.None,"updateDataFn","saveSubject$"]},outputs:{invalidate:"invalidate"},features:[t.SYr],decls:6,vars:5,consts:[["fxFlex","","nbSpinnerStatus","danger",3,"nbSpinner","click","mouseenter","mouseleave","focus","blur"],["focusOnce","","fullWidth","","type","text","nbInput","","fieldSize","medium",3,"formControl","isActivated","hovered","readonly","placeholder","keyup.escape","focusout","keyup.enter",4,"ngIf"],["fullWidth","","type","text","nbInput","","fieldSize","medium",3,"formControl","isActivated","hovered","readonly","placeholder","keyup.escape","focusout","keyup.enter",4,"ngIf"],["status","basic","nbButton","","nbSuffix","","icon","settings-2-outline",3,"click",4,"ngIf"],["nbButton","","icon","corner-down-left-outline","nbSuffix","",3,"click",4,"ngIf"],["focusOnce","","fullWidth","","type","text","nbInput","","fieldSize","medium",3,"formControl","readonly","placeholder","keyup.escape","focusout","keyup.enter"],["inpForm",""],["fullWidth","","type","text","nbInput","","fieldSize","medium",3,"formControl","readonly","placeholder","keyup.escape","focusout","keyup.enter"],["status","basic","nbButton","","nbSuffix","","icon","settings-2-outline",3,"click"],["nbButton","","icon","corner-down-left-outline","nbSuffix","",3,"click"]],template:function(o,i){1&o&&(t.SAx(0),t.I0R(1,"nb-form-field",0),t.qCj("click",function(){return i.isHovered=!0})("mouseenter",function(){return i.isHovered=!0})("mouseleave",function(){return i.isHovered=!1})("focus",function(){return i.isFocused=!0})("blur",function(){return i.isFocused=!1}),t.yuY(2,Qt,2,7,"input",1)(3,Ht,2,7,"input",2)(4,Ut,1,0,"nb-icon",3)(5,Xt,1,0,"nb-icon",4),t.C$Y(),t.k70()),2&o&&(t.yG2(),t.E7m("nbSpinner",i.loading),t.yG2(),t.E7m("ngIf",i.initFocus),t.yG2(),t.E7m("ngIf",!i.initFocus),t.yG2(),t.E7m("ngIf",i.showIcon&&!i.isActivated&&i.isHovered),t.yG2(),t.E7m("ngIf",i.showIcon&&i.isActivated))},dependencies:[c.u_,l.UrE,g.ot,g.ue,g.ug,l.yqL,l.eAh,l.yAs,l.GAA,d.CA],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\nbutton[_ngcontent-%COMP%]{background-color:var(--background-basic-color-1)!important}input[_ngcontent-%COMP%]{border-color:var(--background-basic-color-1)!important;background-color:var(--background-basic-color-1)!important}input.hovered[_ngcontent-%COMP%]{border-color:var(--color-basic-transparent-200)!important}input.isActivated[_ngcontent-%COMP%]{background-color:var(--color-primary-transparent-300)!important;border-color:nb-tnb-theme(color-primary-transparent-100)}']})}}return n})();function Vt(n,a){if(1&n&&t.wR5(0,"app-agent-executor",10),2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("agent_id",null==e?null:e._id)}}function Nt(n,a){if(1&n&&t.wR5(0,"app-agent-integration-list",10),2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("agent_id",null==e?null:e._id)}}function Zt(n,a){if(1&n&&t.wR5(0,"app-agent-jobs",11),2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("agent_id",null==e?null:e._id)}}function te(n,a){1&n&&(t.I0R(0,"div",28),t.wR5(1,"nb-icon",29),t.C$Y())}function ee(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),t.wR5(5,"img",17),t.C$Y(),t.I0R(6,"div",18)(7,"div",19)(8,"div",20),t.OEk(9),t.C$Y(),t.yuY(10,te,2,0,"div",21),t.C$Y(),t.I0R(11,"div",22),t.OEk(12),t.C$Y(),t.I0R(13,"div",23),t.OEk(14),t.C$Y(),t.I0R(15,"div",24),t.OEk(16),t.C$Y()()()(),t.I0R(17,"button",25),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(),u=t.Gew(3);return t.CGJ(s.openDrawer(u,r))}),t.OEk(18," Install "),t.C$Y(),t.I0R(19,"button",26),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(),u=t.Gew(5);return t.CGJ(s.openDrawer(u,r))}),t.wR5(20,"nb-icon",27),t.C$Y()()()}if(2&n){const e=a.$implicit,o=t.GaO();t.m4B("border-color",null==o.member?null:o.member.primary_color),t.yG2(5),t.E7m("src",null==e?null:e.icon,t.K6U),t.yG2(4),t.oRS(" ",(null==e?null:e.title)||(null==e?null:e.identifier)," "),t.yG2(),t.E7m("ngIf",null==e||null==e.meta_data?null:e.meta_data.active),t.yG2(2),t.oRS(" ",null!=e&&null!=e.meta_data&&null!=e.meta_data.scanner_inputs&&e.meta_data.scanner_inputs.indexOf("git_path")?"DAST":"SAST"," "),t.yG2(),t.eAK("text-danger",(null==e?null:e.tasks_count)>0),t.yG2(),t.oRS(" ",null==e?null:e.tasks_count," tasks "),t.yG2(2),t.oRS(" ",(null==e?null:e.description)||"No Description"," ")}}function ne(n,a){if(1&n&&(t.I0R(0,"div",50),t.wR5(1,"app-agent-hierarchy-graph",51),t.C$Y()),2&n){const e=a.$implicit;t.yG2(),t.E7m("node",e)}}function oe(n,a){if(1&n&&t.wR5(0,"nb-tag",52),2&n){const e=a.$implicit,o=t.GaO(3);t.E7m("status",o.active?"alternative":"basic")("text",e)}}function ie(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",53)(1,"button",54),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.testSecoflex(i.repository))}),t.wR5(2,"nb-icon",55),t.OEk(3," Test "),t.C$Y(),t.I0R(4,"button",56),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.testWatchdog(i.repository))}),t.wR5(5,"nb-icon",57),t.OEk(6," Secoflex "),t.C$Y()()}}function ae(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35)(4,"div"),t.wR5(5,"app-my-icon",36),t.C$Y(),t.I0R(6,"div",18)(7,"div",37),t.OEk(8),t.C$Y(),t.I0R(9,"div",38),t.OEk(10," Valid \xa0 "),t.wR5(11,"nb-icon",36),t.OEk(12," Complete \xa0 "),t.wR5(13,"nb-icon",36),t.C$Y(),t.yuY(14,ne,2,1,"div",39),t.I0R(15,"div",40),t.yuY(16,oe,1,2,"nb-tag",41),t.C$Y()()(),t.I0R(17,"div",42)(18,"div",43)(19,"div",44),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2),u=t.Gew(3);return t.CGJ(s.openDrawer(u,r))}),t.OEk(20," Install "),t.C$Y(),t.I0R(21,"button",45),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2),u=t.Gew(1);return t.CGJ(s.openDrawer(u,r))}),t.wR5(22,"nb-icon",46),t.C$Y(),t.I0R(23,"button",47),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2),u=t.Gew(5);return t.CGJ(s.openDrawer(u,r))}),t.wR5(24,"nb-icon",48),t.C$Y()()()()(),t.yuY(25,ie,7,0,"div",49),t.C$Y()}if(2&n){const e=a.$implicit;t.yG2(),t.m4B("border-color",null==e?null:e.primary_color),t.yG2(4),t.E7m("icon",null==e?null:e.icon),t.yG2(3),t.oRS(" ",e.identifier," "),t.yG2(3),t.E7m("icon",null!=e.meta_data&&e.meta_data.isValid?"checkmark-outline":"close-outline"),t.yG2(2),t.E7m("icon",null!=e.meta_data&&e.meta_data.isComplete?"checkmark-outline":"close-outline"),t.yG2(),t.E7m("ngForOf",e.tree),t.yG2(2),t.E7m("ngForOf",null==e||null==e.meta_data?null:e.meta_data.scanner_inputs),t.yG2(9),t.E7m("ngIf",!1)}}function re(n,a){if(1&n&&(t.I0R(0,"nb-card-body")(1,"div",30),t.yuY(2,ae,26,9,"div",31),t.wVc(3,"async"),t.C$Y()()),2&n){const e=t.GaO();t.yG2(2),t.E7m("ngForOf",t.kDX(3,1,e.agents))}}class Q{constructor(a,e){this._id=a,this.node_details=e,this.children=[]}addChild(a){this.children.push(a)}}class dt{constructor(a){this.visited=new Set,console.log("node_lookup_table",a),this.node_lookup_table=a,this.nodeLookup={}}buildTree(a){[a].forEach(o=>{0==o?.edges?.length&&Object.keys(o.nodes).forEach(i=>{this.nodeLookup[i]=new Q(i,this.node_lookup_table[i])}),o.edges.forEach(i=>{const r=i.from,s=i.to;this.nodeLookup[r]||(this.nodeLookup[r]=new Q(i.from,this.node_lookup_table[r])),this.nodeLookup[s]||(this.nodeLookup[s]=new Q(i.to,this.node_lookup_table[s])),this.visited.has(s)?console.warn(`Cycle detected: ${r} -> ${s}`):(this.nodeLookup[r].addChild(this.nodeLookup[s]),this.visited.add(s))})});const e=[];return console.log("nodeLookup",this.nodeLookup),Object.values(this.nodeLookup).forEach(o=>{Object.values(this.nodeLookup).some(i=>i.children.includes(o))||e.push(o)}),e}_buildTree(a){[a].forEach(o=>{o.edges.forEach(i=>{console.log("edge",i);const r=i.from,s=i.to;console.log("nodeLookup",this.node_lookup_table[r]),console.log("nodeLookup",this.node_lookup_table[s]),this.nodeLookup[r]||(this.nodeLookup[r]=new Q(r,this.node_lookup_table[r])),this.nodeLookup[s]||(this.nodeLookup[s]=new Q(s,this.node_lookup_table[s])),this.nodeLookup[r].addChild(this.nodeLookup[s])})});const e=[];return Object.values(this.nodeLookup).forEach(o=>{Object.values(this.nodeLookup).some(i=>i.children.includes(o))||e.push(o)}),e}}let _t=(()=>{class n{onPageChange(e){this.goto(e)}goto(e){this.loading.next(!0),this.loadMore$.next(e)}executeAgentPipeline(e,o=[]){this.apiService.executeAgent(e,o).subscribe()}constructor(e,o){this.apiService=e,this.drawerMngr=o,this.loading=new b.g(!1),this.loading$=this.loading.asObservable(),this.loadMore$=new b.g(1),this.agents=this.loadMore$.pipe((0,I.G)(i=>(this.loading.next(!0),i<1&&(i=1),this.apiService.getAgentList({page:i}).pipe((0,w.k)(r=>r),(0,y.y)(r=>{r.map(s=>{const p=new dt(s?.nodes).buildTree(s);return console.log("tree-struct",JSON.stringify(p,null,2)),s.tree=p,s}),this.loading.next(!1)})))))}getRepoDetails(e){this.apiService.getRepoDetails(e).subscribe(console.log)}testWatchdog(e){this.apiService.testWatchdog(e).subscribe()}testSecoflex(e){console.log("testSecoflex",e)}runTool(e){this.apiService.executeAgent("67521582ec3cd4e1328cbe2a",{host:e?._id?.$oid,apk:e?._id?.$oid,code_repository:e?._id?.$oid}).subscribe(console.log)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-agent-list"]],decls:18,vars:8,consts:[["agentExecutorTemplate",""],["agentIntegrationListTemplate",""],["agentJobsTemplate",""],[3,"nbSpinner"],[1,"h6","text-basic",2,"margin-bottom","1rem"],["fxLayout","row wrap","fxLayout.lt-md","column"],["fxLayoutGap","1rem","class","_card ","fxFlex","50%","fxFlex.lt-lg","100%",3,"border-color",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayoutAlign","end center",2,"padding","0","margin","0"],[3,"paginator","onchange"],[3,"window_id","agent_id"],["theme-class","nb-theme-default",3,"window_id","agent_id"],["fxLayoutGap","1rem","fxFlex","50%","fxFlex.lt-lg","100%",1,"_card"],["fxLayoutAlign","space-between","fxLayout","row",1,"grid-item",2,"padding","0.8rem"],["fxFlex","","fxLayoutGap","0.4rem","fxLayout","column"],["fxLayoutGap","1rem","fxLayout","row"],["fxLayoutAlign","center center"],[2,"height","1.8rem",3,"src"],["fxLayout","column"],["fxLayout","row","fxFlex","",1,"text-interactive","subtitle","text-hint"],[1,"text-basic",2,"margin-left","0.2rem"],["style","margin-left: 0.5rem;",4,"ngIf"],[1,"caption-2",2,"margin-left","0.2rem"],[1,"caption-2",2,"margin-left","0.1rem"],[1,"caption","description",2,"margin-left","0.2rem"],["status","basic","nbButton","","ghost","","size","tiny",3,"click"],["nbButton","","shape","round","size","small","status","danger","nbButton","","ghost","",1,"left",3,"click"],["status","info","filled","","icon","more-vertical-outline"],[2,"margin-left","0.5rem"],["status","info","icon","checkmark-circle-2"],["fxLayout","row wrap","fxLayout.lt-md","column","fxLayout.lt-sm","column"],["fxLayout","column","class","item","fxFlex","100%",4,"ngFor","ngForOf"],["fxLayout","column","fxFlex","100%",1,"item"],[1,"grid-item"],["fxLayoutAlign","start","fxLayout","row",1,"grid-item-content"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],[3,"icon"],[1,"text-interactive","text-hint"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between",1,"text-interactive","text-hint"],["class","tree-view",4,"ngFor","ngForOf"],["fxLayout","row"],["appearance","outline","class","buildcount","size","tiny",3,"status","text",4,"ngFor","ngForOf"],["fxLayoutAlign","start end","fxLayoutGap","0.6rem","fxLayout","column"],["nbButton","","fxLayout","row"],["s","","fxLayoutAlign","center center",1,"text-interactive","caption","text-hint",3,"click"],["shape","round","size","small","status","basic","nbButton","","ghost","",1,"left",3,"click"],["status","info","filled","","icon","diagonal-arrow-right-up-outline"],["shape","round","size","small","status","danger","nbButton","","ghost","",1,"left",3,"click"],["status","danger","filled","","icon","diagonal-arrow-right-up-outline"],["fxFlex","","class","_card","style","margin-top: 0.2rem  ;  margin-bottom: 0.5rem ","fxLayoutAlign","end start","fxLayoutGap","1rem",4,"ngIf"],[1,"tree-view"],[3,"node"],["appearance","outline","size","tiny",1,"buildcount",3,"status","text"],["fxFlex","","fxLayoutAlign","end start","fxLayoutGap","1rem",1,"_card",2,"margin-top","0.2rem","margin-bottom","0.5rem"],["shape","round","size","tiny","status","danger","nbButton","","filled","",2,"text-transform","capitalize",3,"click"],["status","basics","filled","","icon","corner-left-down-outline"],["shape","round","size","tiny","status","info","nbButton","","outline","",2,"text-transform","capitalize",3,"click"],["status","info","filled","","icon","corner-left-down-outline"]],template:function(o,i){1&o&&(t.yuY(0,Vt,1,2,"ng-template",null,0,t.gJz)(2,Nt,1,2,"ng-template",null,1,t.gJz)(4,Zt,1,2,"ng-template",null,2,t.gJz),t.I0R(6,"nb-card",3),t.wVc(7,"async"),t.I0R(8,"nb-card-body"),t.SAx(9),t.I0R(10,"div",4),t.OEk(11," Agents "),t.C$Y(),t.k70(),t.I0R(12,"div",5),t.yuY(13,ee,21,10,"div",6),t.wVc(14,"async"),t.C$Y()(),t.yuY(15,re,4,3,"nb-card-body",7),t.I0R(16,"nb-card-footer",8)(17,"app-paginator",9),t.qCj("onchange",function(s){return i.onPageChange(s)}),t.C$Y()()()),2&o&&(t.yG2(6),t.E7m("nbSpinner",t.kDX(7,4,i.loading$)),t.yG2(7),t.E7m("ngForOf",t.kDX(14,6,i.agents)),t.yG2(2),t.E7m("ngIf",!1),t.yG2(2),t.E7m("paginator",i.pagination_data))},styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.item[_ngcontent-%COMP%]{background:var(--background-basic-color-2)!important;padding:1rem 1rem .5rem;margin-bottom:.5rem}nb-card[_ngcontent-%COMP%]{padding:0;margin:0;border:0}nb-card-header[_ngcontent-%COMP%]{background:var(--background-basic-color-3)!important;margin:0;padding:4px}.description[_ngcontent-%COMP%]{display:-webkit-box;line-clamp:1;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;transition:max-height .3s ease}.grid-item[_ngcontent-%COMP%]{padding:1rem;outline:0px solid transparent;box-sizing:border-box;overflow:hidden;position:relative;margin:.3rem;background:var(--background-basic-color-2)!important}.grid-item[_ngcontent-%COMP%]:hover{outline:2px solid transparent;transition:outline-color .3s;background:var(--background-basic-color-3)!important}.grid-item.selected[_ngcontent-%COMP%]{background:var(--background-basic-color-4)!important;font-weight:2500;border-color:green;border-left:8px solid}']})}}return n})();var S=_(1820);function se(n,a){if(1&n){const e=t.KQA();t.I0R(0,"app-integration-list",3),t.qCj("selection_event",function(i){const s=t.usT(e).$implicit,u=t.GaO();return t.CGJ(u.selectionEvent(null==s?null:s.window_id,i))}),t.C$Y()}if(2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("agent_id",null==e?null:e._id)("selection_mode",!0)}}function le(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function ce(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function ue(n,a){if(1&n){const e=t.KQA();t.SAx(0),t.I0R(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",24)(6,"div"),t.wR5(7,"img",25),t.C$Y(),t.I0R(8,"div",26),t.OEk(9),t.C$Y()(),t.I0R(10,"div")(11,"button",27),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,r=t.GaO(2);return t.CGJ(r.revalidateOAuth(i))}),t.I0R(12,"div"),t.OEk(13),t.C$Y(),t.wR5(14,"nb-icon",28),t.C$Y()(),t.I0R(15,"div",11)(16,"div",29)(17,"app-auto-save-formfield",30),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(null==i.data?null:i.data.refresh())}),t.C$Y()()(),t.I0R(18,"div",11)(19,"div",29)(20,"app-auto-save-formfield",31),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(null==i.data?null:i.data.refresh())}),t.C$Y()()(),t.I0R(21,"div",11)(22,"div",29)(23,"app-auto-save-formfield",32),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(null==i.data?null:i.data.refresh())}),t.C$Y()()(),t.I0R(24,"div",11)(25,"div",29)(26,"app-auto-save-formfield",33),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(null==i.data?null:i.data.refresh())}),t.C$Y()()()()()()(),t.k70()}if(2&n){const e=t.GaO().$implicit,o=t.GaO(2);t.yG2(),t.m4B("border-color",null==e?null:e.primary_color),t.yG2(6),t.E7m("src",null==e?null:e.icon,t.K6U),t.yG2(2),t.oRS(" ",null==e?null:e.scm_source," "),t.yG2(2),t.E7m("status",null!=e&&e.verified?"success":"danger"),t.yG2(2),t.oRS(" ",null!=e&&e.verified?"Verified":"Not verified"," "),t.yG2(),t.E7m("status",null!=e&&e.verified?"success":"danger"),t.yG2(3),t.E7m("showIcon",!0)("activated",!1)("updateDataFn",o.updateCredentials("host",null==e||null==e._id?null:e._id.$oid))("value",null==e?null:e.host),t.yG2(3),t.E7m("showIcon",!0)("activated",!1)("updateDataFn",o.updateCredentials("alias",null==e||null==e._id?null:e._id.$oid))("value",null==e?null:e.alias),t.yG2(3),t.E7m("showIcon",!0)("activated",!1)("updateDataFn",o.updateCredentials("username",null==e||null==e._id?null:e._id.$oid))("value",(null==e?null:e.username)||(null==e||null==e._id?null:e._id.$oid)),t.yG2(3),t.E7m("placeholder",(null==e?null:e.password)||"password")("showIcon",!0)("activated",!1)("updateDataFn",o.updateCredentials("password",null==e||null==e._id?null:e._id.$oid))}}function de(n,a){if(1&n){const e=t.KQA();t.SAx(0),t.I0R(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",24)(6,"div"),t.wR5(7,"img",25),t.C$Y(),t.I0R(8,"div",26),t.OEk(9),t.C$Y()(),t.I0R(10,"div")(11,"button",27),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,r=t.GaO(2);return t.CGJ(r.revalidateOAuth(i))}),t.I0R(12,"div"),t.OEk(13),t.C$Y(),t.wR5(14,"nb-icon",28),t.C$Y()(),t.I0R(15,"div",11)(16,"div",29)(17,"app-auto-save-formfield",31),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(null==i.data?null:i.data.refresh())}),t.C$Y()()(),t.I0R(18,"div",11)(19,"div",29)(20,"app-auto-save-formfield",34),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(null==i.data?null:i.data.refresh())}),t.C$Y()()(),t.I0R(21,"div",11)(22,"div",29)(23,"app-auto-save-formfield",35),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(null==i.data?null:i.data.refresh())}),t.C$Y()()()()()()(),t.k70()}if(2&n){const e=t.GaO().$implicit,o=t.GaO(2);t.yG2(),t.m4B("border-color",null==e?null:e.primary_color),t.yG2(6),t.E7m("src",null==e?null:e.icon,t.K6U),t.yG2(2),t.oRS(" ",null==e?null:e.scm_source," "),t.yG2(2),t.E7m("status",null!=e&&e.verified?"success":"danger"),t.yG2(2),t.oRS(" ",null!=e&&e.verified?"Verified":"Not verified"," "),t.yG2(),t.E7m("status",null!=e&&e.verified?"success":"danger"),t.yG2(3),t.E7m("showIcon",!0)("activated",!1)("updateDataFn",o.updateCredentials("alias",null==e||null==e._id?null:e._id.$oid))("value",null==e?null:e.alias),t.yG2(3),t.E7m("showIcon",!0)("activated",!1)("updateDataFn",o.updateCredentials("access_token",null==e?null:e.access_token))("value",null==e?null:e.access_token),t.yG2(3),t.E7m("showIcon",!0)("activated",!1)("value",null==e?null:e.refresh_token)("updateDataFn",o.updateCredentials("refresh_token",null==e?null:e.refresh_token))}}function _e(n,a){if(1&n&&(t.SAx(0),t.yuY(1,ue,27,23,"ng-container",19)(2,de,24,19,"ng-container",19),t.k70()),2&n){const e=a.$implicit;t.yG2(),t.E7m("ngIf","password"==(null==e?null:e.type)),t.yG2(),t.E7m("ngIf","oauth"==(null==e?null:e.type))}}function pe(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-card",5)(1,"nb-card-header")(2,"div",6)(3,"button",7),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.close())}),t.wR5(4,"nb-icon",8),t.C$Y(),t.I0R(5,"div",9)(6,"div",10),t.OEk(7," Integrations "),t.C$Y(),t.I0R(8,"div",11),t.OEk(9),t.C$Y()()()(),t.I0R(10,"nb-card-body",12)(11,"div",13),t.yuY(12,_e,3,2,"ng-container",14),t.C$Y()(),t.I0R(13,"nb-card-footer",15)(14,"button",16),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.createCredentials(i.scm))}),t.I0R(15,"div",17),t.OEk(16," Add "),t.C$Y(),t.wR5(17,"nb-icon",18),t.C$Y()()()}if(2&n){const e=a.ngIf,o=t.GaO();t.yG2(9),t.oRS(" ",null==o.agent?null:o.agent.identifier," "),t.yG2(3),t.E7m("ngForOf",e)}}let pt=(()=>{class n{createNewAuth(e){}revalidateOAuth(e){if("oauth"==e?.type){let o=this.authorize_url.replace("{state}",e?._id?.$oid);console.log("revalidateOAuth",e,o),window.location.href=o}else if("password"==e?.type){let o={};return o.auth_type=this.auth_type,this.apiService.updateScmCredentials(this.scm,e?._id?.$oid,o).subscribe()}}constructor(e,o,i){this.apiService=e,this.sidebarService=o,this.drawerMngr=i,this.createCredentials=r=>{if("oauth"==this.auth_type){let u=this.authorize_url.replace("{state}","");window.location.href=u}else"password"==this.auth_type&&this.apiService.createScmCredentials(r,{}).subscribe()},this.updateCredentials=(r,s)=>u=>{let p={};return p[r]=u,p.auth_type=this.auth_type,this.apiService.updateScmCredentials(this.scm,s,p)}}ngOnInit(){this.agent_details=this.apiService.getScmAppPassword(this.scm,{auth_type:this.auth_type}).pipe((0,w.k)(e=>e))}close(){this.sidebarService.closeById(this.window_id)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}selectionEvent(e,o){console.log("selection_event",e,o),o&&(this.selected_repository=o,this.sidebarService.closeById(e))}runTool(){this.apiService.executeAgent(this.agent_id,{host:this.selected_repository?._id?.$oid,apk:this.selected_repository?._id?.$oid,code_repository:this.selected_repository?._id?.$oid}).subscribe(console.log)}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-manage-scm-integration"]],inputs:{window_id:"window_id",authorize_url:"authorize_url",agent_id:"agent_id",scm:"scm",auth_type:"auth_type"},decls:8,vars:3,consts:[["repositoryListTemplate",""],["loadingTemplate",""],["id","create-finding","class","nb-theme-default","fxFill","",4,"ngIf"],[3,"window_id","agent_id","selection_mode","selection_event"],["fxFill","",3,"nbSpinner"],["id","create-finding","fxFill","",1,"nb-theme-default"],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],[1,"text-interactive","text-hint"],["fxFlex","","fxLayoutGap","1rem"],["fxLayout","column"],[4,"ngFor","ngForOf"],["fxLayoutAlign","end"],["status","basic","size","small","ghost","","nbButton","",3,"click"],[1,"caption-2"],["icon","plus-outline"],[4,"ngIf"],[1,"grid-item"],["fxLayoutAlign","start","fxLayout","row",1,"grid-item-content"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],["fxFlex","","fxLayout","column"],["fxLayoutGap","1rem","fxLayout","row",2,"margin-bottom","0.4rem"],[2,"height","1.2rem",3,"src"],["fxFlex","",1,"subtitle-2"],["shape","round","size","tiny","nbButton","","outline","",3,"status","click"],["icon","checkmark-outline",3,"status"],["fxFlex",""],["placeholder","Host",3,"showIcon","activated","updateDataFn","value","invalidate"],["placeholder","alias",3,"showIcon","activated","updateDataFn","value","invalidate"],["placeholder","username",3,"showIcon","activated","updateDataFn","value","invalidate"],[3,"placeholder","showIcon","activated","updateDataFn","invalidate"],["placeholder","Access Token",3,"showIcon","activated","updateDataFn","value","invalidate"],["placeholder","Refresh Token ",3,"showIcon","activated","value","updateDataFn","invalidate"]],template:function(o,i){1&o&&(t.yuY(0,se,1,3,"ng-template",null,0,t.gJz)(2,le,1,1,"ng-template",null,1,t.gJz)(4,ce,1,1,"ng-template",null,1,t.gJz)(6,pe,18,2,"nb-card",2),t.wVc(7,"async")),2&o&&(t.yG2(6),t.E7m("ngIf",t.kDX(7,1,i.agent_details)))},styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\nnb-card[_ngcontent-%COMP%]{margin:0;border-radius:0!important}nb-card-header[_ngcontent-%COMP%]{padding:0;padding-right:1rem;overflow:hidden}button[_ngcontent-%COMP%]{text-transform:capitalize!important}.grid-item[_ngcontent-%COMP%]{margin-bottom:1rem;border-color:var(--color-basic-500)!important;border-width:1px;padding:.3rem;background:var(--background-basic-color-3)}button[_ngcontent-%COMP%]{margin-left:.3rem!important;margin-bottom:.3rem!important}img[_ngcontent-%COMP%]{margin-left:.4rem!important;margin-bottom:.4rem!important}']})}}return n})();function ge(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",9),t.qCj("click",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.sync())}),t.OEk(1,"Sync"),t.C$Y()}}function me(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",10),t.qCj("click",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.validate())}),t.OEk(1,"Create"),t.C$Y()}if(2&n){const e=t.GaO(2);t.E7m("disabled",!(null!=e.data&&e.data.valid))}}function fe(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",10),t.qCj("click",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.validate())}),t.OEk(1,"Update"),t.C$Y()}if(2&n){const e=t.GaO(2);t.E7m("disabled",!(null!=e.data&&e.data.valid))}}function he(n,a){if(1&n&&(t.I0R(0,"div",6),t.yuY(1,ge,2,0,"button",7)(2,me,2,1,"button",8)(3,fe,2,1,"button",8),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("ngIf",!e.cretion_mode),t.yG2(),t.E7m("ngIf",e.cretion_mode),t.yG2(),t.E7m("ngIf",!e.cretion_mode)}}function be(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",12),t.qCj("click",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.connectoAuth())}),t.OEk(1,"Connect"),t.C$Y()}if(2&n){const e=t.GaO(2);t.E7m("disabled",!(null!=e.data&&e.data.valid))}}function ye(n,a){if(1&n&&(t.I0R(0,"div",6),t.yuY(1,be,2,1,"button",11),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("ngIf",e.cretion_mode)}}function Ce(n,a){if(1&n&&(t.I0R(0,"nb-card-body",13)(1,"div",14)(2,"div",15),t.OEk(3," Identifier "),t.C$Y(),t.I0R(4,"div",16)(5,"div",17),t.wR5(6,"img",18),t.C$Y(),t.I0R(7,"div",19)(8,"div",20),t.OEk(9),t.C$Y(),t.OEk(10," / "),t.I0R(11,"div",21)(12,"nb-form-field",22),t.wR5(13,"input",23),t.C$Y()()()()()()),2&n){const e=t.GaO();let o;t.yG2(6),t.E7m("src",null==e.data?null:e.data.get("icon").value,t.K6U),t.yG2(3),t.oRS(" ",null==e.data||null==(o=e.data.get("scm_source"))?null:o.value," ")}}function ve(n,a){1&n&&(t.I0R(0,"nb-form-field")(1,"div",15),t.OEk(2," Username "),t.C$Y(),t.wR5(3,"input",29),t.C$Y())}function xe(n,a){if(1&n&&(t.I0R(0,"nb-card-body",13),t.SAx(1),t.I0R(2,"div",14)(3,"div",15),t.OEk(4," Identifier "),t.C$Y(),t.I0R(5,"div",16)(6,"div",17),t.wR5(7,"img",18),t.C$Y(),t.I0R(8,"div",19)(9,"div",20),t.OEk(10),t.C$Y(),t.OEk(11," / "),t.I0R(12,"div",21)(13,"nb-form-field",22),t.wR5(14,"input",23),t.C$Y()()()(),t.I0R(15,"div",24)(16,"nb-form-field",25)(17,"div",15),t.OEk(18," Endpoint "),t.C$Y(),t.wR5(19,"input",26),t.C$Y()(),t.yuY(20,ve,4,0,"nb-form-field",27),t.I0R(21,"nb-form-field")(22,"div",15),t.OEk(23," Password "),t.C$Y(),t.wR5(24,"input",28),t.C$Y()(),t.k70(),t.C$Y()),2&n){const e=t.GaO();let o;t.yG2(7),t.E7m("src",null==e.data?null:e.data.get("icon").value,t.K6U),t.yG2(3),t.oRS(" ",null==e.data||null==(o=e.data.get("scm_source"))?null:o.value," "),t.yG2(10),t.E7m("ngIf",null==e.data?null:e.data.get("username")),t.yG2(4),t.E7m("placeholder",null==e.data?null:e.data.get("unchanged_password").value)}}let gt=(()=>{class n{set create_new$(e){return console.log("create_new",e),"oauth"==e?.auth_type?(this.cretion_mode=!0,this.auth_type=e?.auth_type,void(this.data=new g.WC({alias:new g.Ku("",[g.AQ.required]),icon:new g.Ku(e?.icon),scm_source:new g.Ku(e?.source),authorize_url:new g.Ku(e?.authorize_url)}))):"password"==e?.auth_type?(this.auth_type=e?.auth_type,this.data=new g.WC({alias:new g.Ku("",[g.AQ.required]),auth_type:new g.Ku(e?.auth_type),scm_source:new g.Ku(e?.source),host:new g.Ku(e?.host),icon:new g.Ku(e?.icon),unchanged_password:new g.Ku("")}),void e?.input_fields?.forEach(o=>{this.data.addControl(o?.id,new g.Ku(""))})):void 0}set data$(e){console.log("cretion_mode",e),this.cretion_mode=!1,this.auth_type=e?.type,this.data=new g.WC({id:new g.Ku(e?._id?.$oid),alias:new g.Ku(e?.alias),auth_type:new g.Ku(e?.type),scm_source:new g.Ku(e?.scm_source),host:new g.Ku(e?.host),password:new g.Ku(""),icon:new g.Ku(e?.icon),unchanged_password:new g.Ku(e?.password)}),e?.username&&this.data.addControl("username",new g.Ku(e?.username))}sync(){this.loading=!0,this.apiService.syncScmCredentialsAssets(this.data?.get("id")?.value).subscribe(e=>{this.loading=!1})}validate(){this.loading=!0;let e=this.data.value,o={};e?.username?.length&&(o.username=e?.username),e?.alias?.length&&(o.alias=e?.alias),e?.password?.length&&(o.password=e?.password),e?.auth_type?.length&&(o.auth_type=e?.auth_type),e?.host?.length&&(o.host=e?.host),e?.id?this.apiService.updateScmCredentials(e?.scm_source,e?.id,o).subscribe(i=>{this.loading=!1}):this.apiService.createScmCredentials(e?.scm_source,o).subscribe(i=>{this.loading=!1})}constructor(e){this.apiService=e,this.cretion_mode=!0,this.loading=!1}openPopup(e,o=500,i=700){return new Promise((r,s)=>{const u=window.screenX+(window.outerWidth-o)/2,p=window.screenY+(window.outerHeight-i)/2.5,x=window.open(e,"GoogleOAuth",`width=${o},height=${i},top=${p},left=${u},resizable,scrollbars`);if(!x)return s("Popup failed to open. Please check popup blocker settings.");const $=setInterval(()=>{try{x.closed&&(clearInterval($),s("Popup closed by user."));const M=x.location.href;if(M.includes("your_redirect_uri")){const k=new URL(M).searchParams,A=k.get("code"),T=k.get("error");x.close(),clearInterval($),T?s(T):A&&r(A)}}catch{}},500)})}connectoAuth(){let e=this.data?.get("authorize_url").value.replace("{state}",btoa(JSON.stringify({alias:this.data?.get("alias").value})));window.location.href=e}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-scm-create-integration"]],inputs:{create_new$:[t.Wk5.None,"create_new","create_new$"],data$:[t.Wk5.None,"data","data$"]},decls:12,vars:6,consts:[[3,"nbSpinner","formGroup"],["fxLayoutAlign","space-between center","fxLayout","row"],[1,"h6","text-basic"],["fxLayoutGap","1rem",4,"ngIf"],[1,"subtitle-2","text-hint"],["fxLayout","column",4,"ngIf"],["fxLayoutGap","1rem"],["size","small","status","info","outline","","nbButton","",3,"click",4,"ngIf"],["size","small","class","accent","nbButton","",3,"disabled","click",4,"ngIf"],["size","small","status","info","outline","","nbButton","",3,"click"],["size","small","nbButton","",1,"accent",3,"disabled","click"],["size","small","status","info","outline","","nbButton","",3,"disabled","click",4,"ngIf"],["size","small","status","info","outline","","nbButton","",3,"disabled","click"],["fxLayout","column"],["fxFlex","50%","fxFlex.lt-lg","100%","fxLayoutGap","1rem","fxLayout","column"],[1,"text-interactive","subtitle-2","text-basic",2,"margin-bottom","0.2rem"],["fxLayout","row"],["nbPrefix","","fxLayoutAlign","center center",2,"margin-right","1rem"],[2,"height","1.8rem",3,"src"],["fxLayoutAlign","start center","fxLayout","row","fxFlex","",1,"text-interactive","subtitle","text-hint"],[1,"text-basic",2,"margin-right","0.2rem"],["fxFlex","",1,"text-hint",2,"margin-left","0.2rem"],["control","","fxFlex",""],["formControlName","alias","fullWidth","","type","text","nbInput","","fieldSize","medium","placeholder","alias"],["fxFlex","50%"],["fxFlex",""],["formControlName","host","fullWidth","","type","text","nbInput","","fieldSize","medium","placeholder","Endpoint"],[4,"ngIf"],["formControlName","password","fullWidth","","type","text","nbInput","","fieldSize","medium",3,"placeholder"],["formControlName","username","fullWidth","","type","text","nbInput","","fieldSize","medium","placeholder","Username"]],template:function(o,i){1&o&&(t.I0R(0,"nb-card",0)(1,"nb-card-header",1),t.SAx(2),t.I0R(3,"div",2),t.OEk(4," Setup Integration "),t.C$Y(),t.yuY(5,he,4,3,"div",3)(6,ye,2,1,"div",3),t.k70(),t.C$Y(),t.I0R(7,"nb-card-header")(8,"div",4),t.OEk(9," Connect your SCM platform securely to enable automated repository scanning. Choose your preferred method (OAuth or App Password) for seamless integration, ensuring full control and protection of your data during the process. "),t.C$Y()(),t.yuY(10,Ce,14,2,"nb-card-body",5)(11,xe,25,4,"nb-card-body",5),t.C$Y()),2&o&&(t.E7m("nbSpinner",i.loading)("formGroup",i.data),t.yG2(5),t.E7m("ngIf","password"==i.auth_type),t.yG2(),t.E7m("ngIf","oauth"==i.auth_type),t.yG2(4),t.E7m("ngIf","oauth"==i.auth_type),t.yG2(),t.E7m("ngIf","password"==i.auth_type))},dependencies:[c.u_,l.KkC,l.iwb,l.GYx,g.ot,g.ue,g.u,g.uW,g.Wo,l.yqL,l.eAh,l.QLb,l.GAA,l.sXj,d.sZ,d.cZ,d.qG,d.CA],styles:["nb-card[_ngcontent-%COMP%]{margin:0}"]})}}return n})();const we={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function it(n){return(a={})=>{const e=a.width?String(a.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const Se={date:it({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:it({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:it({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Re={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function H(n){return(a,e)=>{let i;if("formatting"===(e?.context?String(e.context):"standalone")&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,u=e?.width?String(e.width):s;i=n.formattingValues[u]||n.formattingValues[s]}else{const s=n.defaultWidth,u=e?.width?String(e.width):n.defaultWidth;i=n.values[u]||n.values[s]}return i[n.argumentCallback?n.argumentCallback(a):a]}}function U(n){return(a,e={})=>{const o=e.width,r=a.match(o&&n.matchPatterns[o]||n.matchPatterns[n.defaultMatchWidth]);if(!r)return null;const s=r[0],u=o&&n.parsePatterns[o]||n.parsePatterns[n.defaultParseWidth],p=Array.isArray(u)?function De(n,a){for(let e=0;e<n.length;e++)if(a(n[e]))return e}(u,M=>M.test(s)):function Ye(n,a){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&a(n[e]))return e}(u,M=>M.test(s));let x;return x=n.valueCallback?n.valueCallback(p):p,x=e.valueCallback?e.valueCallback(x):x,{value:x,rest:a.slice(s.length)}}}const tn={code:"en-US",formatDistance:(n,a,e)=>{let o;const i=we[n];return o="string"==typeof i?i:1===a?i.one:i.other.replace("{{count}}",a.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+o:o+" ago":o},formatLong:Se,formatRelative:(n,a,e,o)=>Re[n],localize:{ordinalNumber:(n,a)=>{const e=Number(n),o=e%100;if(o>20||o<10)switch(o%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},era:H({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:H({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:n=>n-1}),month:H({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:H({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:H({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function qe(n){return(a,e={})=>{const o=a.match(n.matchPattern);if(!o)return null;const i=o[0],r=a.match(n.parsePattern);if(!r)return null;let s=n.valueCallback?n.valueCallback(r[0]):r[0];return s=e.valueCallback?e.valueCallback(s):s,{value:s,rest:a.slice(i.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:n=>parseInt(n,10)}),era:U({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:U({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:n=>n+1}),month:U({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:U({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:U({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let mt={};Math.pow(10,8);const X=43200,bt=Symbol.for("constructDateFrom");function yt(n,a){return"function"==typeof n?n(a):n&&"object"==typeof n&&bt in n?n[bt](a):n instanceof Date?new n.constructor(a):new Date(a)}function q(n,a){return yt(a||n,n)}function Ct(n){const a=q(n),e=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return e.setUTCFullYear(a.getFullYear()),+n-+e}function at(n,...a){const e=yt.bind(null,n||a.find(o=>"object"==typeof o));return a.map(e)}function V(n,a){const e=+q(n)-+q(a);return e<0?-1:e>0?1:e}function cn(n,a,e){const[o,i,r]=at(e?.in,n,n,a),s=V(i,r),u=Math.abs(function an(n,a,e){const[o,i]=at(e?.in,n,a);return 12*(o.getFullYear()-i.getFullYear())+(o.getMonth()-i.getMonth())}(i,r));if(u<1)return 0;1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*u);let p=V(i,r)===-s;(function ln(n,a){const e=q(n,a?.in);return+function rn(n,a){const e=q(n,a?.in);return e.setHours(23,59,59,999),e}(e,a)==+function sn(n,a){const e=q(n,a?.in),o=e.getMonth();return e.setFullYear(e.getFullYear(),o+1,0),e.setHours(23,59,59,999),e}(e,a)})(o)&&1===u&&1===V(o,r)&&(p=!1);const x=s*(u-+p);return 0===x?0:x}function pn(n,a,e){const o=function en(){return mt}(),i=e?.locale??o.locale??tn,s=V(n,a);if(isNaN(s))throw new RangeError("Invalid time value");const u=Object.assign({},e,{addSuffix:e?.addSuffix,comparison:s}),[p,x]=at(e?.in,...s>0?[a,n]:[n,a]),$=function _n(n,a,e){const o=function dn(n,a){return+q(n)-+q(a)}(n,a)/1e3;return function un(n){return a=>{const o=(n?Math[n]:Math.trunc)(a);return 0===o?0:o}}(e?.roundingMethod)(o)}(x,p),M=(Ct(x)-Ct(p))/1e3,k=Math.round(($-M)/60);let A;if(k<2)return e?.includeSeconds?$<5?i.formatDistance("lessThanXSeconds",5,u):$<10?i.formatDistance("lessThanXSeconds",10,u):$<20?i.formatDistance("lessThanXSeconds",20,u):$<40?i.formatDistance("halfAMinute",0,u):i.formatDistance($<60?"lessThanXMinutes":"xMinutes",1,u):0===k?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",k,u);if(k<45)return i.formatDistance("xMinutes",k,u);if(k<90)return i.formatDistance("aboutXHours",1,u);if(k<1440){const T=Math.round(k/60);return i.formatDistance("aboutXHours",T,u)}if(k<2520)return i.formatDistance("xDays",1,u);if(k<X){const T=Math.round(k/1440);return i.formatDistance("xDays",T,u)}if(k<2*X)return A=Math.round(k/X),i.formatDistance("aboutXMonths",A,u);if(A=cn(x,p),A<12){const T=Math.round(k/X);return i.formatDistance("xMonths",T,u)}{const T=A%12,ut=Math.trunc(A/12);return T<3?i.formatDistance("aboutXYears",ut,u):T<9?i.formatDistance("overXYears",ut,u):i.formatDistance("almostXYears",ut+1,u)}}let vt=(()=>{class n{transform(e){return pn(Date.now(),new Date(e))}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=t.UTH({name:"elpasedTime",type:n,pure:!0})}}return n})();function gn(n,a){1&n&&t.wR5(0,"app-scm-create-integration",3),2&n&&t.E7m("data",a.$implicit)}function mn(n,a){1&n&&t.wR5(0,"app-scm-create-integration",4),2&n&&t.E7m("create_new",a.$implicit)}function fn(n,a){1&n&&(t.I0R(0,"div",29),t.wR5(1,"nb-icon",30),t.C$Y())}function hn(n,a){1&n&&(t.I0R(0,"div"),t.OEk(1," App Password "),t.C$Y())}function bn(n,a){1&n&&(t.I0R(0,"div"),t.OEk(1," oAuth "),t.C$Y())}function yn(n,a){if(1&n&&(t.SAx(0),t.yuY(1,hn,2,0,"div",2)(2,bn,2,0,"div",2),t.OEk(3),t.wVc(4,"elpasedTime"),t.k70()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("ngIf","password"==(null==e?null:e.type)),t.yG2(),t.E7m("ngIf","oauth"==(null==e?null:e.type)),t.yG2(),t.oRS(" ",t.kDX(4,3,null==e||null==e.scm_update_job||null==e.scm_update_job.updated_at?null:e.scm_update_job.updated_at.$date)," ago ")}}function Cn(n,a){1&n&&(t.I0R(0,"div"),t.OEk(1," App Password "),t.C$Y())}function vn(n,a){1&n&&(t.I0R(0,"div"),t.OEk(1," oAuth "),t.C$Y())}function xn(n,a){if(1&n&&t.yuY(0,Cn,2,0,"div",2)(1,vn,2,0,"div",2),2&n){const e=t.GaO().$implicit;t.E7m("ngIf","password"==(null==e?null:e.type)),t.yG2(),t.E7m("ngIf","oauth"==(null==e?null:e.type))}}function wn(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",8),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2),u=t.Gew(1);return t.CGJ(s.openDrawer(u,r))}),t.I0R(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"div",13),t.wR5(6,"img",14),t.C$Y(),t.I0R(7,"div",15)(8,"div",16)(9,"div",17),t.OEk(10),t.C$Y(),t.OEk(11," / "),t.I0R(12,"div",18),t.OEk(13),t.C$Y(),t.yuY(14,fn,2,0,"div",19),t.C$Y(),t.I0R(15,"div",20),t.yuY(16,yn,5,5,"ng-container",21)(17,xn,2,2,"ng-template",null,22,t.gJz),t.C$Y()()(),t.I0R(19,"div",23),t.OEk(20),t.I0R(21,"span",24),t.OEk(22,"assets"),t.C$Y()(),t.I0R(23,"div",25),t.OEk(24),t.C$Y()(),t.I0R(25,"div",26)(26,"button",27),t.wR5(27,"nb-icon",28),t.C$Y()()()()()}if(2&n){const e=a.$implicit,o=t.Gew(18);t.m4B("border-color",null==e?null:e.primary_color),t.yG2(),t.m4B("outline-color",null==e?null:e.primary_color),t.yG2(5),t.E7m("src",null==e?null:e.icon,t.K6U),t.yG2(4),t.oRS(" ",null==e?null:e.scm_source," "),t.yG2(3),t.oRS(" ",null==e?null:e.alias," "),t.yG2(),t.E7m("ngIf",null==e?null:e.verified),t.yG2(2),t.E7m("ngIf",null==e||null==e.scm_update_job||null==e.scm_update_job.updated_at?null:e.scm_update_job.updated_at.$date)("ngIfElse",o),t.yG2(4),t.oRS(" ",null==e?null:e.assets_count," "),t.yG2(4),t.oRS(" ",null==e?null:e.host," "),t.yG2(3),t.m4B("color",null==e?null:e.primary_color)}}function In(n,a){if(1&n&&(t.I0R(0,"nb-card")(1,"nb-card-body"),t.SAx(2),t.I0R(3,"div",5),t.OEk(4," Active Integrations "),t.C$Y(),t.k70(),t.SAx(5),t.I0R(6,"div",6),t.yuY(7,wn,28,14,"div",7),t.C$Y(),t.k70(),t.C$Y()()),2&n){const e=a.ngIf;t.yG2(7),t.E7m("ngForOf",e)}}let kn=(()=>{class n{constructor(e,o,i,r){this.apiService=e,this.route=o,this.nbDialogService=i,this.drawerMngr=r,this.agent_details=this.apiService.getScmIntegrations()}ngOnInit(){}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(C.gV),t.GI1(l.KEA),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-scm-integration-list"]],decls:6,vars:3,consts:[["editIntegration",""],["createIntegration",""],[4,"ngIf"],[3,"data"],[3,"create_new"],[1,"h6","text-basic",2,"margin-bottom","1rem"],["fxLayout","row wrap","fxLayout.lt-md","column"],["fxLayoutGap","1rem","class","_card","fxFlex","50%","fxFlex.lt-lg","100%",3,"border-color","click",4,"ngFor","ngForOf"],["fxLayoutGap","1rem","fxFlex","50%","fxFlex.lt-lg","100%",1,"_card",3,"click"],["fxFlex","",1,"grid-item"],["fxLayoutAlign","space-between","fxLayout","row",1,"grid-item-content"],["fxFlex","","fxLayoutGap","0.4rem","fxLayout","column"],["fxLayoutGap","1rem","fxLayout","row"],["fxLayoutAlign","center center"],[2,"height","1.8rem",3,"src"],["fxLayout","column"],["fxLayout","row","fxFlex","",1,"text-interactive","subtitle","text-hint"],[1,"text-basic",2,"margin-right","0.2rem"],[1,"text-hint",2,"margin-left","0.2rem"],["style","margin-left: 0.5rem;",4,"ngIf"],[1,"subtitle-2","caption-2"],[4,"ngIf","ngIfElse"],["unknwonSyncTimeTemplate",""],[1,"caption-2","text-basic"],[1,"caption","text-basic"],[1,"subtitle-2","text-info"],["fxLayoutAlign","start start","fxLayout","row"],["size","small","nbButton","","status","basic","ghost","","shape","round"],["status","info","icon","more-vertical-outline"],[2,"margin-left","0.5rem"],["status","info","icon","checkmark-circle-2"]],template:function(o,i){1&o&&(t.yuY(0,gn,1,1,"ng-template",null,0,t.gJz)(2,mn,1,1,"ng-template",null,1,t.gJz)(4,In,8,1,"nb-card",2),t.wVc(5,"async")),2&o&&(t.yG2(4),t.E7m("ngIf",t.kDX(5,1,i.agent_details)))},dependencies:[c.ay,c.u_,l.KkC,l.iwb,l.UrE,l.sXj,d.sZ,d.cZ,d.qG,d.CA,gt,c.a,vt],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.container[_ngcontent-%COMP%]{background:var(--background-danger-color-1)}#banner[_ngcontent-%COMP%]{height:100%;max-height:100%;background-image:url(https://img.freepik.com/free-vector/abstract-flat-design-background_23-2148450082.jpg?size=626&ext=jpg&ga=GA1.1.1286474015.1708934801&semt=sph);background-size:contain;background-position:center;background-repeat:no-repeat}body[_ngcontent-%COMP%]{text-align:center;padding:24px 24px 96px;font-family:Roboto Slab,serif}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin-bottom:48px;font-weight:400}.button[_ngcontent-%COMP%]{width:auto;display:inline-block;padding:0 18px 0 6px;border:0 none;border-radius:5px;text-decoration:none;transition:all .25s linear}.button[_ngcontent-%COMP%]:hover{text-decoration:none}.button--social-login[_ngcontent-%COMP%]{margin-bottom:12px;margin-right:12px;color:#fff;height:50px;line-height:46px;position:relative;text-align:left}.button--social-login[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:12px;font-size:24px;line-height:24px;width:42px;height:24px;text-align:center;display:inline-block;position:relative;top:4px}.button--social-login[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:before{display:inline-block;width:40px}.button--social-login[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{content:""}.button--facebook[_ngcontent-%COMP%]{background-color:#4b70ab;border:1px solid #3b5988}.button--facebook[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #3b5988}.button--facebook[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #6b8bbe}.button--facebook[_ngcontent-%COMP%]:hover{background-color:#436499}.button--linkedin[_ngcontent-%COMP%]{background-color:#0087be;border:1px solid #00638b}.button--linkedin[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #00638b}.button--linkedin[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #00abf1}.button--linkedin[_ngcontent-%COMP%]:hover{background-color:#0075a5}.button--google[_ngcontent-%COMP%]{background-color:#3f85f4;border:1px solid #0f66f1}.button--google[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #0f66f1}.button--google[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #6fa4f7}.button--google[_ngcontent-%COMP%]:hover{background-color:#2776f3}.button--twitter[_ngcontent-%COMP%]{background-color:#3b94d9;border:1px solid #257abc}.button--twitter[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #257abc}.button--twitter[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #66abe1}.button--twitter[_ngcontent-%COMP%]:hover{background-color:#2988d2}.button--yahoo[_ngcontent-%COMP%]{background-color:#500095;border:1px solid #350062}.button--yahoo[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #350062}.button--yahoo[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #6b00c8}.button--yahoo[_ngcontent-%COMP%]:hover{background-color:#42007c}.button--openid[_ngcontent-%COMP%]{background-color:#f78c40;border:1px solid #f56f0f}.button--openid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #f56f0f}.button--openid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #f9a971}.button--openid[_ngcontent-%COMP%]:hover{background-color:#f67d28}.button--googleplus[_ngcontent-%COMP%]{background-color:#dd4b39;border:1px solid #c23321}.button--googleplus[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #c23321}.button--googleplus[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #e47365}.button--googleplus[_ngcontent-%COMP%]:hover{background-color:#d73925}.button--dropbox[_ngcontent-%COMP%]{background-color:#007de1;border:1px solid #0061ae}.button--dropbox[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #0061ae}.button--dropbox[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #1597ff}.button--dropbox[_ngcontent-%COMP%]:hover{background-color:#006fc8}.button--github[_ngcontent-%COMP%]{background-color:#333;border:1px solid #1a1a1a}.button--github[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #1a1a1a}.button--github[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #4d4d4d}.button--github[_ngcontent-%COMP%]:hover{background-color:#262626}.button--bitbucket[_ngcontent-%COMP%]{background-color:#205081;border:1px solid #163758}.button--bitbucket[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #163758}.button--bitbucket[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #2a69aa}.button--bitbucket[_ngcontent-%COMP%]:hover{background-color:#1b436d}.button--soundcloud[_ngcontent-%COMP%]{background-color:#f50;border:1px solid #cc4400}.button--soundcloud[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #cc4400}.button--soundcloud[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #ff7733}.button--soundcloud[_ngcontent-%COMP%]:hover{background-color:#e64d00}.button--spotify[_ngcontent-%COMP%]{background-color:#2ebd59;border:1px solid #249446}.button--spotify[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #249446}.button--spotify[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #4bd374}.button--spotify[_ngcontent-%COMP%]:hover{background-color:#29a84f}.button--microsoft[_ngcontent-%COMP%]{background-color:#00a4ef;border:1px solid #0081bc}.button--microsoft[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #0081bc}.button--microsoft[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #23baff}.button--microsoft[_ngcontent-%COMP%]:hover{background-color:#0093d6}.button--flickr[_ngcontent-%COMP%]{background-color:#ff0084;border:1px solid #cc006a}.button--flickr[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #cc006a}.button--flickr[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #ff339d}.button--flickr[_ngcontent-%COMP%]:hover{background-color:#e60077}.grid-item[_ngcontent-%COMP%]{padding:1rem;outline:0px solid transparent;box-sizing:border-box;overflow:hidden;position:relative;margin:.3rem;background:var(--background-basic-color-2)!important}.grid-item[_ngcontent-%COMP%]:hover{outline:2px solid transparent;transition:outline-color .3s;background:var(--background-basic-color-3)!important}.grid-item.selected[_ngcontent-%COMP%]{background:var(--background-basic-color-4)!important;font-weight:2500;border-color:green;border-left:8px solid}']})}}return n})();var B=_(3504);let On=(()=>{class n{set oAuthCallbackData$(e){let o=JSON.parse(atob(e?.state));this.data=this.apiService.createScmCredentials(e?.source,{auth_type:"oauth",scm_source:e?.source,alias:o?.alias,code:e?.code}).pipe((0,y.y)(i=>{1==i?.status?(this.toast.success("Successfully linked!","Integration",{position:l.e0H.BOTTOM_RIGHT}),this.drawer.closeById(e?.window_id),this.removeQueryParams()):(this.toast.danger("Invalid credentials!","Integration",{position:l.e0H.BOTTOM_RIGHT}),this.drawer.closeById(e?.window_id),this.removeQueryParams())}))}removeQueryParams(){const o=this.location.path(!0).split("?")[0];this.location.replaceState(o)}constructor(e,o,i,r,s){this.location=e,this.router=o,this.toast=i,this.drawer=r,this.apiService=s}ngOnInit(){this.data.subscribe()}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(c.oB),t.GI1(C.E5),t.GI1(l.eIs),t.GI1(S.S),t.GI1(h.Ww))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-scm-oauth-link"]],inputs:{oAuthCallbackData$:[t.Wk5.None,"oauth_callback_data","oAuthCallbackData$"]},decls:1,vars:0,template:function(o,i){1&o&&t.wR5(0,"app-loading-card")},dependencies:[B.Q]})}}return n})();const Gn=["createIntegration"],Sn=["loadingTemplate"];function Rn(n,a){1&n&&t.wR5(0,"app-scm-create-integration",5),2&n&&t.E7m("create_new",a.$implicit)}function Ln(n,a){1&n&&t.wR5(0,"app-scm-oauth-link",6),2&n&&t.E7m("oauth_callback_data",a.$implicit)}function En(n,a){if(1&n){const e=t.KQA();t.SAx(0),t.I0R(1,"div",10)(2,"app-auto-save-formfield",13),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(2).$implicit;return t.CGJ(null==i?null:i.refresh())}),t.C$Y()(),t.k70()}if(2&n){const e=a.$implicit,o=t.GaO().ngIf;t.yG2(2),t.E7m("placeholder",null==e?null:e.placeholder)("showIcon",!1)("activated",!0)("updateDataFn",e.updateFn)("value",o[null==e?null:e.id])}}function $n(n,a){if(1&n&&(t.SAx(0),t.I0R(1,"nb-card",8)(2,"nb-card-body",9)(3,"div",10)(4,"div",11),t.OEk(5," Manage Integration "),t.C$Y()(),t.yuY(6,En,3,5,"ng-container",12),t.C$Y()(),t.k70()),2&n){const e=a.ngIf,o=t.GaO().$implicit,i=t.GaO();t.yG2(),t.E7m("accent",null!=e&&e.verified?"success":"")("nbSpinner",i.dialogLoading),t.yG2(5),t.E7m("ngForOf",null==o?null:o.input_fields)}}function Tn(n,a){if(1&n&&(t.yuY(0,$n,7,3,"ng-container",7),t.wVc(1,"async")),2&n){const e=a.$implicit;t.E7m("ngIf",t.kDX(1,1,null==e?null:e.getCredentials))}}function Mn(n,a){if(1&n&&t.wR5(0,"app-manage-scm-integration",14),2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("auth_type",null==e?null:e.auth_type)("authorize_url",null==e?null:e.authorize_url)("scm",null==e?null:e.id)}}function An(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",20),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2),u=t.Gew(1);return t.CGJ(s.openDrawer(u,r))}),t.I0R(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24)(5,"div"),t.wR5(6,"img",25),t.C$Y(),t.I0R(7,"div",26)(8,"div",27),t.OEk(9),t.C$Y(),t.I0R(10,"div",28),t.OEk(11),t.C$Y()()(),t.I0R(12,"div",29)(13,"div",28),t.OEk(14),t.C$Y()()(),t.I0R(15,"div",30)(16,"button",31),t.wR5(17,"nb-icon",32),t.C$Y()()()()()}if(2&n){const e=a.$implicit;t.m4B("border-color",null==e?null:e.primary_color),t.yG2(),t.m4B("outline-color",null==e?null:e.primary_color),t.yG2(5),t.E7m("src",null==e?null:e.icon,t.K6U),t.yG2(3),t.oRS(" ",null==e?null:e.alias," "),t.yG2(2),t.oRS(" ",null==e?null:e.caption," "),t.yG2(3),t.oRS(" ",null==e?null:e.description," "),t.yG2(3),t.m4B("color",null==e?null:e.primary_color)}}function Pn(n,a){if(1&n&&(t.SAx(0),t.I0R(1,"nb-card")(2,"nb-card-body"),t.SAx(3),t.I0R(4,"div",15),t.OEk(5," Add Integrations "),t.C$Y(),t.k70(),t.SAx(6),t.I0R(7,"div",16),t.yuY(8,An,18,10,"div",17),t.C$Y(),t.k70(),t.C$Y()(),t.I0R(9,"div",18)(10,"div",19),t.OEk(11," View All "),t.C$Y()(),t.wR5(12,"app-scm-integration-list"),t.k70()),2&n){const e=a.ngIf;t.yG2(8),t.E7m("ngForOf",e)}}let xt=(()=>{class n{constructor(e,o,i,r){this.apiService=e,this.route=o,this.nbDialogService=i,this.drawerMngr=r,this.integrations=this.apiService.getScmIntegrationList()}ngAfterViewInit(){this.route.queryParamMap.pipe((0,Bt.U)(1),(0,jt.I)(e=>"validate_oauth"==e.get("action")),(0,w.k)(e=>({code:e.get("code"),source:e.get("scmSource"),state:e.get("state")}))).subscribe(e=>{console.log("stateData",e),this.openDrawer(this.loadingTemplate,e)})}ngOnInit(){}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}goToIntegrate(e,o){e?.input_fields?.length<=0?window.location.href=e?.authorize_url:this.openDialog(o,{id:e?.id,input_fields:e?.input_fields})}openDialog(e,o){let i=new b.g(!0),r=i.asObservable(),s=o?.id;o?.input_fields?.map(u=>(u.updateFn=p=>{let x={};return x[u?.id]=p,this.apiService.updateScmCredentials(s,x)},u)),console.log("data__",o),o.refresh=()=>{console.log("refresh"),i.next(!0)},o.getCredentials=r.pipe((0,I.G)(u=>this.apiService.getScmAppPassword(o?.id))),o.updateUsernameFn=u=>this.apiService.updateScmCredentials(o?.id,{username:u}),o.updatePasswordFn=u=>this.apiService.updateScmCredentials(o?.id,{password:u}),this.dialogRef?.close(),this.dialogRef=this.open(e,o)}open(e,o){return this.nbDialogService.open(e,{context:o})}refresh(){}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(C.gV),t.GI1(l.KEA),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-integration-landing-page"]],viewQuery:function(o,i){if(1&o&&(t.CC$(Gn,5),t.CC$(Sn,5)),2&o){let r;t.wto(r=t.Gqi())&&(i.createIntegration=r.first),t.wto(r=t.Gqi())&&(i.loadingTemplate=r.first)}},decls:10,vars:4,consts:[["createIntegration",""],["loadingTemplate",""],["manageIntegration",""],["manageScmIntegrationTemplate",""],[4,"ngIf","ngIfElse"],[3,"create_new"],[3,"oauth_callback_data"],[4,"ngIf"],[3,"accent","nbSpinner"],["fxLayoutGap","1rem","fxLayout","column",2,"padding","1rem"],["fxFlex",""],[1,"h6",2,"font-weight","800"],[4,"ngFor","ngForOf"],[3,"placeholder","showIcon","activated","updateDataFn","value","invalidate"],[3,"window_id","auth_type","authorize_url","scm"],[1,"h6","text-basic",2,"margin-bottom","1rem"],["fxLayout","row wrap","fxLayout.lt-md","column"],["fxLayoutGap","1rem","class","_card","fxFlex.gt-md","50%","fxFlex.gt-sm","50%","fxFlex","100%",3,"border-color","click",4,"ngFor","ngForOf"],["fxLayoutAlign","end"],[1,"subtitle","text-info"],["fxLayoutGap","1rem","fxFlex.gt-md","50%","fxFlex.gt-sm","50%","fxFlex","100%",1,"_card",3,"click"],["fxFlex","",1,"grid-item"],["fxLayoutAlign","space-between","fxLayout","row",1,"grid-item-content"],["fxFlex","","fxLayoutGap","1rem","fxLayout","column"],["fxLayoutGap","1rem","fxLayout","row"],[2,"height","1.8rem",3,"src"],["fxLayoutAlign","center center","fxFlex","",1,"text-interactive","subtitle","text-hint"],["fxFlex","",1,"text-basic"],[1,"caption","text-hint"],["fxFlex","","fxLayoutAlign","start"],["fxLayout","column"],["shape","round","size","small","status","basic","nbButton","","ghost","",1,"left"],["status","info","filled","","icon","diagonal-arrow-right-up-outline"]],template:function(o,i){if(1&o&&(t.yuY(0,Rn,1,1,"ng-template",null,0,t.gJz)(2,Ln,1,1,"ng-template",null,1,t.gJz)(4,Tn,2,3,"ng-template",null,2,t.gJz)(6,Mn,1,4,"ng-template",null,3,t.gJz)(8,Pn,13,1,"ng-container",4),t.wVc(9,"async")),2&o){const r=t.Gew(3);t.yG2(8),t.E7m("ngIf",t.kDX(9,2,i.integrations))("ngIfElse",r)}},dependencies:[c.ay,c.u_,l.KkC,l.iwb,l.UrE,l.yqL,l.sXj,d.sZ,d.cZ,d.qG,d.CA,ot,pt,kn,gt,On,c.a],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.container[_ngcontent-%COMP%]{background:var(--background-danger-color-1)}#banner[_ngcontent-%COMP%]{height:100%;max-height:100%;background-image:url(https://img.freepik.com/free-vector/abstract-flat-design-background_23-2148450082.jpg?size=626&ext=jpg&ga=GA1.1.1286474015.1708934801&semt=sph);background-size:contain;background-position:center;background-repeat:no-repeat}body[_ngcontent-%COMP%]{text-align:center;padding:24px 24px 96px;font-family:Roboto Slab,serif}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin-bottom:48px;font-weight:400}.button[_ngcontent-%COMP%]{width:auto;display:inline-block;padding:0 18px 0 6px;border:0 none;border-radius:5px;text-decoration:none;transition:all .25s linear}.button[_ngcontent-%COMP%]:hover{text-decoration:none}.button--social-login[_ngcontent-%COMP%]{margin-bottom:12px;margin-right:12px;color:#fff;height:50px;line-height:46px;position:relative;text-align:left}.button--social-login[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:12px;font-size:24px;line-height:24px;width:42px;height:24px;text-align:center;display:inline-block;position:relative;top:4px}.button--social-login[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:before{display:inline-block;width:40px}.button--social-login[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{content:""}.button--facebook[_ngcontent-%COMP%]{background-color:#4b70ab;border:1px solid #3b5988}.button--facebook[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #3b5988}.button--facebook[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #6b8bbe}.button--facebook[_ngcontent-%COMP%]:hover{background-color:#436499}.button--linkedin[_ngcontent-%COMP%]{background-color:#0087be;border:1px solid #00638b}.button--linkedin[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #00638b}.button--linkedin[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #00abf1}.button--linkedin[_ngcontent-%COMP%]:hover{background-color:#0075a5}.button--google[_ngcontent-%COMP%]{background-color:#3f85f4;border:1px solid #0f66f1}.button--google[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #0f66f1}.button--google[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #6fa4f7}.button--google[_ngcontent-%COMP%]:hover{background-color:#2776f3}.button--twitter[_ngcontent-%COMP%]{background-color:#3b94d9;border:1px solid #257abc}.button--twitter[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #257abc}.button--twitter[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #66abe1}.button--twitter[_ngcontent-%COMP%]:hover{background-color:#2988d2}.button--yahoo[_ngcontent-%COMP%]{background-color:#500095;border:1px solid #350062}.button--yahoo[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #350062}.button--yahoo[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #6b00c8}.button--yahoo[_ngcontent-%COMP%]:hover{background-color:#42007c}.button--openid[_ngcontent-%COMP%]{background-color:#f78c40;border:1px solid #f56f0f}.button--openid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #f56f0f}.button--openid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #f9a971}.button--openid[_ngcontent-%COMP%]:hover{background-color:#f67d28}.button--googleplus[_ngcontent-%COMP%]{background-color:#dd4b39;border:1px solid #c23321}.button--googleplus[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #c23321}.button--googleplus[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #e47365}.button--googleplus[_ngcontent-%COMP%]:hover{background-color:#d73925}.button--dropbox[_ngcontent-%COMP%]{background-color:#007de1;border:1px solid #0061ae}.button--dropbox[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #0061ae}.button--dropbox[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #1597ff}.button--dropbox[_ngcontent-%COMP%]:hover{background-color:#006fc8}.button--github[_ngcontent-%COMP%]{background-color:#333;border:1px solid #1a1a1a}.button--github[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #1a1a1a}.button--github[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #4d4d4d}.button--github[_ngcontent-%COMP%]:hover{background-color:#262626}.button--bitbucket[_ngcontent-%COMP%]{background-color:#205081;border:1px solid #163758}.button--bitbucket[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #163758}.button--bitbucket[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #2a69aa}.button--bitbucket[_ngcontent-%COMP%]:hover{background-color:#1b436d}.button--soundcloud[_ngcontent-%COMP%]{background-color:#f50;border:1px solid #cc4400}.button--soundcloud[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #cc4400}.button--soundcloud[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #ff7733}.button--soundcloud[_ngcontent-%COMP%]:hover{background-color:#e64d00}.button--spotify[_ngcontent-%COMP%]{background-color:#2ebd59;border:1px solid #249446}.button--spotify[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #249446}.button--spotify[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #4bd374}.button--spotify[_ngcontent-%COMP%]:hover{background-color:#29a84f}.button--microsoft[_ngcontent-%COMP%]{background-color:#00a4ef;border:1px solid #0081bc}.button--microsoft[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #0081bc}.button--microsoft[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #23baff}.button--microsoft[_ngcontent-%COMP%]:hover{background-color:#0093d6}.button--flickr[_ngcontent-%COMP%]{background-color:#ff0084;border:1px solid #cc006a}.button--flickr[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-right:1px solid #cc006a}.button--flickr[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:after{border-right:1px solid #ff339d}.button--flickr[_ngcontent-%COMP%]:hover{background-color:#e60077}.grid-item[_ngcontent-%COMP%]{padding:1rem;outline:0px solid transparent;box-sizing:border-box;overflow:hidden;position:relative;margin:.3rem;background:var(--background-basic-color-2)!important}.grid-item[_ngcontent-%COMP%]:hover{outline:2px solid transparent;transition:outline-color .3s;background:var(--background-basic-color-3)!important}.grid-item.selected[_ngcontent-%COMP%]{background:var(--background-basic-color-4)!important;font-weight:2500;border-color:green;border-left:8px solid}']})}}return n})();var j=_(6744);function Fn(n,a){if(1&n){const e=t.KQA();t.I0R(0,"app-integration-list",3),t.qCj("selection_event",function(i){const s=t.usT(e).$implicit,u=t.GaO();return t.CGJ(u.selectionEvent(null==s?null:s.window_id,i))}),t.C$Y()}2&n&&t.E7m("selection_mode",!0)}function Yn(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function Dn(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function qn(n,a){if(1&n){const e=t.KQA();t.SAx(0)(1),t.I0R(2,"div",15),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2);return t.CGJ(s.selectBranch(null==r?null:r.name))}),t.OEk(3),t.I0R(4,"div",16)(5,"div",17)(6,"div"),t.wR5(7,"img",18),t.C$Y(),t.I0R(8,"div",13)(9,"div",11),t.OEk(10),t.C$Y(),t.I0R(11,"div",19),t.OEk(12),t.C$Y()()()()(),t.k70()()}if(2&n){const e=a.$implicit,o=t.GaO().ngIf;t.yG2(2),t.m4B("border-color",null==o?null:o.primary_color),t.yG2(),t.oRS(" ",null==e?null:e.name," "),t.yG2(4),t.E7m("src",null==o?null:o.icon,t.K6U),t.yG2(3),t.oRS(" ",null==o?null:o.identifier," "),t.yG2(2),t.oRS(" ",null==o?null:o.exec_status," ")}}function Jn(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-card",5)(1,"nb-card-header")(2,"div",6)(3,"button",7),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.close())}),t.wR5(4,"nb-icon",8),t.C$Y(),t.I0R(5,"div",9)(6,"div",10),t.OEk(7," Repository Branches "),t.C$Y(),t.I0R(8,"div",11),t.OEk(9),t.C$Y()()()(),t.I0R(10,"nb-card-body",12)(11,"div",13),t.yuY(12,qn,13,6,"ng-container",14),t.C$Y()()()}if(2&n){const e=a.ngIf;t.yG2(9),t.oRS(" ",null==e?null:e.identifier," "),t.yG2(3),t.E7m("ngForOf",null==e?null:e.scm_branchhes)}}let K=(()=>{class n{constructor(e,o,i){this.apiService=e,this.sidebarService=o,this.drawerMngr=i}ngOnInit(){this.repository_details=this.apiService.getRepoBranchesDetails(this.repository_id)}close(){this.sidebarService.closeById(this.window_id)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}selectionEvent(e,o){console.log("selection_event",e,o),o&&(this.selected_repository=o,this.sidebarService.closeById(e))}selectBranch(e){this.apiService.setRepoBranchesDetails(this.repository_id,e).subscribe(()=>{this.close()})}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-repository-branch-selector-chooser"]],inputs:{window_id:"window_id",repository_id:"repository_id"},decls:8,vars:3,consts:[["repositoryListTemplate",""],["loadingTemplate",""],["id","create-finding","class","nb-theme-default","fxFill","",4,"ngIf"],[3,"selection_mode","selection_event"],["fxFill","",3,"nbSpinner"],["id","create-finding","fxFill","",1,"nb-theme-default"],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],[1,"text-interactive","text-hint"],["fxFlex","","fxLayoutGap","1rem"],["fxLayout","column"],[4,"ngFor","ngForOf"],[1,"grid-item",3,"click"],["fxLayoutAlign","start","fxLayout","row",1,"grid-item-content"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],[2,"height","1.2rem",3,"src"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between",1,"text-interactive","text-hint"]],template:function(o,i){1&o&&(t.yuY(0,Fn,1,1,"ng-template",null,0,t.gJz)(2,Yn,1,1,"ng-template",null,1,t.gJz)(4,Dn,1,1,"ng-template",null,1,t.gJz)(6,Jn,13,2,"nb-card",2),t.wVc(7,"async")),2&o&&(t.yG2(6),t.E7m("ngIf",t.kDX(7,1,i.repository_details)))},styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\nnb-card[_ngcontent-%COMP%]{margin:0;border-radius:0!important}nb-card-header[_ngcontent-%COMP%]{padding:0;padding-right:1rem;overflow:hidden}button[_ngcontent-%COMP%]{text-transform:capitalize!important}']})}}return n})();function zn(n,a){if(1&n&&t.wR5(0,"app-repository-branch-selector-chooser",4),2&n){const e=a.$implicit,o=t.GaO();t.E7m("window_id",null==e?null:e.window_id)("repository_id",o.repository_id)}}function Bn(n,a){1&n&&t.wR5(0,"nb-card",5),2&n&&t.E7m("nbSpinner",!0)}function jn(n,a){1&n&&t.wR5(0,"nb-card",5),2&n&&t.E7m("nbSpinner",!0)}function Wn(n,a){1&n&&t.wR5(0,"app-loading-card")}function Kn(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",16),t.qCj("click",function(){t.usT(e);const i=t.GaO(2),r=t.Gew(1);return t.CGJ(i.openDrawer(r,i.agent))}),t.I0R(1,"nb-form-field"),t.wR5(2,"nb-icon",17)(3,"input",23),t.C$Y()()}if(2&n){const e=t.GaO(2);t.yG2(3),t.E7m("readonly",e.readonly)("placeholder","No repository selected")}}function Qn(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-card",6)(1,"nb-card-header")(2,"div",7)(3,"button",8),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.close())}),t.wR5(4,"nb-icon",9),t.C$Y(),t.I0R(5,"div",10),t.wR5(6,"div",11),t.I0R(7,"div",12),t.OEk(8),t.C$Y()()()(),t.I0R(9,"nb-card-body",13)(10,"div",14)(11,"div",13)(12,"div",15),t.OEk(13," Repository Branch "),t.C$Y(),t.I0R(14,"div",16),t.qCj("click",function(){t.usT(e);const i=t.GaO(),r=t.Gew(1);return t.CGJ(i.openDrawer(r,i.agent))}),t.I0R(15,"nb-form-field"),t.wR5(16,"nb-icon",17)(17,"input",18),t.C$Y()(),t.yuY(18,Kn,4,2,"ng-template",null,19,t.gJz),t.C$Y()()(),t.I0R(20,"nb-card-footer",20)(21,"button",21),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.runTool())}),t.OEk(22," Trigger "),t.wR5(23,"nb-icon",22),t.C$Y()()()}if(2&n){const e=a.ngIf,o=t.GaO();t.yG2(8),t.oRS(" ",e.title," "),t.yG2(9),t.E7m("value",null==e?null:e.scm_selected_branch)("readonly",!0),t.yG2(4),t.E7m("disabled",!o.selected_repository)}}let wt=(()=>{class n{constructor(e,o,i){this.apiService=e,this.sidebarService=o,this.drawerMngr=i}ngOnInit(){this.repository_details=this.apiService.getRepoDetails(this.repository_id)}close(){this.sidebarService.closeById(this.window_id)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}selectionEvent(e,o){console.log("selection_event",e,o),o&&(this.selected_repository=o,this.sidebarService.closeById(e))}runTool(){this.apiService.executeAgent(this.repository_id,{host:this.selected_repository?._id?.$oid,apk:this.selected_repository?._id?.$oid,code_repository:this.selected_repository?._id?.$oid}).subscribe(console.log)}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-repository-branch-selector"]],inputs:{window_id:"window_id",repository_id:"repository_id"},decls:10,vars:4,consts:[["repositoryListTemplate",""],["loadingTemplate",""],["loadingCard",""],["id","create-finding","class","nb-theme-default","fxFill","",4,"ngIf","ngIfElse"],[3,"window_id","repository_id"],["fxFill","",3,"nbSpinner"],["id","create-finding","fxFill","",1,"nb-theme-default"],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],[1,"text-interactive","text-hint"],["fxFlex","","fxLayoutGap","1rem","fxLayout","column"],["fxLayout","row"],[1,"label"],[3,"click"],["nbPrefix","","icon","search-outline","pack","eva"],["fullWidth","","placeholder","Select Repository","type","text","nbInput","",3,"value","readonly"],["noRepositorySelectedTemplate",""],["fxLayoutAlign","end"],["status","basic","size","small","ghost","","nbButton","",3,"disabled","click"],["icon","chevron-right-outline"],["fullWidth","","type","text","nbInput","",3,"readonly","placeholder"]],template:function(o,i){if(1&o&&(t.yuY(0,zn,1,2,"ng-template",null,0,t.gJz)(2,Bn,1,1,"ng-template",null,1,t.gJz)(4,jn,1,1,"ng-template",null,1,t.gJz)(6,Wn,1,0,"ng-template",null,2,t.gJz)(8,Qn,24,4,"nb-card",3),t.wVc(9,"async")),2&o){const r=t.Gew(7);t.yG2(8),t.E7m("ngIf",t.kDX(9,2,i.repository_details))("ngIfElse",r)}},dependencies:[c.u_,l.KkC,l.iwb,l.q_v,l.GYx,l.UrE,l.yqL,l.eAh,l.QLb,l.GAA,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,B.Q,K,c.a],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\nnb-card[_ngcontent-%COMP%]{margin:0;border-radius:0!important}nb-card-header[_ngcontent-%COMP%]{padding:0;padding-right:1rem;overflow:hidden}button[_ngcontent-%COMP%]{text-transform:capitalize!important}']})}}return n})();function Hn(n,a){if(1&n&&t.wR5(0,"app-repository-branch-selector",10),2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("repository_id",null==e||null==e._id?null:e._id.$oid)}}function Un(n,a){if(1&n&&t.wR5(0,"app-repository-branch-selector-chooser",11),2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("agent_id",null==e?null:e._id)}}function Xn(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",27),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,r=t.GaO();return t.CGJ(r.select(i))}),t.wR5(1,"nb-icon",25),t.C$Y()}}function Vn(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",28),t.qCj("click",function(i){t.usT(e);const r=t.GaO().$implicit,s=t.GaO();return i.stopPropagation(),i.preventDefault(),t.CGJ(s.downloadFile(null==s.engagement?null:s.engagement.id,null==r||null==r._id?null:r._id.$oid))}),t.I0R(1,"div",29)(2,"div"),t.OEk(3),t.C$Y(),t.I0R(4,"div")(5,"button",30),t.wR5(6,"nb-icon",31),t.C$Y()()()()}if(2&n){const e=a.$implicit;t.yG2(3),t.oRS(" ",null==e?null:e.filename," ")}}function Nn(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",32)(1,"button",33),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,r=t.GaO();return t.CGJ(r.testSecoflex(i))}),t.wR5(2,"nb-icon",34),t.OEk(3," Test "),t.C$Y(),t.I0R(4,"button",35),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,r=t.GaO();return t.CGJ(r.testWatchdog(i))}),t.wR5(5,"nb-icon",36),t.OEk(6," Secoflex "),t.C$Y()()}}function Zn(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",12)(1,"div",13)(2,"div",14),t.yuY(3,Xn,2,0,"button",15),t.I0R(4,"div",16)(5,"div"),t.wR5(6,"img",17),t.C$Y(),t.I0R(7,"div",18)(8,"div",19),t.OEk(9),t.C$Y(),t.I0R(10,"div",20),t.OEk(11),t.C$Y(),t.yuY(12,Vn,7,1,"div",21),t.C$Y()(),t.I0R(13,"div",22)(14,"button",23),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(),u=t.Gew(1);return t.CGJ(s.openDrawer(u,r))}),t.I0R(15,"div",24),t.OEk(16),t.C$Y(),t.wR5(17,"nb-icon",25),t.C$Y()()()(),t.yuY(18,Nn,7,0,"div",26),t.C$Y()}if(2&n){const e=a.$implicit,o=t.GaO();t.yG2(),t.m4B("border-color",null==e?null:e.primary_color),t.yG2(2),t.E7m("ngIf",o.selection_mode),t.yG2(3),t.E7m("src",null==e?null:e.icon,t.K6U),t.yG2(3),t.oRS(" ",null==e?null:e.endpoints," "),t.yG2(2),t.oRS(" ",null==e?null:e.environment," "),t.yG2(),t.E7m("ngForOf",null==e?null:e.files),t.yG2(4),t.oRS(" ",null==e?null:e.scm_selected_branch," "),t.yG2(2),t.E7m("ngIf",!1)}}let to=(()=>{class n{select(e){this.selection_event.next(e)}onPageChange(e){this.goto(e)}goto(e){this.loading=!0,this.loadMore$.next({...this.loadMore$.value,page_number:e})}searchRepo(e){this.loading=!0,this.loadMore$.next({search_string:e,page_number:1})}constructor(e,o){this.apiService=e,this.drawerMngr=o,this.selection_mode=!1,this.selection_event=new t._w7,this.loading=!1,this.loadMore$=new b.g({page_number:1,search_string:""}),this.webapps=this.loadMore$.pipe((0,I.G)(i=>(this.loading=!0,i.page_number<1&&(i.page_number=1),this.apiService.getWebappsIntegrations({page_number:i.page_number,query:i.search_string}).pipe((0,w.k)(r=>(this.pagination_data=r.pagination,r?.data)),(0,y.y)(r=>{this.loading=!1}))))),this.searchInput=new g.Ku(""),this.searching=!1,this.threshHoldDelay=600}ngOnInit(){this.searchInput.valueChanges.pipe((0,Y.o)(this.threshHoldDelay),(0,D.a)(),(0,R.W)(this.searchInput.value),(0,y.y)(e=>{this.searching=!0})).subscribe(e=>{this.searchRepo(e)})}runTool(e){this.apiService.executeAgent("67521582ec3cd4e1328cbe2a",{host:e?._id?.$oid,apk:e?._id?.$oid,code_repository:e?._id?.$oid}).subscribe(console.log)}getRepoDetails(e){this.apiService.getRepoBranchesDetails(e).subscribe(console.log)}testWatchdog(e){this.apiService.testWatchdog(e).subscribe()}testSecoflex(e){console.log("testSecoflex",e)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-integration-webapp-list"]],inputs:{selection_mode:"selection_mode"},outputs:{selection_event:"selection_event"},decls:15,vars:6,consts:[["branchSelectorTemplate",""],["branchSelectorListTemplate",""],["fxFill","",3,"nbSpinner"],["fxFlex",""],["nbSuffix","","icon","search-outline","pack","eva"],["placeholder","Search","nbInput","","status","basic","type","text","fullWidth","",3,"formControl"],["fxLayout","row wrap","fxLayout.lt-md","column","fxLayout.lt-sm","column"],["fxLayout","column","class","item","fxFlex","100%",4,"ngFor","ngForOf"],["fxLayoutAlign","end center",2,"padding","0","margin","0"],[3,"paginator","onchange"],[3,"window_id","repository_id"],[3,"window_id","agent_id"],["fxLayout","column","fxFlex","100%",1,"item"],[1,"grid-item"],["fxLayoutAlign","start","fxLayout","row",1,"grid-item-content"],["shape","round","size","small","class","left","status","basic","nbButton","","ghost","",3,"click",4,"ngIf"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],[2,"height","1.2rem",3,"src"],["fxLayout","column"],[1,"text-interactive","text-hint"],["fxLayoutAlign","start center",1,"text-interactive","text-hint","caption-2"],["nbButton","","fxLayoutAlign","start start","class","text-hint",3,"click",4,"ngFor","ngForOf"],["fxLayoutAlign","start end","fxLayoutGap","0.6rem","fxLayout","column"],["shape","round","shape","round","size","tiny","status","basic","nbButton","","ghost","",1,"left",3,"click"],["fxLayoutAlign","center center",1,"text-interactive","caption","text-hint",2,"text-transform","none !important"],["status","info","filled","","icon","diagonal-arrow-right-up-outline"],["fxFlex","","class","_card","style","margin-top: 0.2rem  ;  margin-bottom: 0.5rem ","fxLayoutAlign","end start","fxLayoutGap","1rem",4,"ngIf"],["shape","round","size","small","status","basic","nbButton","","ghost","",1,"left",3,"click"],["nbButton","","fxLayoutAlign","start start",1,"text-hint",3,"click"],["fxLayoutGap","0.4rem","fxLayout","row","fxLayoutAlign","center center"],["shape","round","size","tiny","status","basic","nbButton","","ghost",""],["status","basic","filled","","icon","arrowhead-down-outline"],["fxFlex","","fxLayoutAlign","end start","fxLayoutGap","1rem",1,"_card",2,"margin-top","0.2rem","margin-bottom","0.5rem"],["shape","round","size","tiny","status","danger","nbButton","","filled","",2,"text-transform","capitalize",3,"click"],["status","basics","filled","","icon","corner-left-down-outline"],["shape","round","size","tiny","status","info","nbButton","","outline","",2,"text-transform","capitalize",3,"click"],["status","info","filled","","icon","corner-left-down-outline"]],template:function(o,i){1&o&&(t.yuY(0,Hn,1,2,"ng-template",null,0,t.gJz)(2,Un,1,2,"ng-template",null,1,t.gJz),t.I0R(4,"nb-card",2)(5,"nb-card-header")(6,"nb-form-field",3),t.wR5(7,"nb-icon",4)(8,"input",5),t.C$Y()(),t.I0R(9,"nb-card-body")(10,"div",6),t.yuY(11,Zn,19,9,"div",7),t.wVc(12,"async"),t.C$Y()(),t.I0R(13,"nb-card-footer",8)(14,"app-paginator",9),t.qCj("onchange",function(s){return i.onPageChange(s)}),t.C$Y()()()),2&o&&(t.yG2(4),t.E7m("nbSpinner",i.loading),t.yG2(4),t.E7m("formControl",i.searchInput),t.yG2(3),t.E7m("ngForOf",t.kDX(12,4,i.webapps)),t.yG2(3),t.E7m("paginator",i.pagination_data))},dependencies:[c.ay,c.u_,l.KkC,l.iwb,l.q_v,l.GYx,l.UrE,g.ot,g.ue,g.ug,l.yqL,l.eAh,l.yAs,l.GAA,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,j._,K,wt,c.a],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.item[_ngcontent-%COMP%]{background:var(--background-basic-color-2)!important;padding:1rem 1rem .5rem;margin-bottom:.5rem}nb-card[_ngcontent-%COMP%]{padding:0;margin:0;border:0}nb-card-header[_ngcontent-%COMP%]{background:var(--background-basic-color-3)!important;margin:0;padding:4px}nb-card-body[_ngcontent-%COMP%]{padding:.7rem;margin:0;border:0}']})}}return n})();var eo=_(1528);function no(n,a){if(1&n&&t.wR5(0,"nb-tag",26),2&n){const e=a.$implicit,o=t.GaO(3);t.E7m("status",o.active?"alternative":"basic")("text",e)}}function oo(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",27),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,r=t.GaO(2);return t.CGJ(r.importResults(i))}),t.OEk(1," Import "),t.wR5(2,"nb-icon",28),t.C$Y()}}function io(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",29)(1,"button",30),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.testSecoflex(i.repository))}),t.wR5(2,"nb-icon",31),t.OEk(3," Test "),t.C$Y(),t.I0R(4,"button",32),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.testWatchdog(i.repository))}),t.wR5(5,"nb-icon",33),t.OEk(6," Secoflex "),t.C$Y()()}}function ao(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"div",6),t.OEk(6),t.C$Y(),t.I0R(7,"div",6),t.OEk(8),t.C$Y(),t.I0R(9,"div",18),t.yuY(10,no,1,2,"nb-tag",19),t.C$Y()()(),t.I0R(11,"div",20)(12,"div",21),t.yuY(13,oo,3,0,"button",22),t.I0R(14,"button",23),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2);return t.CGJ(s.downloadFile(r))}),t.OEk(15," Download "),t.wR5(16,"nb-icon",24),t.C$Y()()()()(),t.yuY(17,io,7,0,"div",25),t.C$Y()}if(2&n){const e=a.$implicit,o=t.GaO(2);t.yG2(),t.m4B("border-color",null==e?null:e.primary_color),t.yG2(5),t.oRS(" ",e.filename," "),t.yG2(2),t.oRS(" ",o.Math.ceil(e.object_size/1024)," KB "),t.yG2(2),t.E7m("ngForOf",null==e||null==e.meta_data?null:e.meta_data.scanner_inputs),t.yG2(3),t.E7m("ngIf",null==e?null:e.export),t.yG2(4),t.E7m("ngIf",!1)}}function ro(n,a){if(1&n&&(t.I0R(0,"nb-card-body")(1,"div",11),t.yuY(2,ao,18,7,"div",12),t.C$Y()()),2&n){const e=a.ngIf;t.yG2(2),t.E7m("ngForOf",e)}}let N=(()=>{class n{importResults(e){console.log("importResults",e),this.apiService.importAgentJobResult(this.job?._id?.$oid).subscribe()}close(){this.sidebarService.closeById(this.window_id)}downloadFile(e){console.log("downloadFile",e),this.apiService.downloadAgentResult(e?.job_id,{filename:e?.filename}).subscribe(o=>{const i=e?.filename;this.DownloadFile(o,i)})}DownloadFile(e,o,i="text/plain"){return(0,eo.c)(function*(){const r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=o,s.click(),window.URL.revokeObjectURL(r)})()}constructor(e,o,i){this.apiService=e,this.sidebarService=o,this.drawerMngr=i,this.themeClass="",this.Math=Math,this.job={_id:{$oid:"66ed49b03d5f325bceb1ec26"}},this.loading=!0}ngOnInit(){this.result_data=this.fetchResults()}fetchResults(){return this.apiService.getAgentJobResult(this.job?._id?.$oid).pipe((0,y.y)(e=>{this.loading=!1}))}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-agent-job-result"]],inputs:{window_id:"window_id",themeClass:[t.Wk5.None,"theme-class","themeClass"],job:"job"},decls:15,vars:4,consts:[["fxFill","",3,"nbSpinner"],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],[1,"text-interactive","text-hint"],["fxFlex",""],["nbSuffix","","icon","search-outline","pack","eva"],["placeholder","Search","nbInput","","status","basic","type","text","fullWidth",""],[4,"ngIf"],["fxLayout","row wrap","fxLayout.lt-md","column","fxLayout.lt-sm","column"],["fxLayout","column","class","item","fxFlex","100%",4,"ngFor","ngForOf"],["fxLayout","column","fxFlex","100%",1,"item"],[1,"grid-item"],["fxLayoutAlign","start","fxLayout","row",1,"grid-item-content"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],["fxLayout","column"],["fxLayout","row"],["appearance","outline","class","buildcount","size","tiny",3,"status","text",4,"ngFor","ngForOf"],["fxLayoutAlign","start end","fxLayoutGap","0.6rem","fxLayout","column"],["nbButton","","fxLayout","row"],["shape","round","size","small","status","info","nbButton","","ghost","",3,"click",4,"ngIf"],["shape","round","size","small","status","basic","nbButton","","ghost","",1,"left",3,"click"],["status","info","filled","","icon","diagonal-arrow-right-up-outline"],["fxFlex","","class","_card","style","margin-top: 0.2rem  ;  margin-bottom: 0.5rem ","fxLayoutAlign","end start","fxLayoutGap","1rem",4,"ngIf"],["appearance","outline","size","tiny",1,"buildcount",3,"status","text"],["shape","round","size","small","status","info","nbButton","","ghost","",3,"click"],["status","info","filled","","icon","diagonal-arrow-left-up-outline"],["fxFlex","","fxLayoutAlign","end start","fxLayoutGap","1rem",1,"_card",2,"margin-top","0.2rem","margin-bottom","0.5rem"],["shape","round","size","tiny","status","danger","nbButton","","filled","",2,"text-transform","capitalize",3,"click"],["status","basics","filled","","icon","corner-left-down-outline"],["shape","round","size","tiny","status","info","nbButton","","outline","",2,"text-transform","capitalize",3,"click"],["status","info","filled","","icon","corner-left-down-outline"]],template:function(o,i){1&o&&(t.I0R(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"button",2),t.qCj("click",function(){return i.close()}),t.wR5(4,"nb-icon",3),t.C$Y(),t.I0R(5,"div",4)(6,"div",5),t.OEk(7," Agent Runner "),t.C$Y(),t.wR5(8,"div",6),t.C$Y()()(),t.I0R(9,"nb-card-header")(10,"nb-form-field",7),t.wR5(11,"nb-icon",8)(12,"input",9),t.C$Y()(),t.yuY(13,ro,3,1,"nb-card-body",10),t.wVc(14,"async"),t.C$Y()),2&o&&(t.E7m("nbSpinner",i.loading),t.yG2(13),t.E7m("ngIf",t.kDX(14,2,i.result_data)))},dependencies:[c.ay,c.u_,l.KkC,l.iwb,l.GYx,l.UrE,l.yqL,l.eAh,l.yAs,l.GAA,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,c.a],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.item[_ngcontent-%COMP%]{background:var(--background-basic-color-2)!important;padding:1rem 1rem .5rem;margin-bottom:.5rem}nb-card[_ngcontent-%COMP%]{padding:0;margin:0;border:0}nb-card-header[_ngcontent-%COMP%]{background:var(--background-basic-color-3)!important;margin:0;padding:4px}nb-card-body[_ngcontent-%COMP%]{padding:.7rem;margin:0;border:0}button[_ngcontent-%COMP%]{text-transform:none!important}']})}}return n})();function so(n,a){if(1&n&&t.wR5(0,"app-agent-job-result",3),2&n){const e=a.$implicit;t.E7m("job",e)("window_id",null==e?null:e.window_id)}}function lo(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function co(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function uo(n,a){1&n&&t.wR5(0,"nb-icon",31)}function _o(n,a){1&n&&t.wR5(0,"nb-icon",32)}function po(n,a){1&n&&t.wR5(0,"nb-icon",33)}function go(n,a){if(1&n&&(t.I0R(0,"div",34),t.OEk(1),t.C$Y()),2&n){const e=a.$implicit;t.yG2(),t.oRS(" ",null==e||null==e.value?null:e.value.scanner_value," ")}}function mo(n,a){if(1&n&&(t.I0R(0,"div",20),t.wR5(1,"nb-tag",35),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("status","SUCCESS"==(null==e?null:e.exec_status)?"success":"basic")("text",null==e?null:e.exec_status)}}function fo(n,a){if(1&n&&(t.I0R(0,"div"),t.OEk(1),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.oRS(" ",null==e?null:e.message," ")}}function ho(n,a){if(1&n&&(t.SAx(0),t.yuY(1,fo,2,1,"div",14),t.k70()),2&n){const e=a.$implicit;t.yG2(),t.E7m("ngIf","FAILURE"==(null==e?null:e.exec_status))}}function bo(n,a){if(1&n&&(t.I0R(0,"div",36),t.yuY(1,ho,2,1,"ng-container",37),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("ngForOf",null==e?null:e.jobs)}}function yo(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-list-item",18),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2),u=t.Gew(1);return t.CGJ(s.openDrawer(u,r))}),t.I0R(1,"div",19)(2,"div",20),t.yuY(3,uo,1,0,"nb-icon",21)(4,_o,1,0,"nb-icon",22)(5,po,1,0,"nb-icon",23),t.C$Y(),t.I0R(6,"div",24)(7,"div",25),t.yuY(8,go,2,1,"div",26),t.wVc(9,"keyvalue"),t.yuY(10,mo,2,2,"div",27),t.C$Y()(),t.I0R(11,"div")(12,"button",28),t.wR5(13,"nb-icon",29),t.C$Y()()(),t.yuY(14,bo,2,1,"div",30),t.C$Y()}if(2&n){const e=a.$implicit;t.yG2(3),t.E7m("ngIf","SUCCESS"==(null==e?null:e.exec_status)),t.yG2(),t.E7m("ngIf","INITIATED"==(null==e?null:e.exec_status)),t.yG2(),t.E7m("ngIf","FAILURE"==(null==e?null:e.exec_status)),t.yG2(3),t.E7m("ngForOf",t.kDX(9,6,null==e?null:e.request_data)),t.yG2(2),t.E7m("ngIf",!1),t.yG2(4),t.E7m("ngIf","FAILURE"==(null==e?null:e.exec_status))}}function Co(n,a){if(1&n&&(t.I0R(0,"div"),t.OEk(1),t.C$Y()),2&n){const e=a.ngIf;t.yG2(),t.oRS(" ",null==e||null==e.agents?null:e.agents.length," workers ")}}function vo(n,a){if(1&n&&(t.I0R(0,"nb-option",38),t.OEk(1),t.C$Y()),2&n){const e=a.$implicit;t.E7m("value",null==e?null:e.key),t.yG2(),t.CAO("",null==e?null:e.key," ",null==e?null:e.value," ")}}function xo(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-card",5)(1,"nb-card-header")(2,"div",6)(3,"button",7),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.close())}),t.wR5(4,"nb-icon",8),t.C$Y(),t.I0R(5,"div",9)(6,"div",10),t.OEk(7," Agent Jobs "),t.C$Y(),t.I0R(8,"div",11),t.OEk(9),t.C$Y()()()(),t.I0R(10,"nb-list"),t.yuY(11,yo,15,8,"nb-list-item",12),t.C$Y(),t.I0R(12,"nb-card-footer",13),t.yuY(13,Co,2,1,"div",14),t.wVc(14,"async"),t.I0R(15,"div")(16,"nb-select",15),t.yuY(17,vo,2,3,"nb-option",16),t.wVc(18,"keyvalue"),t.C$Y()(),t.I0R(19,"app-paginator",17),t.qCj("onchange",function(i){t.usT(e);const r=t.GaO();return t.CGJ(r.onPageChange(i))}),t.C$Y()()()}if(2&n){const e=a.ngIf,o=t.GaO();t.yG2(9),t.oRS(" ",null==e||null==e.task?null:e.task.identifier," "),t.yG2(2),t.E7m("ngForOf",null==e?null:e.data),t.yG2(2),t.E7m("ngIf",t.kDX(14,7,o.getWorkers)),t.yG2(3),t.E7m("formControl",o.exec_status_filter),t.yG2(),t.E7m("ngForOf",t.kDX(18,9,null==e||null==e.paginator||null==e.paginator.extras?null:e.paginator.extras.exec_status)),t.yG2(2),t.E7m("theme-class",o.themeClass)("paginator",null==e?null:e.paginator)}}let It=(()=>{class n{constructor(e,o,i){this.apiService=e,this.sidebarService=o,this.drawerMngr=i,this.themeClass="",this.agent_id="675c72fc36801f266f7da3b1",this.exec_status_filter=new g.Ku(void 0)}onPageChange(e){console.log("onPageChange",e);let o=this.exec_status_filter.value;this.agent_details=this.apiService.getAgentJobs(this.agent_id,{page_number:e,...null!==o&&{exec_status:o}})}checkResults(e){this.apiService.getAgentJobResult(e?._id?.$oid).subscribe()}ngOnInit(){this.getWorkers=this.apiService.getWorkers(this.agent_id),this.exec_status_filter.valueChanges.pipe((0,R.W)(this.exec_status_filter.value)).subscribe(e=>{this.onPageChange(1)})}close(){this.sidebarService.closeById(this.window_id)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}selectionEvent(e,o){console.log("selection_event",e,o),o&&(this.selected_repository=o,this.sidebarService.closeById(e))}runTool(){this.apiService.executeAgent(this.agent_id,{host:this.selected_repository?._id?.$oid,apk:this.selected_repository?._id?.$oid,code_repository:this.selected_repository?._id?.$oid}).subscribe(console.log)}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-agent-jobs"]],inputs:{themeClass:[t.Wk5.None,"theme-class","themeClass"],window_id:"window_id",agent_id:"agent_id"},decls:8,vars:3,consts:[["jobResultTemplate",""],["loadingTemplate",""],["fxFill","",4,"ngIf"],[3,"job","window_id"],["fxFill","",3,"nbSpinner"],["fxFill",""],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],[1,"text-hint"],["class","subitsem","fxLayoutAlign","start","fxLayout","column",3,"click",4,"ngFor","ngForOf"],["fxLayoutAlign","end",2,"padding","0"],[4,"ngIf"],["optionsListClass","nb-themne-default","placeholder","State","size","medium","status","info","appearance","outline",3,"formControl"],["style","font-weight: 200; font-size: 0.7rem; text-transform: none  ",3,"value",4,"ngFor","ngForOf"],[3,"theme-class","paginator","onchange"],["fxLayoutAlign","start","fxLayout","column",1,"subitsem",3,"click"],["fxFlex","","fxLayoutGap","1rem","fxLayoutAlign","start start","fxLayout","row"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between",1,"text-interactive","text-hint"],["status","success","icon","checkmark-circle-2-outline",4,"ngIf"],["status","info","icon","play-circle-outline",4,"ngIf"],["status","danger","icon","stop-circle-outline",4,"ngIf"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],["fxFlex","","fxLayout","column"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between","class","text-hint",4,"ngFor","ngForOf"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between","class","text-interactive text-hint",4,"ngIf"],["shape","round","size","small","status","basic","nbButton","","ghost",""],["status","info","filled","","icon","diagonal-arrow-right-up-outline"],["icon","stop-circle-outline",4,"ngIf"],["status","success","icon","checkmark-circle-2-outline"],["status","info","icon","play-circle-outline"],["status","danger","icon","stop-circle-outline"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between",1,"text-hint"],["appearance","outline","size","tiny",1,"buildcount",2,"text-transform","none",3,"status","text"],["icon","stop-circle-outline"],[4,"ngFor","ngForOf"],[2,"font-weight","200","font-size","0.7rem","text-transform","none",3,"value"]],template:function(o,i){1&o&&(t.yuY(0,so,1,2,"ng-template",null,0,t.gJz)(2,lo,1,1,"ng-template",null,1,t.gJz)(4,co,1,1,"ng-template",null,1,t.gJz)(6,xo,20,11,"nb-card",2),t.wVc(7,"async")),2&o&&(t.yG2(6),t.E7m("ngIf",t.kDX(7,1,i.agent_details)))},dependencies:[c.ay,c.u_,l.KkC,l.q_v,l.GYx,l.UrE,g.ue,g.ug,l.yqL,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,l.EfU,l.aYD,j._,l.klp,l.KYA,N,c.a,c.uq],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\nnb-card[_ngcontent-%COMP%]{margin:0;border-radius:0!important}nb-card-header[_ngcontent-%COMP%]{padding:0;padding-right:1rem;overflow:hidden}button[_ngcontent-%COMP%]{text-transform:capitalize!important}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem.active[_ngcontent-%COMP%]{color:var(--text-primary-color);background:var(--background-basic-color-3)}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem[_ngcontent-%COMP%]:hover{background:var(--background-basic-color-3)}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:350;color:var(--text-hint-color)}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;height:26px;margin-right:20px;margin-left:10px}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem.disabled[_ngcontent-%COMP%]{opacity:.5}']})}}return n})();function wo(n,a){if(1&n&&t.wR5(0,"app-agent-job-result",3),2&n){const e=a.$implicit;t.E7m("job",e)("window_id",null==e?null:e.window_id)}}function Io(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function ko(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function Oo(n,a){1&n&&t.wR5(0,"nb-icon",27)}function Go(n,a){1&n&&t.wR5(0,"nb-icon",28)}function So(n,a){1&n&&t.wR5(0,"nb-icon",29)}function Ro(n,a){if(1&n&&(t.I0R(0,"div",30),t.OEk(1),t.C$Y()),2&n){const e=a.$implicit;t.yG2(),t.oRS(" ",null==e||null==e.value?null:e.value.scanner_value," ")}}function Lo(n,a){if(1&n&&(t.I0R(0,"div",14),t.wR5(1,"nb-tag",31),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("status","SUCCESS"==(null==e?null:e.exec_status)?"success":"basic")("text",null==e?null:e.exec_status)}}function Eo(n,a){if(1&n&&(t.I0R(0,"div"),t.OEk(1),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.oRS(" ",null==e?null:e.message," ")}}function $o(n,a){if(1&n&&(t.SAx(0),t.yuY(1,Eo,2,1,"div",34),t.k70()),2&n){const e=a.$implicit;t.yG2(),t.E7m("ngIf","FAILURE"==(null==e?null:e.exec_status))}}function To(n,a){if(1&n&&(t.I0R(0,"div",32),t.yuY(1,$o,2,1,"ng-container",33),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("ngForOf",null==e?null:e.jobs)}}function Mo(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-list-item",12),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2),u=t.Gew(1);return t.CGJ(s.openDrawer(u,r))}),t.I0R(1,"div",13)(2,"div",14),t.yuY(3,Oo,1,0,"nb-icon",15)(4,Go,1,0,"nb-icon",16)(5,So,1,0,"nb-icon",17),t.I0R(6,"div")(7,"div"),t.OEk(8),t.C$Y(),t.I0R(9,"div",18),t.OEk(10),t.C$Y(),t.I0R(11,"div",19),t.OEk(12),t.wVc(13,"elapsedTime"),t.C$Y()()(),t.I0R(14,"div",20)(15,"div",21),t.yuY(16,Ro,2,1,"div",22),t.wVc(17,"keyvalue"),t.yuY(18,Lo,2,2,"div",23),t.C$Y()(),t.I0R(19,"div")(20,"button",24),t.wR5(21,"nb-icon",25),t.C$Y()()(),t.yuY(22,To,2,1,"div",26),t.C$Y()}if(2&n){const e=a.$implicit;t.yG2(3),t.E7m("ngIf","SUCCESS"==(null==e?null:e.exec_status)),t.yG2(),t.E7m("ngIf","INITIATED"==(null==e?null:e.exec_status)),t.yG2(),t.E7m("ngIf","FAILURE"==(null==e?null:e.exec_status)),t.yG2(3),t.oRS(" ",null==e||null==e.task||null==e.task.request_task?null:e.task.request_task.identifier," "),t.yG2(2),t.oRS(" ",null==e||null==e.task||null==e.task.request_data||null==e.task.request_data.git_path?null:e.task.request_data.git_path.scanner_value," "),t.yG2(2),t.oRS(" ",t.kDX(13,9,null==e?null:e.updated_at)," "),t.yG2(4),t.E7m("ngForOf",t.kDX(17,11,null==e?null:e.request_data)),t.yG2(2),t.E7m("ngIf",!1),t.yG2(4),t.E7m("ngIf","FAILURE"==(null==e?null:e.exec_status))}}function Ao(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-card",5)(1,"nb-card-header")(2,"div",6)(3,"button",7),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.close())}),t.wR5(4,"nb-icon",8),t.C$Y(),t.I0R(5,"div",9)(6,"div",10),t.OEk(7," Workers "),t.C$Y()()()(),t.I0R(8,"nb-list"),t.yuY(9,Mo,23,13,"nb-list-item",11),t.C$Y()()}if(2&n){const e=a.ngIf;t.yG2(9),t.E7m("ngForOf",null==e?null:e.agents)}}let Po=(()=>{class n{constructor(e,o,i){this.apiService=e,this.sidebarService=o,this.drawerMngr=i,this.themeClass="",this.exec_status_filter=new g.Ku("FAILURE")}onPageChange(e){console.log("onPageChange",e),this.agent_details=this.apiService.getWorkers(this.agent_id)}checkResults(e){this.apiService.getAgentJobResult(e?._id?.$oid).subscribe()}ngOnInit(){this.getWorkers=this.apiService.getWorkers(this.agent_id),this.exec_status_filter.valueChanges.pipe((0,R.W)(this.exec_status_filter.value)).subscribe(e=>{this.onPageChange(1)})}close(){this.sidebarService.closeById(this.window_id)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}selectionEvent(e,o){console.log("selection_event",e,o),o&&(this.selected_repository=o,this.sidebarService.closeById(e))}runTool(){this.apiService.executeAgent(this.agent_id,{host:this.selected_repository?._id?.$oid,apk:this.selected_repository?._id?.$oid,code_repository:this.selected_repository?._id?.$oid}).subscribe(console.log)}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-secoflex-workers"]],inputs:{themeClass:[t.Wk5.None,"theme-class","themeClass"],window_id:"window_id",agent_id:"agent_id"},decls:8,vars:3,consts:[["jobResultTemplate",""],["loadingTemplate",""],["fxFill","",4,"ngIf"],[3,"job","window_id"],["fxFill","",3,"nbSpinner"],["fxFill",""],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],["class","subitsem","fxLayoutAlign","start","fxLayout","column",3,"click",4,"ngFor","ngForOf"],["fxLayoutAlign","start","fxLayout","column",1,"subitsem",3,"click"],["fxFlex","","fxLayoutGap","1rem","fxLayoutAlign","start start","fxLayout","row"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between",1,"text-interactive","text-hint"],["status","success","icon","checkmark-circle-2-outline",4,"ngIf"],["status","info","icon","play-circle-outline",4,"ngIf"],["status","danger","icon","stop-circle-outline",4,"ngIf"],[1,"caption","text-primary"],[1,"caption-2"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],["fxFlex","","fxLayout","column"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between","class","text-hint",4,"ngFor","ngForOf"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between","class","text-interactive text-hint",4,"ngIf"],["shape","round","size","small","status","basic","nbButton","","ghost",""],["status","info","filled","","icon","diagonal-arrow-right-up-outline"],["icon","stop-circle-outline",4,"ngIf"],["status","success","icon","checkmark-circle-2-outline"],["status","info","icon","play-circle-outline"],["status","danger","icon","stop-circle-outline"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between",1,"text-hint"],["appearance","outline","size","tiny",1,"buildcount",2,"text-transform","none",3,"status","text"],["icon","stop-circle-outline"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(o,i){1&o&&(t.yuY(0,wo,1,2,"ng-template",null,0,t.gJz)(2,Io,1,1,"ng-template",null,1,t.gJz)(4,ko,1,1,"ng-template",null,1,t.gJz)(6,Ao,10,1,"nb-card",2),t.wVc(7,"async")),2&o&&(t.yG2(6),t.E7m("ngIf",t.kDX(7,1,i.agent_details)))},dependencies:[c.ay,c.u_,l.KkC,l.GYx,l.UrE,l.yqL,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,l.EfU,l.aYD,N,c.a,c.uq],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\nnb-card[_ngcontent-%COMP%]{margin:0;border-radius:0!important}nb-card-header[_ngcontent-%COMP%]{padding:0;padding-right:1rem;overflow:hidden}button[_ngcontent-%COMP%]{text-transform:capitalize!important}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem.active[_ngcontent-%COMP%]{color:var(--text-primary-color);background:var(--background-basic-color-3)}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem[_ngcontent-%COMP%]:hover{background:var(--background-basic-color-3)}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:350;color:var(--text-hint-color)}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;height:26px;margin-right:20px;margin-left:10px}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem.disabled[_ngcontent-%COMP%]{opacity:.5}']})}}return n})();const W=()=>({exact:!1}),Fo=()=>["integration","integrate"],Yo=()=>["integration","web-apps"],Do=()=>["integration","fqdn"],qo=()=>["integration","list"],Jo=()=>["integration","extension"],zo=()=>["integration","workers"],Bo=()=>["integration","test"];let jo=(()=>{class n{constructor(e,o){this.activatedRoute=e,this.router=o}isActiveTab(e){return console.log("tabtabdebug",e,this.activatedRoute.routeConfig?.path),this.activatedRoute.snapshot.firstChild.routeConfig?.path===e}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(C.gV),t.GI1(C.E5))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-integration-layout-header"]],decls:15,vars:28,consts:[["fxFlex","1 0 auto"],["ghost","","nbButton","","routerLinkActive","active","size","small","nbButton","",1,"tab-button",3,"routerLinkActiveOptions","routerLink"]],template:function(o,i){1&o&&(t.I0R(0,"div",0)(1,"button",1),t.OEk(2,"Integrate "),t.C$Y(),t.I0R(3,"button",1),t.OEk(4,"Web Apps "),t.C$Y(),t.I0R(5,"button",1),t.OEk(6,"DNS "),t.C$Y(),t.I0R(7,"button",1),t.OEk(8,"List "),t.C$Y(),t.I0R(9,"button",1),t.OEk(10,"Extension "),t.C$Y(),t.I0R(11,"button",1),t.OEk(12,"Workers "),t.C$Y(),t.I0R(13,"button",1),t.OEk(14,"Test "),t.C$Y()()),2&o&&(t.yG2(),t.E7m("routerLinkActiveOptions",t.q4q(14,W))("routerLink",t.q4q(15,Fo)),t.yG2(2),t.E7m("routerLinkActiveOptions",t.q4q(16,W))("routerLink",t.q4q(17,Yo)),t.yG2(2),t.E7m("routerLinkActiveOptions",t.q4q(18,W))("routerLink",t.q4q(19,Do)),t.yG2(2),t.E7m("routerLinkActiveOptions",t.q4q(20,W))("routerLink",t.q4q(21,qo)),t.yG2(2),t.E7m("routerLinkActiveOptions",t.q4q(22,W))("routerLink",t.q4q(23,Jo)),t.yG2(2),t.E7m("routerLinkActiveOptions",t.q4q(24,W))("routerLink",t.q4q(25,zo)),t.yG2(2),t.E7m("routerLinkActiveOptions",t.q4q(26,W))("routerLink",t.q4q(27,Bo)))},dependencies:[l.sXj,d.CA,C.ER,C.LC],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]{overflow-x:auto}']})}}return n})();var Wo=_(8716);class kt{set filter_selected_scm_ids(a){this.filter_selected_scm_ids$=a}get filter_selected_scm_ids(){return this.filter_selected_scm_ids$}set bulk_selected_mode_all(a){this.bulk_selected_mode_all$=a}get bulk_selected_mode_all(){return this.bulk_selected_mode_all$}get markedIds(){return this.marked_ids}get onValudChanges(){return this.valueChanges}invalidateState(){this.markedIds.size>0?this.headerService.disableAutoHide():this.headerService.enableAutoHide(),this.state$.next({selection_mode:this.selection_mode,bulk_selected_mode_all:this.bulk_selected_mode_all,marked_ids:new Set(this.marked_ids),filter_selected_scm_ids:new Set(this.filter_selected_scm_ids)})}resetState(){this.selection_mode=!1,this.bulk_selected_mode_all=!1,this.marked_ids.clear(),this.filter_selected_scm_ids.clear(),this.invalidateState()}constructor(a){this.headerService=a,this.selection_mode=!1,this.marked_ids=new Set,this.bulk_selected_mode_all$=!1,this.filter_selected_scm_ids$=new Set,this.state$=new b.g(null),this.valueChanges=this.state$.asObservable().pipe((0,Wo.C)({refCount:!0,bufferSize:1})),this.resetState(),this.invalidateState()}deselectAll(){this.selection_mode=!1,this.marked_ids.clear(),this.bulk_selected_mode_all=!1,this.invalidateState()}selectAll(){this.selection_mode=!0,this.marked_ids.clear(),this.bulk_selected_mode_all=!0,this.invalidateState()}onClick(a){console.log("onClick",a),1==this.selection_mode?(console.log("marked_ids",a?._id?.$oid),this.marked_ids.has(a?._id?.$oid)?this.marked_ids.delete(a?._id?.$oid):this.marked_ids.add(a?._id?.$oid)):(console.log("marked_ids",a?._id?.$oid),this.marked_ids.has(a?._id?.$oid)?this.marked_ids.clear():(this.marked_ids.clear(),this.marked_ids.add(a?._id?.$oid))),this.invalidateState()}switchSelectionMode(a){if(1==a||0==a)return this.selection_mode=a,void this.invalidateState();this.selection_mode?(this.deselectAll(),this.selection_mode=!1):this.selection_mode=!0,this.invalidateState()}}const Ko=["popoverRef"],Qo=["popoverRefMore"];function Ho(n,a){if(1&n){const e=t.KQA();t.I0R(0,"app-scm-integrationfilter-menu",4),t.qCj("onapply",function(i){t.usT(e);const r=t.GaO();return t.CGJ(r.onFilterSelected(i))}),t.wVc(1,"async"),t.C$Y()}if(2&n){const e=t.GaO();t.E7m("state",e.state$)("loading",t.kDX(1,6,e.isLoading))("debug",e.debug)("menuItems",e.menuItems)("ref",e.popoverDirective)("id",e.applicationId)}}function Uo(n,a){1&n&&t.wR5(0,"app-loading-card")}function Xo(n,a){if(1&n){const e=t.KQA();t.I0R(0,"app-integration-list-selection-menu",5),t.qCj("onapply",function(i){t.usT(e);const r=t.GaO();return t.CGJ(r.onMenuItemSelected(i))}),t.wVc(1,"async"),t.C$Y()}if(2&n){const e=t.GaO();t.E7m("loading",t.kDX(1,6,e.isLoading))("selected",e.filter_selected_scm_ids$)("debug",e.debug)("menuItems",e.extendedMenuItems)("ref",e.popoverRefMoreDirective)("id",e.applicationId)}}function Vo(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",20),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.clearSearch())}),t.wR5(1,"nb-icon",21),t.C$Y()}}function No(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",15)(1,"nb-form-field")(2,"button",16),t.wVc(3,"async"),t.wR5(4,"nb-icon",17),t.C$Y(),t.I0R(5,"input",18),t.qCj("keyup.escape",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.clearSearch())}),t.C$Y(),t.yuY(6,Vo,2,0,"button",19),t.C$Y()()}if(2&n){const e=t.GaO(2);t.yG2(2),t.E7m("nbSpinner",t.kDX(3,3,e.isLoading)),t.yG2(3),t.E7m("formControl",e.header.searchFieldControl),t.yG2(),t.E7m("ngIf",null==e.header.searchFieldControl||null==e.header.searchFieldControl.value?null:e.header.searchFieldControl.value.length)}}function Zo(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",23),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.triggerRun())}),t.OEk(1," Run "),t.wR5(2,"nb-icon",24),t.C$Y()}}function ti(n,a){if(1&n&&(t.I0R(0,"div"),t.yuY(1,Zo,3,0,"button",22),t.C$Y()),2&n){const e=a.ngIf,o=t.GaO(2);t.yG2(),t.E7m("ngIf",null!=o.state$&&o.state$.bulk_selected_mode_all?(null==o.state$||null==o.state$.marked_ids?null:o.state$.marked_ids.size)!=(null==e?null:e.totalItems):null==o.state$||null==o.state$.marked_ids?null:o.state$.marked_ids.size)}}function ei(n,a){if(1&n&&(t.I0R(0,"div",6),t.yuY(1,No,7,5,"div",7),t.I0R(2,"div"),t.wR5(3,"app-paginator",8),t.C$Y(),t.I0R(4,"div")(5,"button",9,10),t.wR5(7,"nb-icon",11),t.C$Y()(),t.I0R(8,"div")(9,"button",9,12),t.wR5(11,"nb-icon",13),t.C$Y()(),t.yuY(12,ti,2,1,"div",14),t.wVc(13,"async"),t.C$Y()),2&n){const e=t.GaO(),o=t.Gew(1),i=t.Gew(5);t.yG2(),t.E7m("ngIf",!(null!=e.state$&&e.state$.selection_mode)),t.yG2(2),t.E7m("tag",e.tag),t.yG2(2),t.E7m("nbPopover",o),t.yG2(4),t.E7m("nbPopover",i),t.yG2(3),t.E7m("ngIf",t.kDX(13,5,e.paginator))}}let rt=(()=>{class n{get isLoading(){return this.header.searchFieldControlLoading}clearSearch(){this.header.searchFieldControl.setValue("")}constructor(e,o){this.header=e,this.apiService=o,this.extendedMenuItems=(0,F.of)([{id:f.QH.SELECT_ALL,alias:"select_all",title:"Select All",icon:"done-all-outline"},{id:f.QH.CLEAR_SELECTION,alias:"clear_selection",title:"Clear Selection",icon:"eye-off-outline"},{id:f.QH.MULTI_SELECTION_MODE,alias:"multiple_selection_mode",title:"Multiple Select",icon:"eye-outline"}]),this.tag=f.wR.SCM_LIST,this.paginator=this.header.getPaginator(this.tag),this.state$=new kt(this.header),this.state=this.state$.onValudChanges,this.menuItems=this.apiService.getScmAppPassword("all",{verified:!0,auth_type:"password"})}ngAfterViewInit(){}ngOnInit(){this.header.triggerEvent(f.QH.NOOP,{state:this.state$})}onClick(){this.header.triggerEvent(f.QH.ADD_NEW,{state:this.state$})}triggerRun(){this.header.triggerEvent(f.QH.TRIGGER_EXECUTION,{state:this.state})}onFilterSelected(e){console.log("onFilterSelected",e,this.state$.bulk_selected_mode_all),this.state$.resetState(),console.log("onFilterSelected",e,this.state$.bulk_selected_mode_all),this.state$.filter_selected_scm_ids=e,this.invalidateEventData()}invalidateEventData(){this.header.loading=!0,this.header.triggerEvent(f.QH.SEARCH_FILTER,{state:this.state})}onMenuItemSelected(e){console.log("onMenuItemSelected",e),this.header.triggerEvent(e?.id,{})}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(f.ae),t.GI1(h.Ww))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-integration-list-header"]],viewQuery:function(o,i){if(1&o&&(t.CC$(Ko,5),t.CC$(Qo,5)),2&o){let r;t.wto(r=t.Gqi())&&(i.popoverDirective=r.first),t.wto(r=t.Gqi())&&(i.popoverRefMoreDirective=r.first)}},decls:8,vars:3,consts:[["integrationfilterMenuTemplate",""],["loadingCard",""],["integrationmoreMenuTemplate",""],["fxLayoutGap","0.4rem","fxLayout","row","fxLayoutAlign","end center",4,"ngIf"],[3,"state","loading","debug","menuItems","ref","id","onapply"],[3,"loading","selected","debug","menuItems","ref","id","onapply"],["fxLayoutGap","0.4rem","fxLayout","row","fxLayoutAlign","end center"],["fxFlex","40%","fxFlex.lt-sm","80%",4,"ngIf"],[3,"tag"],["nbPopoverPlacement","left","nbPopoverShowStateChange","horizontal","status","info","size","small","nbButton","","ghost","",3,"nbPopover"],["popoverRef","nbPopover"],["icon","options-2-outline"],["popoverRefMore","nbPopover"],["icon","more-vertical-outline"],[4,"ngIf"],["fxFlex","40%","fxFlex.lt-sm","80%"],["nbPrefix","","nbButton","","control","","status","info","ghost","",3,"nbSpinner"],["icon","search-outline"],["shape","round","type","text","nbInput","","fieldSize","small","fullWidth","","status","basic","placeholder","Search",3,"formControl","keyup.escape"],["nbSuffix","","nbButton","","control","","status","info","ghost","",3,"click",4,"ngIf"],["nbSuffix","","nbButton","","control","","status","info","ghost","",3,"click"],["icon","close-outline"],["status","info","size","small","nbButton","","filled","",3,"click",4,"ngIf"],["status","info","size","small","nbButton","","filled","",3,"click"],["icon","arrow-right"]],template:function(o,i){1&o&&(t.yuY(0,Ho,2,8,"ng-template",null,0,t.gJz)(2,Uo,1,0,"ng-template",null,1,t.gJz)(4,Xo,2,8,"ng-template",null,2,t.gJz)(6,ei,14,7,"div",3),t.wVc(7,"async")),2&o&&(t.yG2(6),t.E7m("ngIf",t.kDX(7,1,i.state)))}})}}return n})();var st=_(5060),lt=_(7048);function ni(n,a){if(1&n&&t.wR5(0,"app-repository-branch-selector-chooser",3),2&n){const e=a.$implicit,o=t.GaO();t.E7m("window_id",null==e?null:e.window_id)("repository_id",o.repository_id)}}function oi(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function ii(n,a){1&n&&t.wR5(0,"nb-tag",30),2&n&&t.E7m("text",a.$implicit)}function ai(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div")(1,"div")(2,"nb-tag-list",27),t.qCj("tagRemove",function(i){t.usT(e);const r=t.GaO(3);return t.CGJ(r.onTagRemove(i))}),t.yuY(3,ii,1,1,"nb-tag",28),t.C$Y()(),t.I0R(4,"nb-form-field"),t.wR5(5,"nb-icon",21),t.I0R(6,"input",29),t.qCj("tagAdd",function(i){t.usT(e);const r=t.GaO(3);return t.CGJ(r.onTagAdd(i))}),t.C$Y()()()}if(2&n){const e=t.GaO(3);t.yG2(3),t.E7m("ngForOf",e.tags)}}function ri(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",34),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(4);return t.CGJ(s.onItemClick(r))}),t.I0R(1,"div",35),t.OEk(2),t.C$Y()()}if(2&n){const e=a.$implicit,o=t.GaO(4);t.eAK("selected",null!=o.bulk_selected_mode_all&&o.bulk_selected_mode_all.value?!o.marked_ids.has(null==e||null==e._id?null:e._id.$oid):o.marked_ids.has(null==e||null==e._id?null:e._id.$oid)),t.yG2(2),t.oRS(" ",null==e?null:e.title," ")}}function si(n,a){if(1&n&&(t.I0R(0,"nb-list-item",31)(1,"div",32),t.OEk(2),t.C$Y(),t.yuY(3,ri,3,3,"div",33),t.C$Y()),2&n){const e=a.$implicit;t.yG2(2),t.oRS(" ",null==e?null:e.identifier," "),t.yG2(),t.E7m("ngForOf",null==e?null:e.installed_agnets)}}function li(n,a){if(1&n&&(t.I0R(0,"nb-card-body")(1,"div",19)(2,"div",10),t.OEk(3," Notes "),t.I0R(4,"div",20),t.OEk(5," (Optional) "),t.C$Y()(),t.yuY(6,ai,7,1,"div",15),t.I0R(7,"div")(8,"nb-form-field"),t.wR5(9,"nb-icon",21)(10,"input",22),t.C$Y()(),t.I0R(11,"div",10),t.OEk(12," Agents "),t.wR5(13,"div",23),t.C$Y(),t.I0R(14,"div",24)(15,"nb-list",25),t.yuY(16,si,4,2,"nb-list-item",26),t.C$Y()()()()),2&n){const e=a.ngIf,o=t.GaO(2);t.yG2(6),t.E7m("ngIf",!1),t.yG2(4),t.E7m("value",null==o.selected_repository?null:o.selected_repository.title),t.yG2(6),t.E7m("ngForOf",e)}}function ci(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-card",5)(1,"nb-card-header")(2,"div",6)(3,"button",7),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.close())}),t.wR5(4,"nb-icon",8),t.C$Y(),t.I0R(5,"div",9)(6,"div",10),t.OEk(7," Choose Agent "),t.C$Y(),t.I0R(8,"div",11),t.OEk(9),t.C$Y()()()(),t.I0R(10,"nb-card-header",12)(11,"div",13)(12,"div",14),t.OEk(13),t.C$Y()()(),t.yuY(14,li,17,3,"nb-card-body",15),t.wVc(15,"async"),t.I0R(16,"nb-card-footer",13)(17,"button",16),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.getSelectedAssets())}),t.OEk(18," Test "),t.wR5(19,"nb-icon",17),t.C$Y(),t.I0R(20,"button",18),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.runTool())}),t.OEk(21," Run "),t.wR5(22,"nb-icon",17),t.C$Y()()()}if(2&n){const e=a.ngIf,o=t.GaO();t.E7m("nbSpinner",o.loading),t.yG2(9),t.oRS(" ",o.repository_details.title," "),t.yG2(4),t.oRS(" ",o.exclude?(null==e?null:e.totalItems)-o.selected_assets.length:o.selected_assets.length," assets "),t.yG2(),t.E7m("ngIf",t.kDX(15,5,o.repository_details)),t.yG2(6),t.E7m("disabled",!o.marked_ids.size)}}let Ot=(()=>{class n{constructor(e,o,i,r){this.apiService=e,this.sidebarService=o,this.drawerMngr=i,this.nbToastrService=r,this.loading=!1,this.selection_mode=!0,this.bulk_selected_mode_all=new g.Ku(!1),this.marked_ids=new Set,this.tags=new Set([])}ngOnInit(){this.repository_details=this.apiService.getAgentList(this.agent_filters?{scanner_inputs:this.agent_filters}:{}).pipe((0,I.G)(e=>this.apiService.getAllInstalleddAgentList().pipe((0,w.k)(o=>(e.map(i=>(i.installed_agnets=[],o.forEach(r=>{i?._id==r?.agent_id?.$oid&&i.installed_agnets.push(r)}),i)),console.log("installed_agnets",o),e))))),this.asset_details=this.apiService.getScmRepos({query:this.query_filters?.query},{filters:this.query_filters?.filters}).pipe((0,w.k)(e=>e.pagination))}close(){this.sidebarService.closeById(this.window_id)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}jsonToQueryParams(e){const o=JSON.stringify(e);return`data=${encodeURIComponent(o)}`}runTool(){this.loading=!0;let e=new lt.i4;e=e.set("exclude",this.exclude),e=e.set("advanced_filters",decodeURIComponent(JSON.stringify(this.query_filters))),e=e.set("installed_agent_id",decodeURIComponent(JSON.stringify(Array.from(this.marked_ids.values())))),Array.from(this.marked_ids.values()).forEach(o=>{let i={};i[this.asset_type]=this.selected_assets,this.apiService.executeAgents(e,i).subscribe(r=>{1==r?.sent_to_queue?this.nbToastrService.success(`Enqueued ${r?.data?.length} scans.`,"Scans scheduled"):this.nbToastrService.danger("Unable to enqueue! Please try againlater.","Service is inactive"),this.loading=!1,this.sidebarService.closeById(this.window_id)})})}getSelectedAssets(){this.loading=!0;let e=new lt.i4;e=e.set("exclude",this.exclude),e=e.set("advanced_filters",decodeURIComponent(JSON.stringify(this.query_filters))),e=e.set("installed_agent_id",decodeURIComponent(JSON.stringify(Array.from(this.marked_ids.values()))));let o={};o[this.asset_type]=this.selected_assets,this.apiService.getSelectedAssets(e,o).subscribe(i=>{this.nbToastrService.info(`${i?.length} assets `,"Service is active"),this.loading=!1,this.sidebarService.closeById(this.window_id)})}onItemClick(e){console.log("marked_ids",this.marked_ids),this.marked_ids.has(e?._id?.$oid)?this.marked_ids.delete(e?._id?.$oid):(this.marked_ids.clear(),this.marked_ids.add(e?._id?.$oid))}onTagRemove(e){this.tags.delete(e.text)}onTagAdd({value:e,input:o}){e&&this.tags.add(e),o.nativeElement.value=""}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g),t.GI1(l.eIs))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-scm-integration-tool-selector-for-execution"]],inputs:{window_id:"window_id",repository_id:"repository_id",query_filters:"query_filters",exclude:"exclude",selected_assets:"selected_assets",agent_filters:"agent_filters",selection_mode:"selection_mode",asset_type:"asset_type"},decls:6,vars:4,consts:[["repositoryListTemplate",""],["loadingCard",""],["id","create-finding","class","nb-theme-default","fxFill","",3,"nbSpinner",4,"ngIf","ngIfElse"],[3,"window_id","repository_id"],["fxFill","",3,"nbSpinner"],["id","create-finding","fxFill","",1,"nb-theme-default",3,"nbSpinner"],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],[1,"text-interactive","text-hint"],[2,"padding-right","1rem","margin","0"],["fxLayoutAlign","end"],[1,"text-info"],[4,"ngIf"],["status","danger","size","small","outline","","nbButton","",3,"click"],["icon","play-circle-outline"],["status","danger","size","small","ghost","","nbButton","",3,"disabled","click"],["fxLayoutGap","1rem","fxLayout","column","fxFlex",""],[1,"caption-2","text-hint"],["nbPrefix","","icon","pricetags-outline","pack","eva"],["fullWidth","","placeholder","Notes","type","text","nbInput","",3,"value"],[1,"text-hint"],["fxFlex",""],["fxLayout","row wrap","fxLayout.lt-md","column","fxLayout.lt-sm","column"],["fxLayout","column","fxLayoutAlign","start","class","item","fxFlex","100%",4,"ngFor","ngForOf"],[3,"tagRemove"],["removable","",3,"text",4,"ngFor","ngForOf"],["placeholder","Tags","type","text","nbInput","","nbTagInput","","fullWidth","",3,"tagAdd"],["removable","",3,"text"],["fxLayout","column","fxLayoutAlign","start","fxFlex","100%",1,"item"],[1,"caption-2"],["nbButton","","class","item","fxLayoutAlign","start",3,"selected","click",4,"ngFor","ngForOf"],["nbButton","","fxLayoutAlign","start",1,"item",3,"click"],[1,"subtitle-2"]],template:function(o,i){if(1&o&&(t.yuY(0,ni,1,2,"ng-template",null,0,t.gJz)(2,oi,1,1,"ng-template",null,1,t.gJz)(4,ci,23,7,"nb-card",2),t.wVc(5,"async")),2&o){const r=t.Gew(3);t.yG2(4),t.E7m("ngIf",t.kDX(5,2,i.asset_details))("ngIfElse",r)}},dependencies:[c.ay,c.u_,l.KkC,l.iwb,l.q_v,l.GYx,l.UrE,l.yqL,l.eAh,l.QLb,l.GAA,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,l.EfU,l.aYD,K,c.a],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.item[_ngcontent-%COMP%]{background:var(--background-basic-color-2)!important;padding:1rem 1rem .5rem;margin-bottom:.5rem;border-style:solid;border-left-color:var(--color-danger-500);border-width:0px}.item.selected[_ngcontent-%COMP%]{border-left-width:8px}nb-card[_ngcontent-%COMP%]{padding:0;margin:0;border:0}nb-card-header[_ngcontent-%COMP%]{background:var(--background-basic-color-3)!important;margin:0;padding:4px}nb-card-body[_ngcontent-%COMP%]{padding:.7rem;margin:0;border:0}button[_ngcontent-%COMP%]{text-transform:none!important}']})}}return n})(),ui=(()=>{class n{constructor(e){this.apiService=e}createFqdn(e){this.apiService.postFqdnList({fqdns:[e]}).subscribe(),console.log("createFqdn",e)}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-fqdn-create"]],decls:13,vars:0,consts:[[1,"subtitle"],["fxLayoutAlign","end"],["size","medium","nbButton",""],["fxFlex",""],["placeholder","Name","nbInput","","status","basic","type","text",3,"keyup.enter"],["inpTitle",""]],template:function(o,i){if(1&o){const r=t.KQA();t.I0R(0,"nb-card")(1,"nb-card-header")(2,"div",0),t.OEk(3," Add FQDN "),t.C$Y()(),t.I0R(4,"nb-card-footer")(5,"div",1)(6,"button",2),t.OEk(7,"Save"),t.C$Y()()(),t.I0R(8,"nb-card-body")(9,"div",3)(10,"nb-form-field")(11,"input",4,5),t.qCj("keyup.enter",function(){t.usT(r);const u=t.Gew(12);return i.createFqdn(null==u?null:u.value),t.CGJ(u.blur())}),t.C$Y()()()()()}},dependencies:[l.KkC,l.iwb,l.q_v,l.GYx,l.eAh,l.GAA,l.sXj,d.qG,d.CA]})}}return n})();function di(n,a){if(1&n&&t.wR5(0,"app-agent-job-result",3),2&n){const e=a.$implicit;t.E7m("job",e)("window_id",null==e?null:e.window_id)}}function _i(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function pi(n,a){1&n&&t.wR5(0,"nb-card",4),2&n&&t.E7m("nbSpinner",!0)}function gi(n,a){1&n&&t.wR5(0,"nb-icon",31)}function mi(n,a){1&n&&t.wR5(0,"nb-icon",32)}function fi(n,a){1&n&&t.wR5(0,"nb-icon",33)}function hi(n,a){if(1&n&&(t.I0R(0,"div",34),t.OEk(1),t.C$Y()),2&n){const e=a.$implicit;t.yG2(),t.oRS(" ",null==e||null==e.value?null:e.value.scanner_value," ")}}function bi(n,a){if(1&n&&(t.I0R(0,"div",20),t.wR5(1,"nb-tag",35),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("status","SUCCESS"==(null==e?null:e.exec_status)?"success":"basic")("text",null==e?null:e.exec_status)}}function yi(n,a){if(1&n&&(t.I0R(0,"div"),t.OEk(1),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.oRS(" ",null==e?null:e.message," ")}}function Ci(n,a){if(1&n&&(t.SAx(0),t.yuY(1,yi,2,1,"div",14),t.k70()),2&n){const e=a.$implicit;t.yG2(),t.E7m("ngIf","FAILURE"==(null==e?null:e.exec_status))}}function vi(n,a){if(1&n&&(t.I0R(0,"div",36),t.yuY(1,Ci,2,1,"ng-container",37),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("ngForOf",null==e?null:e.jobs)}}function xi(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-list-item",18),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2),u=t.Gew(1);return t.CGJ(s.openDrawer(u,r))}),t.I0R(1,"div",19)(2,"div",20),t.yuY(3,gi,1,0,"nb-icon",21)(4,mi,1,0,"nb-icon",22)(5,fi,1,0,"nb-icon",23),t.C$Y(),t.I0R(6,"div",24)(7,"div",25),t.yuY(8,hi,2,1,"div",26),t.wVc(9,"keyvalue"),t.yuY(10,bi,2,2,"div",27),t.C$Y()(),t.I0R(11,"div")(12,"button",28),t.wR5(13,"nb-icon",29),t.C$Y()()(),t.yuY(14,vi,2,1,"div",30),t.C$Y()}if(2&n){const e=a.$implicit;t.yG2(3),t.E7m("ngIf","SUCCESS"==(null==e?null:e.exec_status)),t.yG2(),t.E7m("ngIf","INITIATED"==(null==e?null:e.exec_status)),t.yG2(),t.E7m("ngIf","FAILURE"==(null==e?null:e.exec_status)),t.yG2(3),t.E7m("ngForOf",t.kDX(9,6,null==e?null:e.request_data)),t.yG2(2),t.E7m("ngIf",!1),t.yG2(4),t.E7m("ngIf","FAILURE"==(null==e?null:e.exec_status))}}function wi(n,a){if(1&n&&(t.I0R(0,"div"),t.OEk(1),t.C$Y()),2&n){const e=a.ngIf;t.yG2(),t.oRS(" ",null==e||null==e.agents?null:e.agents.length," workers ")}}function Ii(n,a){if(1&n&&(t.I0R(0,"nb-option",38),t.OEk(1),t.C$Y()),2&n){const e=a.$implicit;t.E7m("value",null==e?null:e.key),t.yG2(),t.CAO("",null==e?null:e.key," ",null==e?null:e.value," ")}}function ki(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-card",5)(1,"nb-card-header")(2,"div",6)(3,"button",7),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.close())}),t.wR5(4,"nb-icon",8),t.C$Y(),t.I0R(5,"div",9)(6,"div",10),t.OEk(7," Agent Jobs "),t.C$Y(),t.I0R(8,"div",11),t.OEk(9),t.C$Y()()()(),t.I0R(10,"nb-list"),t.yuY(11,xi,15,8,"nb-list-item",12),t.C$Y(),t.I0R(12,"nb-card-footer",13),t.yuY(13,wi,2,1,"div",14),t.wVc(14,"async"),t.I0R(15,"div")(16,"nb-select",15),t.yuY(17,Ii,2,3,"nb-option",16),t.wVc(18,"keyvalue"),t.C$Y()(),t.I0R(19,"app-paginator",17),t.qCj("onchange",function(i){t.usT(e);const r=t.GaO();return t.CGJ(r.onPageChange(i))}),t.C$Y()()()}if(2&n){const e=a.ngIf,o=t.GaO();t.yG2(9),t.oRS(" ",null==e||null==e.task?null:e.task.identifier," "),t.yG2(2),t.E7m("ngForOf",null==e?null:e.data),t.yG2(2),t.E7m("ngIf",t.kDX(14,7,o.getWorkers)),t.yG2(3),t.E7m("formControl",o.exec_status_filter),t.yG2(),t.E7m("ngForOf",t.kDX(18,9,null==e||null==e.paginator||null==e.paginator.extras?null:e.paginator.extras.exec_status)),t.yG2(2),t.E7m("theme-class",o.themeClass)("paginator",null==e?null:e.paginator)}}let Oi=(()=>{class n{constructor(e,o,i){this.apiService=e,this.sidebarService=o,this.drawerMngr=i,this.themeClass="",this.exec_status_filter=new g.Ku(void 0)}onPageChange(e){console.log("onPageChange",e);let o=this.exec_status_filter.value;this.agent_details=this.apiService.getAssetJobs({asset_type:this.asset_type,asset_value:this.asset_value,page_number:e,...null!==o&&{exec_status:o}})}checkResults(e){this.apiService.getAgentJobResult(e?._id?.$oid).subscribe()}ngOnInit(){this.exec_status_filter.valueChanges.pipe((0,R.W)(this.exec_status_filter.value)).subscribe(e=>{this.onPageChange(1)})}close(){this.sidebarService.closeById(this.window_id)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}selectionEvent(e,o){console.log("selection_event",e,o),o&&(this.selected_repository=o,this.sidebarService.closeById(e))}runTool(){}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-fqdn-jobs"]],inputs:{themeClass:[t.Wk5.None,"theme-class","themeClass"],window_id:"window_id",asset_type:"asset_type",asset_value:"asset_value"},decls:8,vars:3,consts:[["jobResultTemplate",""],["loadingTemplate",""],["fxFill","",4,"ngIf"],[3,"job","window_id"],["fxFill","",3,"nbSpinner"],["fxFill",""],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],[1,"text-hint"],["class","subitsem","fxLayoutAlign","start","fxLayout","column",3,"click",4,"ngFor","ngForOf"],["fxLayoutAlign","end",2,"padding","0"],[4,"ngIf"],["optionsListClass","nb-themne-default","placeholder","State","size","medium","status","info","appearance","outline",3,"formControl"],["style","font-weight: 200; font-size: 0.7rem; text-transform: none  ",3,"value",4,"ngFor","ngForOf"],[3,"theme-class","paginator","onchange"],["fxLayoutAlign","start","fxLayout","column",1,"subitsem",3,"click"],["fxFlex","","fxLayoutGap","1rem","fxLayoutAlign","start start","fxLayout","row"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between",1,"text-interactive","text-hint"],["status","success","icon","checkmark-circle-2-outline",4,"ngIf"],["status","info","icon","play-circle-outline",4,"ngIf"],["status","danger","icon","stop-circle-outline",4,"ngIf"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],["fxFlex","","fxLayout","column"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between","class","text-hint",4,"ngFor","ngForOf"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between","class","text-interactive text-hint",4,"ngIf"],["shape","round","size","small","status","basic","nbButton","","ghost",""],["status","info","filled","","icon","diagonal-arrow-right-up-outline"],["icon","stop-circle-outline",4,"ngIf"],["status","success","icon","checkmark-circle-2-outline"],["status","info","icon","play-circle-outline"],["status","danger","icon","stop-circle-outline"],["fxLayoutGap","1rem","fxLayoutAlign","start space-between",1,"text-hint"],["appearance","outline","size","tiny",1,"buildcount",2,"text-transform","none",3,"status","text"],["icon","stop-circle-outline"],[4,"ngFor","ngForOf"],[2,"font-weight","200","font-size","0.7rem","text-transform","none",3,"value"]],template:function(o,i){1&o&&(t.yuY(0,di,1,2,"ng-template",null,0,t.gJz)(2,_i,1,1,"ng-template",null,1,t.gJz)(4,pi,1,1,"ng-template",null,1,t.gJz)(6,ki,20,11,"nb-card",2),t.wVc(7,"async")),2&o&&(t.yG2(6),t.E7m("ngIf",t.kDX(7,1,i.agent_details)))},dependencies:[c.ay,c.u_,l.KkC,l.q_v,l.GYx,l.UrE,g.ue,g.ug,l.yqL,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,l.EfU,l.aYD,j._,l.klp,l.KYA,N,c.a,c.uq],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\nnb-card[_ngcontent-%COMP%]{margin:0;border-radius:0!important}nb-card-header[_ngcontent-%COMP%]{padding:0;padding-right:1rem;overflow:hidden}button[_ngcontent-%COMP%]{text-transform:capitalize!important}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem.active[_ngcontent-%COMP%]{color:var(--text-primary-color);background:var(--background-basic-color-3)}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem[_ngcontent-%COMP%]:hover{background:var(--background-basic-color-3)}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:350;color:var(--text-hint-color)}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;height:26px;margin-right:20px;margin-left:10px}nb-list[_ngcontent-%COMP%]   nb-list-item.subitsem.disabled[_ngcontent-%COMP%]{opacity:.5}']})}}return n})();const Gi=["addFqdnTemplate"],Si=["toolSelectorTemplate"];function Ri(n,a){1&n&&t.wR5(0,"app-fqdn-create")}function Li(n,a){if(1&n&&t.wR5(0,"app-fqdn-jobs",4),2&n){const e=a.$implicit;t.E7m("window_id",null==e?null:e.window_id)("asset_value",null==e?null:e.fqdn)}}function Ei(n,a){if(1&n&&t.wR5(0,"app-scm-integration-tool-selector-for-execution",5),2&n){const e=a.$implicit;t.E7m("selected_assets",null==e?null:e.selected_assets)("window_id",null==e?null:e.window_id)("repository_id",null==e||null==e._id?null:e._id.$oid)("query_filters",null==e?null:e.query_filters)("exclude",null==e?null:e.exclude)}}function $i(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-list-item",7),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2);return t.CGJ(s.onItemClick(r))}),t.I0R(1,"div",8)(2,"div",9),t.wR5(3,"app-my-icon",10),t.C$Y(),t.I0R(4,"div",11)(5,"div",12),t.OEk(6),t.C$Y(),t.I0R(7,"div",13),t.OEk(8," Last scanned 2 days ago "),t.C$Y()(),t.I0R(9,"div",14)(10,"div",15),t.OEk(11),t.C$Y(),t.I0R(12,"div",15),t.OEk(13),t.C$Y(),t.I0R(14,"div",16),t.OEk(15),t.wVc(16,"keyvalue"),t.C$Y(),t.I0R(17,"button",17),t.qCj("click",function(i){const s=t.usT(e).$implicit,u=t.GaO(2),p=t.Gew(3);return u.openDrawer(p,s),t.CGJ(i.stopPropagation())}),t.wR5(18,"nb-icon",18),t.C$Y()()()()}if(2&n){const e=a.$implicit,o=t.GaO().ngIf;let i;t.eAK("selected",null!=o&&o.bulk_selected_mode_all?!(null!=o&&o.marked_ids.has(null==e||null==e._id?null:e._id.$oid)):null==o?null:o.marked_ids.has(null==e||null==e._id?null:e._id.$oid)),t.yG2(3),t.E7m("icon",(null==e?null:e.icon)||"/favicon.ico"),t.yG2(3),t.oRS(" ",null==e?null:e.fqdn," "),t.yG2(5),t.oRS(" ",null==e?null:e.finding," signals "),t.yG2(2),t.oRS(" ",null==e?null:e.count," assets "),t.yG2(2),t.oRS(" ",null==(i=t.kDX(16,7,null==e?null:e.ports))?null:i.length," Services ")}}function Ti(n,a){if(1&n&&(t.SAx(0),t.I0R(1,"nb-card")(2,"nb-card-body")(3,"nb-list"),t.yuY(4,$i,19,9,"nb-list-item",6),t.wVc(5,"async"),t.C$Y()()(),t.k70()),2&n){const e=t.GaO();t.yG2(4),t.E7m("ngForOf",t.kDX(5,1,e.fqdn))}}let Mi=(()=>{class n{get loading(){return this.headerService.loading}onPageChange(e){this.goto(e)}goto(e){this.headerService.loading=!0,this.loadMore$.next({...this.loadMore$.value,page_number:e})}get searchInput(){return this.headerService.searchFieldControl}onItemClick(e){this.state$.onClick(e)}runTool(){this.openDrawer(this.toolSelectorTemplate,{selected_assets:Array.from(this.state$.markedIds),exclude:this.state$.bulk_selected_mode_all,query_filters:{filters:{},query:this.searchInput.value}})}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}searchRepo(e,o=!1){this.headerService.loading=!0,console.log("reset-state",e),this.loadMore$.next({show_all:o,search_string:e,page_number:1})}onFilterSelected(e){this.searchRepo(this.headerService.searchFieldControl.value)}constructor(e,o,i,r){this.apiService=e,this.headerService=o,this.nbDialogService=i,this.drawerMngr=r,this.loadMore$=new b.g({show_all:!1,page_number:1,search_string:""}),this.btnSubscription$=v.wH.EMPTY,this.tag=f.wR.FQDN_LIST,this.fqdn=this.loadMore$.pipe((0,I.G)(s=>(this.headerService.loading=!0,s.page_number<1&&(s.page_number=1),this.apiService.getFqdnList({page:s.page_number,query:s.search_string,show_all:s.show_all}).pipe((0,w.k)(u=>(this.pagination_data=u.pagination,this.headerService.updatePaginatorStream(this.tag,u?.pagination),u?.data)),(0,y.y)(u=>{this.headerService.loading=!1}))))),this.searching=!1,this.threshHoldDelay=600}ngOnInit(){this.btnSubscription$=this.headerService.OnClickEvent.subscribe(e=>{let o=e?.data?.state;console.log("console",o),this.state||(this.state$=o,this.state=o?.onValudChanges),e.event==f.QH.ADD_NEW?this.open(this.addFqdnTemplate):this.state||(this.state$=o,this.state=o?.onValudChanges),console.log("apply-filter",e,o),e.event==f.QH.NOOP||(e.event==f.QH.SEARCH_FILTER?(console.log("apply-filter",e),this.onFilterSelected(e?.data)):e.event==f.QH.TOGGLE_FQDN_ALL?(console.log("apply-filter",e),this.searchRepo(this.headerService.searchFieldControl.value,!0)):e.event==f.QH.TOGGLE_FQDN_ROOT_DOMAIN?(console.log("apply-filter",e),this.searchRepo(this.headerService.searchFieldControl.value,!1)):e.event==f.QH.MULTI_SELECTION_MODE?(console.log("apply-filter",e),this.state$.switchSelectionMode(!0)):e.event==f.QH.CLEAR_SELECTION?(console.log("apply-filter",e),this.state$.deselectAll()):e.event==f.QH.SELECT_ALL?(console.log("apply-filter",e),this.state$.selectAll()):e.event==f.QH.TRIGGER_EXECUTION&&(console.log("apply-filter",e),this.runTool()))}),this.headerService.onPageChange(this.tag).subscribe(e=>{console.log("SCM_LIST","page_change",e),this.onPageChange(e)}),this.searchInput.valueChanges.pipe((0,Y.o)(this.threshHoldDelay),(0,D.a)(),(0,R.W)(this.searchInput.value),(0,y.y)(e=>{this.searching=!0})).subscribe(e=>{this.searchRepo(e)})}open(e,o){return this.nbDialogService.open(e,{context:o})}ngOnDestroy(){this.btnSubscription$?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(f.ae),t.GI1(l.KEA),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-fqdn-list"]],viewQuery:function(o,i){if(1&o&&(t.CC$(Gi,5),t.CC$(Si,5)),2&o){let r;t.wto(r=t.Gqi())&&(i.addFqdnTemplate=r.first),t.wto(r=t.Gqi())&&(i.toolSelectorTemplate=r.first)}},decls:8,vars:3,consts:[["addFqdnTemplate",""],["agentJobsTemplate",""],["toolSelectorTemplate",""],[4,"ngIf"],["asset_type","host",3,"window_id","asset_value"],["agent_filters","host","asset_type","host",3,"selected_assets","window_id","repository_id","query_filters","exclude"],["fxLayout","row","class","item","fxFlex","",3,"selected","click",4,"ngFor","ngForOf"],["fxLayout","row","fxFlex","",1,"item",3,"click"],["fxFlex","","fxLayoutAlign","center center","fxLayout","row"],[2,"margin-left","1rem"],[3,"icon"],["fxLayoutAlign","center","fxFlex","","fxLayout","column"],[1,"text-basic","caption-2",2,"text-transform","lowercase"],[1,"caption"],["fxLayoutGap","1rem","fxLayout","row","fxLayoutAlign","center center"],[1,"caption-2","text-hint"],[1,"caption-2","text-primary"],["shape","round","size","small","status","basic","nbButton","","ghost","",2,"padding","0.5rem",3,"click"],["status","info","icon","diagonal-arrow-right-up-outline"]],template:function(o,i){1&o&&(t.yuY(0,Ri,1,0,"ng-template",null,0,t.gJz)(2,Li,1,2,"ng-template",null,1,t.gJz)(4,Ei,1,5,"ng-template",null,2,t.gJz)(6,Ti,6,3,"ng-container",3),t.wVc(7,"async")),2&o&&(t.yG2(6),t.E7m("ngIf",t.kDX(7,1,i.state)))},dependencies:[c.ay,c.u_,st.A,l.KkC,l.iwb,l.UrE,l.sXj,d.sZ,d.cZ,d.qG,d.CA,l.EfU,l.aYD,Ot,ui,Oi,c.a,c.uq],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.item[_ngcontent-%COMP%]{background:var(--background-basic-color-2)!important;padding:.5rem 0rem;border-style:solid;border-left-color:var(--color-primary-500);border-width:0px}.item.selected[_ngcontent-%COMP%]{border-left-width:8px}nb-card[_ngcontent-%COMP%]{padding:0;margin:0;border:0}nb-card-header[_ngcontent-%COMP%]{background:var(--background-basic-color-3)!important;margin:0;padding:4px}nb-card-body[_ngcontent-%COMP%]{padding:0rem;margin:0;border:0}button[_ngcontent-%COMP%]{text-transform:none!important}']})}}return n})();var ct=_(7724),Gt=_(8595);const Ai=["createDast"],Pi=["createSast"],Fi=["createPentest"];function Yi(n,a){if(1&n&&t.wR5(0,"app-create-dast",6),2&n){const e=a.context,o=t.GaO();t.E7m("window_id",e.window_id)("application_id",o.id)}}function Di(n,a){if(1&n&&t.wR5(0,"app-create-pentest",6),2&n){const e=t.GaO();t.E7m("window_id",e.context.window_id)("application_id",e.id)}}function qi(n,a){if(1&n&&t.wR5(0,"app-create-sast",7),2&n){const e=a.context,o=t.GaO();t.E7m("window_id",e.window_id)("debug",o.debug)("application_id",o.id)}}function Ji(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",10),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2);return t.CGJ(s.choose(r))}),t.I0R(1,"div",11),t.wR5(2,"nb-icon",12),t.C$Y(),t.I0R(3,"div",13),t.OEk(4),t.C$Y()()}if(2&n){const e=a.$implicit,o=t.GaO(2);t.eAK("selected",null==o.selected_ids?null:o.selected_ids.has(null==e||null==e._id?null:e._id.$oid)),t.yG2(2),t.E7m("icon",null==e?null:e.icon),t.yG2(2),t.oRS(" ",null==e?null:e.title," ")}}function zi(n,a){if(1&n&&(t.I0R(0,"div",8),t.yuY(1,Ji,5,4,"div",9),t.C$Y()),2&n){const e=a.ngIf;t.yG2(),t.E7m("ngForOf",e)}}let St=(()=>{class n extends Gt.y{ngOnInit(){super.ngOnInit(),console.log("popoverComponentRef",this.ref)}constructor(e,o,i,r){super(e,o,i),this.apiService=i,this.sidebarService=r,this.loading=!1,this.selected_ids$=new Set,this.onApply$=new t._w7,this.debug=!1,this.data=[],this.applyBtnDisabled=!0,this.Icons=ct.Ww}ngAfterViewInit(){}open(e){this.ref.hide(),console.log("hidehide",this.ref),this.sidebarService.open(e)}choose(e){this.onApply$.next(e),this.ref.hide()}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(t.GMv),t.GI1(t.q87),t.GI1(h.Ww),t.GI1(S.S))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-integration-list-selection-menu"]],viewQuery:function(o,i){if(1&o&&(t.CC$(Ai,5),t.CC$(Pi,5),t.CC$(Fi,5)),2&o){let r;t.wto(r=t.Gqi())&&(i.createDastTemplate=r.first),t.wto(r=t.Gqi())&&(i.createSastTemplate=r.first),t.wto(r=t.Gqi())&&(i.createPentestTemplate=r.first)}},inputs:{loading:"loading",selected_ids$:[t.Wk5.None,"selected","selected_ids$"],menuItems:"menuItems",debug:"debug",ref:"ref"},outputs:{onApply$:"onapply"},features:[t.eg9],decls:13,vars:4,consts:[["createDast",""],["createPentest",""],["createSast",""],[3,"nbSpinner"],[1,"subtitle"],["class","container ","fxFlex","","fxLayout","column",4,"ngIf"],[3,"window_id","application_id"],[3,"window_id","debug","application_id"],["fxFlex","","fxLayout","column",1,"container"],["class","item ","fxLayout","row","fxFlex","","nbButton","","fxLayoutAlign","start center","status","basic",3,"selected","click",4,"ngFor","ngForOf"],["fxLayout","row","fxFlex","","nbButton","","fxLayoutAlign","start center","status","basic",1,"item",3,"click"],[2,"padding","5px"],["status","info",1,"icon",3,"icon"],[1,"subtitle-2","text-basic"]],template:function(o,i){1&o&&(t.yuY(0,Yi,1,2,"ng-template",null,0,t.gJz)(2,Di,1,2,"ng-template",null,1,t.gJz)(4,qi,1,3,"ng-template",null,2,t.gJz),t.I0R(6,"nb-card",3)(7,"nb-card-header")(8,"div",4),t.OEk(9," More Actions "),t.C$Y()(),t.I0R(10,"nb-card-body"),t.yuY(11,zi,2,1,"div",5),t.wVc(12,"async"),t.C$Y()()),2&o&&(t.yG2(6),t.E7m("nbSpinner",i.loading),t.yG2(5),t.E7m("ngIf",t.kDX(12,2,i.menuItems)))},dependencies:[c.ay,c.u_,l.KkC,l.iwb,l.GYx,l.UrE,l.yqL,d.sZ,d.qG,d.CA,c.a],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.container[_ngcontent-%COMP%]{margin:0!important;padding:0!important;width:230px;max-width:230px}nb-card[_ngcontent-%COMP%]{margin:0!important}nb-card-body[_ngcontent-%COMP%]{padding:0!important}button[_ngcontent-%COMP%]{text-transform:none!important;margin:0!important;padding:0!important;padding:.2rem!important;margin-bottom:.3rem!important;margin-top:.2rem!important}.icon[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:20px}.item.selected[_ngcontent-%COMP%]{border-left-color:var(--color-primary-400);border-style:solid;border-width:0px;border-left-width:8px}.apply[_ngcontent-%COMP%]{padding:.5rem!important}']})}}return n})();const Bi=["popoverRef"],ji=["popoverRefMore"];function Wi(n,a){1&n&&t.wR5(0,"app-loading-card")}function Ki(n,a){if(1&n){const e=t.KQA();t.I0R(0,"app-integration-list-selection-menu",3),t.qCj("onapply",function(i){t.usT(e);const r=t.GaO();return t.CGJ(r.onMenuItemSelected(i))}),t.wVc(1,"async"),t.C$Y()}if(2&n){const e=t.GaO();t.E7m("loading",t.kDX(1,6,e.isLoading))("selected",e.filter_selected_scm_ids$)("debug",e.debug)("menuItems",e.extendedMenuItems)("ref",e.popoverRefMoreDirective)("id",e.applicationId)}}function Qi(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",11)(1,"nb-form-field")(2,"button",12),t.wVc(3,"async"),t.wR5(4,"nb-icon",13),t.C$Y(),t.I0R(5,"input",14),t.qCj("keyup.escape",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.clearSearch())}),t.C$Y(),t.wR5(6,"nb-toggle",15,16),t.C$Y()()}if(2&n){const e=t.GaO(2);t.yG2(2),t.E7m("nbSpinner",t.kDX(3,4,e.isLoading)),t.yG2(3),t.E7m("formControl",e.header.searchFieldControl),t.yG2(),t.E7m("formControl",e.toggleViewRootOrAllControl)("checked",!0)}}function Hi(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",19),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.onClick())}),t.wR5(1,"nb-icon",20),t.OEk(2," Create "),t.C$Y()}}function Ui(n,a){if(1&n){const e=t.KQA();t.I0R(0,"button",21),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.triggerRun())}),t.OEk(1," Run "),t.wR5(2,"nb-icon",22),t.C$Y()}}function Xi(n,a){if(1&n&&(t.I0R(0,"div"),t.yuY(1,Hi,3,0,"ng-template",null,17,t.gJz)(3,Ui,3,0,"button",18),t.C$Y()),2&n){const e=a.ngIf,o=t.Gew(2),i=t.GaO(2);t.yG2(3),t.E7m("ngIf",null!=i.state$&&i.state$.bulk_selected_mode_all?(null==i.state$||null==i.state$.marked_ids?null:i.state$.marked_ids.size)!=(null==e?null:e.totalItems):null==i.state$||null==i.state$.marked_ids?null:i.state$.marked_ids.size)("ngIfElse",o)}}function Vi(n,a){if(1&n&&(t.I0R(0,"div",4),t.yuY(1,Qi,8,6,"div",5),t.I0R(2,"div"),t.wR5(3,"app-paginator",6),t.C$Y(),t.I0R(4,"div")(5,"button",7,8),t.wR5(7,"nb-icon",9),t.C$Y()(),t.yuY(8,Xi,4,2,"div",10),t.wVc(9,"async"),t.C$Y()),2&n){const e=t.GaO(),o=t.Gew(3);t.yG2(),t.E7m("ngIf",!(null!=e.state$&&e.state$.selection_mode)),t.yG2(2),t.E7m("tag",e.tag),t.yG2(2),t.E7m("nbPopover",o),t.yG2(3),t.E7m("ngIf",t.kDX(9,4,e.paginator))}}const Ni=[{path:"",component:J,data:{header:jo},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"init/:scm",component:m},{path:"fqdn",component:Mi,data:{subheader:(()=>{class n{get isLoading(){return this.header.searchFieldControlLoading}clearSearch(){this.header.searchFieldControl.setValue("")}constructor(e,o){this.header=e,this.apiService=o,this.toggleViewRootOrAllControl=new g.Ku(!1),this.extendedMenuItems=(0,F.of)([{id:f.QH.SELECT_ALL,alias:"select_all",title:"Select All",icon:"done-all-outline"},{id:f.QH.CLEAR_SELECTION,alias:"clear_selection",title:"Clear Selection",icon:"eye-off-outline"},{id:f.QH.MULTI_SELECTION_MODE,alias:"multiple_selection_mode",title:"Multiple Select",icon:"eye-outline"}]),this.tag=f.wR.FQDN_LIST,this.paginator=this.header.getPaginator(this.tag),this.state$=new kt(this.header),this.state=this.state$.onValudChanges,this.menuItems=this.apiService.getScmAppPassword("all",{verified:!0,auth_type:"password"}),this.threshHoldDelay=300}ngAfterViewInit(){}ngOnInit(){this.header.triggerEvent(f.QH.NOOP,{state:this.state$}),this.toggleViewRootOrAllControl.valueChanges.pipe((0,Y.o)(this.threshHoldDelay),(0,D.a)(),(0,R.W)(this.toggleViewRootOrAllControl.value)).subscribe(e=>{this.header.triggerEvent(1==e?f.QH.TOGGLE_FQDN_ALL:f.QH.TOGGLE_FQDN_ROOT_DOMAIN,{state:this.state$})})}onClick(){this.header.triggerEvent(f.QH.ADD_NEW,{state:this.state$})}triggerRun(){this.header.triggerEvent(f.QH.TRIGGER_EXECUTION,{state:this.state})}onFilterSelected(e){console.log("onFilterSelected",e,this.state$.bulk_selected_mode_all),this.state$.resetState(),console.log("onFilterSelected",e,this.state$.bulk_selected_mode_all),this.state$.filter_selected_scm_ids=e,this.invalidateEventData()}invalidateEventData(){this.header.loading=!0,this.header.triggerEvent(f.QH.SEARCH_FILTER,{state:this.state})}onMenuItemSelected(e){console.log("onMenuItemSelected",e),this.header.triggerEvent(e?.id,{})}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(f.ae),t.GI1(h.Ww))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-fqdn-list-header"]],viewQuery:function(o,i){if(1&o&&(t.CC$(Bi,5),t.CC$(ji,5)),2&o){let r;t.wto(r=t.Gqi())&&(i.popoverDirective=r.first),t.wto(r=t.Gqi())&&(i.popoverRefMoreDirective=r.first)}},decls:6,vars:3,consts:[["loadingCard",""],["integrationmoreMenuTemplate",""],["fxLayoutGap","0.4rem","fxLayout","row","fxLayoutAlign","end center",4,"ngIf"],[3,"loading","selected","debug","menuItems","ref","id","onapply"],["fxLayoutGap","0.4rem","fxLayout","row","fxLayoutAlign","end center"],["fxLayout","row","fxFlex","",4,"ngIf"],[3,"tag"],["nbPopoverPlacement","left","nbPopoverShowStateChange","horizontal","status","basic","size","small","nbButton","","ghost","",3,"nbPopover"],["popoverRefMore","nbPopover"],["icon","more-vertical-outline"],[4,"ngIf"],["fxLayout","row","fxFlex",""],["nbPrefix","","nbButton","","control","","status","info","ghost","",3,"nbSpinner"],["icon","search-outline"],["shape","round","type","text","nbInput","","fieldSize","small","fullWidth","","status","basic","placeholder","Search",3,"formControl","keyup.escape"],["nbSuffix","","labelPosition","end","status","basic",2,"margin-right","2rem",3,"formControl","checked"],["toggleFqdn",""],["aaddBtnTemplate",""],["status","info","size","small","nbButton","","filled","",3,"click",4,"ngIf","ngIfElse"],["size","small","shape","semi-rounsd","nbButton","",1,"accent",3,"click"],["icon","plus-outline",2,"margin-right","10px"],["status","info","size","small","nbButton","","filled","",3,"click"],["icon","arrow-right"]],template:function(o,i){1&o&&(t.yuY(0,Wi,1,0,"ng-template",null,0,t.gJz)(2,Ki,2,8,"ng-template",null,1,t.gJz)(4,Vi,10,6,"div",2),t.wVc(5,"async")),2&o&&(t.yG2(4),t.E7m("ngIf",t.kDX(5,1,i.state)))},dependencies:[c.u_,l.UrE,g.ot,g.ue,g.ug,l.yqL,l.eAh,l.QLb,l.yAs,l.GAA,l.sXj,d.sZ,d.cZ,d.qG,d.CA,j._,l.w57,B.Q,l.sHG,St,c.a],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.accent[_ngcontent-%COMP%]{background-color:var(--button-accent-background-color)!important;color:var(--button-accent-text-color)!important;border:none;font-weight:var(--button-accent-font-weight)}.accent[_ngcontent-%COMP%]:hover{background-color:var(--button-accent-background-color-hover)!important}button[_ngcontent-%COMP%]{border-radius:4px}']})}}return n})()}},{path:"assets",component:xt},{path:"integrate",component:xt},{path:"extension",component:_t},{path:"web-apps",component:to},{path:"list",component:z,data:{subheader:rt}},{path:"test",component:It,data:{subheader:rt}},{path:"workers",component:Po},{path:"bitbucket",component:z},{path:"gitlab",component:z},{path:"github",component:z},{path:"**",redirectTo:"extension",pathMatch:"full"}]}];let Zi=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.a4G({type:n})}static{this.\u0275inj=t.s3X({imports:[C.qQ.forChild(Ni),C.qQ]})}}return n})();var ta=_(7312);let ea=(()=>{class n{constructor(){this.percentColors=[{pct:0,color:{r:43,g:200,b:25}},{pct:.5,color:{r:255,g:178,b:0}},{pct:1,color:{r:240,g:14,b:74}}]}getColorForPercentage(e){let o;return o=e<30?this.percentColors[0].color:e<60?this.percentColors[1].color:this.percentColors[2].color,"rgb("+[o.r,o.g,o.b].join(",")+")"}transform(e,...o){if(null==e&&(e=""),o.indexOf("color")>=0){switch(e.toString().toLowerCase()){case"requested":return"#FFCC00";case"enqueued":return"#0088FF";case"declined":return"#FF3E3E";case"completed":case"success":return"#4CAF50";case"failed":return"#9E9E9E";case"processing":return"#FFA500"}return"#bfbfc3"}switch(e.toString().toLowerCase()){case"low":return"basic";case"medium":return"warning";case"high":case"critical":return"danger"}return"basic"}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=t.UTH({name:"state",type:n,pure:!0})}}return n})();const na=n=>({$oid:n}),oa=n=>({_id:n});function ia(n,a){if(1&n&&t.wR5(0,"app-agent-job-result",12),2&n){const e=a.$implicit;t.E7m("job",t.S45(4,oa,t.S45(2,na,null==e?null:e._id)))("window_id",null==e?null:e.window_id)}}function aa(n,a){if(1&n&&t.wR5(0,"app-repository-branch-selector-chooser",13),2&n){const e=a.$implicit,o=t.GaO();t.E7m("window_id",null==e?null:e.window_id)("repository_id",o.repository_id)}}function ra(n,a){1&n&&t.wR5(0,"app-loading-card")}function sa(n,a){if(1&n&&(t.I0R(0,"div",27),t.OEk(1),t.wVc(2,"elpasedTime"),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.oRS(" ",t.kDX(2,1,null==e?null:e.created_at)," ago ")}}function la(n,a){1&n&&(t.I0R(0,"div",27),t.OEk(1," Can't fetch date "),t.C$Y())}function ca(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-list-item",22),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2),u=t.Gew(1);return t.CGJ(s.openDrawer(u,r))}),t.wVc(1,"state"),t.I0R(2,"div",23)(3,"div",24),t.OEk(4),t.C$Y(),t.yuY(5,sa,3,3,"div",25)(6,la,2,0,"ng-template",null,26,t.gJz),t.C$Y()()}if(2&n){const e=a.$implicit,o=t.Gew(7),i=t.GaO(2);t.m4B("border-left-color",t.g7$(1,7,null==e?null:e.exec_status,"color")),t.eAK("selected",null!=i.bulk_selected_mode_all&&i.bulk_selected_mode_all.value?!i.marked_ids.has(null==i.agent?null:i.agent._id):i.marked_ids.has(null==i.agent?null:i.agent._id)),t.yG2(4),t.oRS(" ",null==e||null==e.request_task?null:e.request_task.identifier," "),t.yG2(),t.E7m("ngIf",null==e?null:e.created_at)("ngIfElse",o)}}function ua(n,a){if(1&n&&(t.I0R(0,"nb-card-body")(1,"div",14)(2,"div",8),t.OEk(3," Notes "),t.I0R(4,"div",15),t.OEk(5," (Optional) "),t.C$Y()(),t.I0R(6,"div")(7,"nb-form-field"),t.wR5(8,"nb-icon",16)(9,"input",17),t.C$Y()(),t.I0R(10,"div",8),t.OEk(11," Agents "),t.wR5(12,"div",18),t.C$Y(),t.I0R(13,"div",19)(14,"nb-list",20),t.yuY(15,ca,8,10,"nb-list-item",21),t.C$Y()()()()),2&n){const e=a.ngIf,o=t.GaO();t.yG2(9),t.E7m("value",null==o.selected_repository?null:o.selected_repository.title),t.yG2(6),t.E7m("ngForOf",e)}}let da=(()=>{class n{onPageChange(e){}constructor(e,o,i){this.apiService=e,this.sidebarService=o,this.drawerMngr=i,this.loading=!0,this.themeClass="",this.selection_mode=!0,this.bulk_selected_mode_all=new g.Ku(!1),this.marked_ids=new Set,this.tags=new Set([])}ngOnInit(){this.asset_task_details=this.apiService.getAgentTaskFiltered({code_repository:this.selected_assets}).pipe((0,y.y)(e=>{this.loading=!0}),(0,w.k)(e=>(this.pagination_data=e.pagination,e.result)),(0,y.y)(e=>{this.loading=!1}))}close(){this.sidebarService.closeById(this.window_id)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}jsonToQueryParams(e){const o=JSON.stringify(e);return`data=${encodeURIComponent(o)}`}runTool(){let e=new lt.i4;e=e.set("exclude",this.exclude),e=e.set("advanced_filters",decodeURIComponent(JSON.stringify(this.query_filters?.filters))),Array.from(this.marked_ids.values()).forEach(o=>{this.apiService.executeAgents(e,{code_repository:this.selected_assets}).subscribe(console.log)})}onItemClick(e){console.log("marked_ids",this.marked_ids),this.marked_ids.has(e?._id)?this.marked_ids.delete(e?._id):(this.marked_ids.clear(),this.marked_ids.add(e?._id))}onTagRemove(e){this.tags.delete(e.text)}onTagAdd({value:e,input:o}){e&&this.tags.add(e),o.nativeElement.value=""}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-agent-task-list"]],inputs:{themeClass:[t.Wk5.None,"theme-class","themeClass"],window_id:"window_id",repository_id:"repository_id",query_filters:"query_filters",exclude:"exclude",selected_assets:"selected_assets",selection_mode:"selection_mode"},decls:18,vars:6,consts:[["jobResultTemplate",""],["repositoryListTemplate",""],["loadingTemplate",""],["id","create-finding","fxFill","",1,"nb-theme-default",3,"nbSpinner"],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],[4,"ngIf"],["fxLayoutAlign","end center",2,"padding","0","margin","0"],[3,"theme-class","paginator","onchange"],[3,"job","window_id"],[3,"window_id","repository_id"],["fxLayoutGap","1rem","fxLayout","column","fxFlex",""],[1,"caption-2","text-hint"],["nbPrefix","","icon","pricetags-outline","pack","eva"],["fullWidth","","placeholder","Notes","type","text","nbInput","",3,"value"],[1,"text-hint"],["fxFlex",""],["fxLayout","row","fxLayout","column"],["fxLayout","row","class","item","fxFlex","100%",3,"border-left-color","selected","click",4,"ngFor","ngForOf"],["fxLayout","row","fxFlex","100%",1,"item",3,"click"],["fxLayout","column"],[1,"subtitle-2"],["class","caption-2",4,"ngIf","ngIfElse"],["modateTemplate",""],[1,"caption-2"]],template:function(o,i){1&o&&(t.yuY(0,ia,1,6,"ng-template",null,0,t.gJz)(2,aa,1,2,"ng-template",null,1,t.gJz)(4,ra,1,0,"ng-template",null,2,t.gJz),t.I0R(6,"nb-card",3)(7,"nb-card-header")(8,"div",4)(9,"button",5),t.qCj("click",function(){return i.close()}),t.wR5(10,"nb-icon",6),t.C$Y(),t.I0R(11,"div",7)(12,"div",8),t.OEk(13," Task Details "),t.C$Y()()()(),t.yuY(14,ua,16,2,"nb-card-body",9),t.wVc(15,"async"),t.I0R(16,"nb-card-footer",10)(17,"app-paginator",11),t.qCj("onchange",function(s){return i.onPageChange(s)}),t.C$Y()()()),2&o&&(t.yG2(6),t.E7m("nbSpinner",i.loading),t.yG2(8),t.E7m("ngIf",t.kDX(15,4,i.asset_task_details)),t.yG2(3),t.E7m("theme-class",i.themeClass)("paginator",i.pagination_data))},dependencies:[c.ay,c.u_,l.KkC,l.iwb,l.q_v,l.GYx,l.UrE,l.yqL,l.eAh,l.QLb,l.GAA,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,l.EfU,l.aYD,j._,B.Q,K,N,c.a,vt,ea],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.item[_ngcontent-%COMP%]{background:var(--background-basic-color-2)!important;padding:1rem 1rem .5rem;margin-bottom:.5rem;border-left-color:var(--color-danger-500);border-width:0px}.item.selected[_ngcontent-%COMP%]{border-left-width:8px}nb-card[_ngcontent-%COMP%]{padding:0;margin:0;border:0}nb-card-header[_ngcontent-%COMP%]{background:var(--background-basic-color-3)!important;margin:0;padding:4px}.item[_ngcontent-%COMP%]{background:var(--background-basic-color-2)!important;padding:1rem 1rem .5rem;margin-bottom:.5rem;border-left-width:8px}nb-card-body[_ngcontent-%COMP%]{padding:.7rem;margin:0;border:0}button[_ngcontent-%COMP%]{text-transform:none!important}']})}}return n})();const _a=["createDast"],pa=["createSast"],ga=["createPentest"];function ma(n,a){if(1&n&&t.wR5(0,"app-create-dast",10),2&n){const e=a.context,o=t.GaO();t.E7m("window_id",e.window_id)("application_id",o.id)}}function fa(n,a){if(1&n&&t.wR5(0,"app-create-pentest",10),2&n){const e=t.GaO();t.E7m("window_id",e.context.window_id)("application_id",e.id)}}function ha(n,a){if(1&n&&t.wR5(0,"app-create-sast",11),2&n){const e=a.context,o=t.GaO();t.E7m("window_id",e.window_id)("debug",o.debug)("application_id",o.id)}}function ba(n,a){1&n&&t.wR5(0,"app-loading-card")}function ya(n,a){if(1&n){const e=t.KQA();t.I0R(0,"div",14),t.qCj("click",function(){const r=t.usT(e).$implicit,s=t.GaO(2);return t.CGJ(s.markSelect(r))}),t.I0R(1,"div",15),t.wR5(2,"app-my-icon",16),t.C$Y(),t.I0R(3,"div",17),t.OEk(4),t.C$Y()()}if(2&n){const e=a.$implicit,o=t.GaO(2);t.eAK("selected",null==o.selected_ids?null:o.selected_ids.has(null==e||null==e._id?null:e._id.$oid)),t.yG2(2),t.E7m("icon",null==e?null:e.icon),t.yG2(2),t.oRS(" ",null==e?null:e.alias," ")}}function Ca(n,a){if(1&n&&(t.I0R(0,"div",12),t.yuY(1,ya,5,4,"div",13),t.C$Y()),2&n){const e=a.ngIf;t.yG2(),t.E7m("ngForOf",e)}}let Rt=(()=>{class n extends Gt.y{onApply(){this.onApply$.next(this.selected_ids),this.invalidateApplyButton(),this.ref.hide()}ngOnInit(){super.ngOnInit(),console.log("popoverComponentRef",this.ref,this.state)}markSelect(e){this.selected_ids.has(e?._id?.$oid)?this.selected_ids.delete(e?._id?.$oid):this.selected_ids.add(e?._id?.$oid),this.invalidateApplyButton()}constructor(e,o,i,r){super(e,o,i),this.apiService=i,this.sidebarService=r,this.loading=!1,this.onApply$=new t._w7,this.debug=!1,this.data=[],this.selected_ids=new Set,this.applyBtnDisabled=!0,this.Icons=ct.Ww}ngAfterViewInit(){this.debug&&this.open(this.createSastTemplate),this.selected_ids=structuredClone(this.state.filter_selected_scm_ids),this.invalidateApplyButton()}invalidateApplyButton(){this.applyBtnDisabled=(0,ct.Ks)(this.selected_ids,this.state.filter_selected_scm_ids)}open(e){this.ref.hide(),console.log("hidehide",this.ref),this.sidebarService.open(e)}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(t.GMv),t.GI1(t.q87),t.GI1(h.Ww),t.GI1(S.S))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-scm-integrationfilter-menu"]],viewQuery:function(o,i){if(1&o&&(t.CC$(_a,5),t.CC$(pa,5),t.CC$(ga,5)),2&o){let r;t.wto(r=t.Gqi())&&(i.createDastTemplate=r.first),t.wto(r=t.Gqi())&&(i.createSastTemplate=r.first),t.wto(r=t.Gqi())&&(i.createPentestTemplate=r.first)}},inputs:{loading:"loading",state:"state",menuItems:"menuItems",debug:"debug",ref:"ref"},outputs:{onApply$:"onapply"},features:[t.eg9],decls:19,vars:6,consts:[["createDast",""],["createPentest",""],["createSast",""],[3,"nbSpinner"],[1,"subtitle"],[2,"padding","6px"],["fxLayoutAlign","end"],["size","medium","nbButton","","ghost","",1,"apply",2,"text-transform","none !important",3,"disabled","click"],["loadingTemplate",""],["class","container ","fxFlex","","fxLayout","column",4,"ngIf","ngIfElse"],[3,"window_id","application_id"],[3,"window_id","debug","application_id"],["fxFlex","","fxLayout","column",1,"container"],["class","item ","fxLayout","row","fxFlex","","nbButton","","fxLayoutAlign","start center","status","basic",3,"selected","click",4,"ngFor","ngForOf"],["fxLayout","row","fxFlex","","nbButton","","fxLayoutAlign","start center","status","basic",1,"item",3,"click"],[2,"padding","5px"],[3,"icon"],[1,"subtitle-2","text-basic"]],template:function(o,i){if(1&o&&(t.yuY(0,ma,1,2,"ng-template",null,0,t.gJz)(2,fa,1,2,"ng-template",null,1,t.gJz)(4,ha,1,3,"ng-template",null,2,t.gJz),t.I0R(6,"nb-card",3)(7,"nb-card-header")(8,"div",4),t.OEk(9," Filters "),t.C$Y()(),t.I0R(10,"nb-card-footer",5)(11,"div",6)(12,"button",7),t.qCj("click",function(){return i.onApply()}),t.OEk(13," Apply "),t.C$Y()()(),t.I0R(14,"nb-card-body"),t.yuY(15,ba,1,0,"ng-template",null,8,t.gJz)(17,Ca,2,1,"div",9),t.wVc(18,"async"),t.C$Y()()),2&o){const r=t.Gew(16);t.yG2(6),t.E7m("nbSpinner",i.loading),t.yG2(6),t.E7m("disabled",i.applyBtnDisabled),t.yG2(5),t.E7m("ngIf",t.kDX(18,4,i.menuItems))("ngIfElse",r)}},dependencies:[c.ay,c.u_,st.A,l.KkC,l.iwb,l.q_v,l.GYx,l.yqL,l.sXj,d.sZ,d.qG,d.CA,B.Q,c.a],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\n.container[_ngcontent-%COMP%]{margin:0!important;padding:0!important;width:230px;max-width:230px}nb-card[_ngcontent-%COMP%]{margin:0!important}nb-card-body[_ngcontent-%COMP%]{padding:0!important}button[_ngcontent-%COMP%]{text-transform:none!important;margin:0!important;padding:0!important;padding:.2rem!important;margin-bottom:.3rem!important;margin-top:.2rem!important}.item.selected[_ngcontent-%COMP%]{border-left-color:var(--color-primary-400);border-style:solid;border-width:0px;border-left-width:8px}.apply[_ngcontent-%COMP%]{padding:.5rem!important}']})}}return n})();function va(n,a){1&n&&t.wR5(0,"nb-card",2),2&n&&t.E7m("nbSpinner",!0)}function xa(n,a){if(1&n){const e=t.KQA();t.SAx(0),t.I0R(1,"div",9)(2,"div",20)(3,"div",28),t.OEk(4),t.C$Y(),t.I0R(5,"app-auto-save-formfield",29),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(4);return t.CGJ(i.refresh())}),t.C$Y()()(),t.k70()}if(2&n){const e=a.$implicit,o=t.GaO().$implicit,i=t.GaO().$implicit,r=t.GaO().ngIf,s=t.GaO();t.yG2(4),t.oRS(" ",null==e?null:e.key," "),t.yG2(),t.E7m("placeholder",null==e?null:e.key)("showIcon",!0)("activated",!1)("updateDataFn",s.updateInstalledAgentConfigIntegrationConfig(null==i||null==i._id?null:i._id.$oid,null==r?null:r._id,null==o?null:o.key,null==e?null:e.key))("value",(null==i||null==i.integration_config||null==i.integration_config[null==o?null:o.key]?null:i.integration_config[null==o?null:o.key][null==e?null:e.key])||(null==e?null:e.value))}}function wa(n,a){if(1&n&&(t.SAx(0),t.yuY(1,xa,6,6,"ng-container",27),t.wVc(2,"keyvalue"),t.k70()),2&n){const e=a.$implicit,o=t.GaO(2).ngIf;t.yG2(),t.E7m("ngForOf",t.kDX(2,1,null==o||null==o.nodes[e.key]?null:o.nodes[e.key].integration_config))}}function Ia(n,a){if(1&n){const e=t.KQA();t.SAx(0),t.I0R(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20)(5,"div",21)(6,"div"),t.wR5(7,"img",22),t.C$Y(),t.I0R(8,"div",23),t.OEk(9),t.C$Y()(),t.I0R(10,"div",9)(11,"div",24)(12,"app-auto-save-formfield",25),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.refresh())}),t.C$Y()()(),t.I0R(13,"div",9)(14,"div",24)(15,"app-auto-save-formfield",26),t.qCj("invalidate",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.refresh())}),t.C$Y()()(),t.yuY(16,wa,3,3,"ng-container",27),t.wVc(17,"keyvalue"),t.C$Y()()()(),t.k70()}if(2&n){const e=a.$implicit,o=t.GaO().ngIf,i=t.GaO();t.yG2(),t.m4B("border-color",null==e?null:e.primary_color),t.yG2(6),t.E7m("src",null==e?null:e.icon,t.K6U),t.yG2(2),t.oRS(" ",null==e?null:e.scm_source," "),t.yG2(3),t.E7m("showIcon",!0)("activated",!1)("updateDataFn",i.updateInstalledAgent(null==e||null==e._id?null:e._id.$oid,null==o?null:o._id,"title"))("value",null==e?null:e.title),t.yG2(3),t.E7m("showIcon",!0)("activated",!1)("updateDataFn",i.updateInstalledAgent(null==e||null==e._id?null:e._id.$oid,null==o?null:o._id,"description"))("value",null==e?null:e.description),t.yG2(),t.E7m("ngForOf",t.kDX(17,13,null==o?null:o.nodes))}}function ka(n,a){if(1&n){const e=t.KQA();t.I0R(0,"nb-card",3)(1,"nb-card-header")(2,"div",4)(3,"button",5),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.close())}),t.wR5(4,"nb-icon",6),t.C$Y(),t.I0R(5,"div",7)(6,"div",8),t.OEk(7," Agent Integrations "),t.C$Y(),t.I0R(8,"div",9),t.OEk(9),t.C$Y()()()(),t.I0R(10,"nb-card-body",10)(11,"div",11),t.yuY(12,Ia,18,15,"ng-container",12),t.wVc(13,"async"),t.C$Y()(),t.I0R(14,"nb-card-footer",13)(15,"button",14),t.qCj("click",function(){const r=t.usT(e).ngIf,s=t.GaO();return t.CGJ(s.createIntegration(null==r?null:r._id))}),t.I0R(16,"div",15),t.OEk(17," Add "),t.C$Y(),t.wR5(18,"nb-icon",16),t.C$Y()()()}if(2&n){const e=t.GaO(),o=t.Gew(1);t.yG2(9),t.oRS(" ",null==e.agent?null:e.agent.identifier," "),t.yG2(3),t.E7m("ngForOf",t.kDX(13,3,e.installed_agents))("ngForElse",o)}}let Oa=(()=>{class n{createNewAuth(e){}revalidateOAuth(e){if("oauth"==e?.type){let o=this.authorize_url.replace("{state}",e?._id?.$oid);console.log("revalidateOAuth",e,o),window.location.href=o}else if("password"==e?.type){let o={};return o.auth_type=this.auth_type,this.apiService.updateScmCredentials(this.scm,e?._id?.$oid,o).subscribe()}}constructor(e,o,i){this.apiService=e,this.sidebarService=o,this.drawerMngr=i,this.createIntegration=r=>{this.apiService.createInstalleddAgentList({agent_id:r}).subscribe(s=>{this.refresh()})},this.updateCredentials=(r,s)=>u=>{let p={};return p[r]=u,p.auth_type=this.auth_type,this.apiService.updateScmCredentials(this.scm,s,p)},this.installed_agents$=[{_id:"",alias:"",scm_providers:[],integration_config:{hello:"world",hello2:"world2",hello3:"world3"}}],this.refreshHandler=new b.g(!0)}ngOnInit(){this.agent_details=this.apiService.getAgent(this.agent_id).pipe((0,w.k)(e=>e)),this.installed_agents=this.refreshHandler.pipe((0,I.G)(e=>this.apiService.getInstalleddAgentList(this.agent_id)))}updateInstalledAgent(e,o,i){return r=>{let s={};return s.agent_id=o,s[i]=r,this.apiService.updateInstalleddAgentList(e,s)}}updateInstalledAgentConfigIntegrationConfig(e,o,i,r){return s=>{let u={integration_config:{}};return u.integration_config[i]={},u.integration_config[i][r]=s,u.agent_id=o,this.apiService.updateInstalleddAgentList(e,u)}}refresh(){this.refreshHandler.next(!0)}close(){this.sidebarService.closeById(this.window_id)}openDrawer(e,o,i="left",r,s=!0,u=!0,p){console.log("open-drawer",o),this.drawerMngr.create({direction:G.a.Left,template:e,size:r,context:o,closeOnOutsideClick:s,parentContainer:p,isRoot:u})}selectionEvent(e,o){console.log("selection_event",e,o),o&&(this.selected_repository=o,this.sidebarService.closeById(e))}runTool(){this.apiService.executeAgent(this.agent_id,{host:this.selected_repository?._id?.$oid,apk:this.selected_repository?._id?.$oid,code_repository:this.selected_repository?._id?.$oid}).subscribe(console.log)}static{this.\u0275fac=function(o){return new(o||n)(t.GI1(h.Ww),t.GI1(S.S),t.GI1(O.g))}}static{this.\u0275cmp=t.In1({type:n,selectors:[["app-agent-integration-list"]],inputs:{window_id:"window_id",authorize_url:"authorize_url",agent_id:"agent_id",scm:"scm",auth_type:"auth_type"},decls:4,vars:4,consts:[["loadingCard",""],["fxFill","","id","create-finding",4,"ngIf","ngIfElse"],["fxFill","",3,"nbSpinner"],["fxFill","","id","create-finding"],["fxLayoutAlign","center center","fxLayoutGap","0rem","fxLayout","row",1,"header"],["size","large","status","basic","ghost","","nbButton","",3,"click"],["icon","chevron-left-outline"],["fxFlex","","fxLayoutGap"," 1rem","fxLayout","row"],[1,"subtitle"],[1,"text-interactive","text-hint"],["fxFlex","","fxLayoutGap","1rem"],["fxLayout","column"],[4,"ngFor","ngForOf","ngForElse"],["fxLayoutAlign","end"],["status","basic","size","small","ghost","","nbButton","",3,"click"],[1,"caption-2"],["icon","plus-outline"],[1,"grid-item"],["fxLayoutAlign","start","fxLayout","row",1,"grid-item-content"],["fxFlex","","fxLayoutGap","0.8rem","fxLayoutAlign","start center","fxLayout","row"],["fxFlex","","fxLayout","column"],["fxLayoutGap","1rem","fxLayout","row",2,"margin-bottom","0.4rem"],[2,"height","1.2rem",3,"src"],["fxFlex","",1,"subtitle-2"],["fxFlex",""],["placeholder","Title",3,"showIcon","activated","updateDataFn","value","invalidate"],["placeholder","Description",3,"showIcon","activated","updateDataFn","value","invalidate"],[4,"ngFor","ngForOf"],["fxFlex","","class-caption",""],[3,"placeholder","showIcon","activated","updateDataFn","value","invalidate"]],template:function(o,i){if(1&o&&(t.yuY(0,va,1,1,"ng-template",null,0,t.gJz)(2,ka,19,5,"nb-card",1),t.wVc(3,"async")),2&o){const r=t.Gew(1);t.yG2(2),t.E7m("ngIf",t.kDX(3,2,i.agent_details))("ngIfElse",r)}},dependencies:[c.ay,c.u_,l.KkC,l.iwb,l.q_v,l.GYx,l.UrE,l.yqL,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,ot,c.a,c.uq],styles:['@import"https://fonts.googleapis.com/css?family=Lato:700";\n\n\n\n\n\n\n\n\n\nnb-card[_ngcontent-%COMP%]{margin:0;border-radius:0!important}nb-card-header[_ngcontent-%COMP%]{padding:0;padding-right:1rem;overflow:hidden}button[_ngcontent-%COMP%]{text-transform:capitalize!important}.grid-item[_ngcontent-%COMP%]{margin-bottom:1rem;border-color:var(--color-basic-500)!important;border-width:1px;padding:.3rem;background:var(--background-basic-color-3)}button[_ngcontent-%COMP%]{margin-left:.3rem!important;margin-bottom:.3rem!important}img[_ngcontent-%COMP%]{margin-left:.4rem!important;margin-bottom:.4rem!important}']})}}return n})(),Ga=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.a4G({type:n})}static{this.\u0275inj=t.s3X({providers:[l.eIs],imports:[c.MD,ta.G,Zi,l.EBJ]})}}return n})();t.AnM(z,[c.ay,c.u_,l.KkC,l.iwb,l.UrE,l.sXj,d.sZ,d.cZ,d.qG,d.CA,l.EfU,l.aYD,B.Q,da,K,wt,Rt,Ot],[c.a]),t.AnM(_t,[c.ay,c.u_,st.A,l.KkC,l.iwb,l.q_v,l.UrE,l.yqL,l.sXj,d.sZ,d.cZ,d.qG,d.CA,j._,Oa,It],[c.a]),t.AnM(pt,[c.ay,c.u_,l.KkC,l.iwb,l.q_v,l.GYx,l.UrE,l.yqL,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,ot,z],[c.a]),t.AnM(K,[c.ay,c.u_,l.KkC,l.iwb,l.GYx,l.UrE,l.yqL,l.sXj,d.sZ,d.cZ,d.qG,d.Kg,d.CA,z],[c.a]),t.AnM(rt,[c.u_,l.UrE,g.ot,g.ue,g.ug,l.yqL,l.eAh,l.QLb,l.yAs,l.GAA,l.sXj,d.sZ,d.cZ,d.qG,d.CA,j._,l.w57,B.Q,Rt,St],[c.a])}}]);